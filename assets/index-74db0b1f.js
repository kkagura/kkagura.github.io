var za=Object.defineProperty;var Na=(t,s,e)=>s in t?za(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var p=(t,s,e)=>(Na(t,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Bi(t,s){const e=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)e[n[i]]=!0;return s?i=>!!e[i.toLowerCase()]:i=>!!e[i]}const ot={},$e=[],Dt=()=>{},Wa=()=>!1,Ua=/^on[^a-z]/,rn=t=>Ua.test(t),Di=t=>t.startsWith("onUpdate:"),dt=Object.assign,Fi=(t,s)=>{const e=t.indexOf(s);e>-1&&t.splice(e,1)},Ya=Object.prototype.hasOwnProperty,K=(t,s)=>Ya.call(t,s),k=Array.isArray,He=t=>an(t)==="[object Map]",xr=t=>an(t)==="[object Set]",W=t=>typeof t=="function",ht=t=>typeof t=="string",ki=t=>typeof t=="symbol",rt=t=>t!==null&&typeof t=="object",Mr=t=>rt(t)&&W(t.then)&&W(t.catch),_r=Object.prototype.toString,an=t=>_r.call(t),Va=t=>an(t).slice(8,-1),Er=t=>an(t)==="[object Object]",zi=t=>ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Is=Bi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ln=t=>{const s=Object.create(null);return e=>s[e]||(s[e]=t(e))},Xa=/-(\w)/g,Gt=ln(t=>t.replace(Xa,(s,e)=>e?e.toUpperCase():"")),Ga=/\B([A-Z])/g,ze=ln(t=>t.replace(Ga,"-$1").toLowerCase()),cn=ln(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ls=ln(t=>t?`on${cn(t)}`:""),rs=(t,s)=>!Object.is(t,s),Pn=(t,s)=>{for(let e=0;e<t.length;e++)t[e](s)},As=(t,s,e)=>{Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value:e})},Ka=t=>{const s=parseFloat(t);return isNaN(s)?t:s},Za=t=>{const s=ht(t)?Number(t):NaN;return isNaN(s)?t:s};let Po;const Xn=()=>Po||(Po=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hn(t){if(k(t)){const s={};for(let e=0;e<t.length;e++){const n=t[e],i=ht(n)?Qa(n):hn(n);if(i)for(const o in i)s[o]=i[o]}return s}else{if(ht(t))return t;if(rt(t))return t}}const qa=/;(?![^(]*\))/g,ja=/:([^]+)/,Ja=/\/\*[^]*?\*\//g;function Qa(t){const s={};return t.replace(Ja,"").split(qa).forEach(e=>{if(e){const n=e.split(ja);n.length>1&&(s[n[0].trim()]=n[1].trim())}}),s}function yt(t){let s="";if(ht(t))s=t;else if(k(t))for(let e=0;e<t.length;e++){const n=yt(t[e]);n&&(s+=n+" ")}else if(rt(t))for(const e in t)t[e]&&(s+=e+" ");return s.trim()}const tl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",el=Bi(tl);function Pr(t){return!!t||t===""}const sl=t=>ht(t)?t:t==null?"":k(t)||rt(t)&&(t.toString===_r||!W(t.toString))?JSON.stringify(t,Or,2):String(t),Or=(t,s)=>s&&s.__v_isRef?Or(t,s.value):He(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((e,[n,i])=>(e[`${n} =>`]=i,e),{})}:xr(s)?{[`Set(${s.size})`]:[...s.values()]}:rt(s)&&!k(s)&&!Er(s)?String(s):s;let $t;class nl{constructor(s=!1){this.detached=s,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$t,!s&&$t&&(this.index=($t.scopes||($t.scopes=[])).push(this)-1)}get active(){return this._active}run(s){if(this._active){const e=$t;try{return $t=this,s()}finally{$t=e}}}on(){$t=this}off(){$t=this.parent}stop(s){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!s){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function il(t,s=$t){s&&s.active&&s.effects.push(t)}function ol(){return $t}const Ni=t=>{const s=new Set(t);return s.w=0,s.n=0,s},Rr=t=>(t.w&le)>0,Ir=t=>(t.n&le)>0,rl=({deps:t})=>{if(t.length)for(let s=0;s<t.length;s++)t[s].w|=le},al=t=>{const{deps:s}=t;if(s.length){let e=0;for(let n=0;n<s.length;n++){const i=s[n];Rr(i)&&!Ir(i)?i.delete(t):s[e++]=i,i.w&=~le,i.n&=~le}s.length=e}},Gn=new WeakMap;let je=0,le=1;const Kn=30;let Ht;const Te=Symbol(""),Zn=Symbol("");class Wi{constructor(s,e=null,n){this.fn=s,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,il(this,n)}run(){if(!this.active)return this.fn();let s=Ht,e=re;for(;s;){if(s===this)return;s=s.parent}try{return this.parent=Ht,Ht=this,re=!0,le=1<<++je,je<=Kn?rl(this):Oo(this),this.fn()}finally{je<=Kn&&al(this),le=1<<--je,Ht=this.parent,re=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ht===this?this.deferStop=!0:this.active&&(Oo(this),this.onStop&&this.onStop(),this.active=!1)}}function Oo(t){const{deps:s}=t;if(s.length){for(let e=0;e<s.length;e++)s[e].delete(t);s.length=0}}let re=!0;const Lr=[];function Ne(){Lr.push(re),re=!1}function We(){const t=Lr.pop();re=t===void 0?!0:t}function Et(t,s,e){if(re&&Ht){let n=Gn.get(t);n||Gn.set(t,n=new Map);let i=n.get(e);i||n.set(e,i=Ni()),Sr(i)}}function Sr(t,s){let e=!1;je<=Kn?Ir(t)||(t.n|=le,e=!Rr(t)):e=!t.has(Ht),e&&(t.add(Ht),Ht.deps.push(t))}function Qt(t,s,e,n,i,o){const r=Gn.get(t);if(!r)return;let a=[];if(s==="clear")a=[...r.values()];else if(e==="length"&&k(t)){const l=Number(n);r.forEach((c,h)=>{(h==="length"||h>=l)&&a.push(c)})}else switch(e!==void 0&&a.push(r.get(e)),s){case"add":k(t)?zi(e)&&a.push(r.get("length")):(a.push(r.get(Te)),He(t)&&a.push(r.get(Zn)));break;case"delete":k(t)||(a.push(r.get(Te)),He(t)&&a.push(r.get(Zn)));break;case"set":He(t)&&a.push(r.get(Te));break}if(a.length===1)a[0]&&qn(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);qn(Ni(l))}}function qn(t,s){const e=k(t)?t:[...t];for(const n of e)n.computed&&Ro(n);for(const n of e)n.computed||Ro(n)}function Ro(t,s){(t!==Ht||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const ll=Bi("__proto__,__v_isRef,__isVue"),Ar=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ki)),cl=Ui(),hl=Ui(!1,!0),ul=Ui(!0),Io=fl();function fl(){const t={};return["includes","indexOf","lastIndexOf"].forEach(s=>{t[s]=function(...e){const n=Z(this);for(let o=0,r=this.length;o<r;o++)Et(n,"get",o+"");const i=n[s](...e);return i===-1||i===!1?n[s](...e.map(Z)):i}}),["push","pop","shift","unshift","splice"].forEach(s=>{t[s]=function(...e){Ne();const n=Z(this)[s].apply(this,e);return We(),n}}),t}function dl(t){const s=Z(this);return Et(s,"has",t),s.hasOwnProperty(t)}function Ui(t=!1,s=!1){return function(n,i,o){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return s;if(i==="__v_raw"&&o===(t?s?Rl:Fr:s?Dr:Br).get(n))return n;const r=k(n);if(!t){if(r&&K(Io,i))return Reflect.get(Io,i,o);if(i==="hasOwnProperty")return dl}const a=Reflect.get(n,i,o);return(ki(i)?Ar.has(i):ll(i))||(t||Et(n,"get",i),s)?a:Ct(a)?r&&zi(i)?a:a.value:rt(a)?t?kr(a):fn(a):a}}const gl=$r(),pl=$r(!0);function $r(t=!1){return function(e,n,i,o){let r=e[n];if(Fe(r)&&Ct(r)&&!Ct(i))return!1;if(!t&&(!$s(i)&&!Fe(i)&&(r=Z(r),i=Z(i)),!k(e)&&Ct(r)&&!Ct(i)))return r.value=i,!0;const a=k(e)&&zi(n)?Number(n)<e.length:K(e,n),l=Reflect.set(e,n,i,o);return e===Z(o)&&(a?rs(i,r)&&Qt(e,"set",n,i):Qt(e,"add",n,i)),l}}function ml(t,s){const e=K(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&e&&Qt(t,"delete",s,void 0),n}function vl(t,s){const e=Reflect.has(t,s);return(!ki(s)||!Ar.has(s))&&Et(t,"has",s),e}function wl(t){return Et(t,"iterate",k(t)?"length":Te),Reflect.ownKeys(t)}const Hr={get:cl,set:gl,deleteProperty:ml,has:vl,ownKeys:wl},yl={get:ul,set(t,s){return!0},deleteProperty(t,s){return!0}},bl=dt({},Hr,{get:hl,set:pl}),Yi=t=>t,un=t=>Reflect.getPrototypeOf(t);function bs(t,s,e=!1,n=!1){t=t.__v_raw;const i=Z(t),o=Z(s);e||(s!==o&&Et(i,"get",s),Et(i,"get",o));const{has:r}=un(i),a=n?Yi:e?Gi:as;if(r.call(i,s))return a(t.get(s));if(r.call(i,o))return a(t.get(o));t!==i&&t.get(s)}function Cs(t,s=!1){const e=this.__v_raw,n=Z(e),i=Z(t);return s||(t!==i&&Et(n,"has",t),Et(n,"has",i)),t===i?e.has(t):e.has(t)||e.has(i)}function Ts(t,s=!1){return t=t.__v_raw,!s&&Et(Z(t),"iterate",Te),Reflect.get(t,"size",t)}function Lo(t){t=Z(t);const s=Z(this);return un(s).has.call(s,t)||(s.add(t),Qt(s,"add",t,t)),this}function So(t,s){s=Z(s);const e=Z(this),{has:n,get:i}=un(e);let o=n.call(e,t);o||(t=Z(t),o=n.call(e,t));const r=i.call(e,t);return e.set(t,s),o?rs(s,r)&&Qt(e,"set",t,s):Qt(e,"add",t,s),this}function Ao(t){const s=Z(this),{has:e,get:n}=un(s);let i=e.call(s,t);i||(t=Z(t),i=e.call(s,t)),n&&n.call(s,t);const o=s.delete(t);return i&&Qt(s,"delete",t,void 0),o}function $o(){const t=Z(this),s=t.size!==0,e=t.clear();return s&&Qt(t,"clear",void 0,void 0),e}function xs(t,s){return function(n,i){const o=this,r=o.__v_raw,a=Z(r),l=s?Yi:t?Gi:as;return!t&&Et(a,"iterate",Te),r.forEach((c,h)=>n.call(i,l(c),l(h),o))}}function Ms(t,s,e){return function(...n){const i=this.__v_raw,o=Z(i),r=He(o),a=t==="entries"||t===Symbol.iterator&&r,l=t==="keys"&&r,c=i[t](...n),h=e?Yi:s?Gi:as;return!s&&Et(o,"iterate",l?Zn:Te),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function ee(t){return function(...s){return t==="delete"?!1:this}}function Cl(){const t={get(o){return bs(this,o)},get size(){return Ts(this)},has:Cs,add:Lo,set:So,delete:Ao,clear:$o,forEach:xs(!1,!1)},s={get(o){return bs(this,o,!1,!0)},get size(){return Ts(this)},has:Cs,add:Lo,set:So,delete:Ao,clear:$o,forEach:xs(!1,!0)},e={get(o){return bs(this,o,!0)},get size(){return Ts(this,!0)},has(o){return Cs.call(this,o,!0)},add:ee("add"),set:ee("set"),delete:ee("delete"),clear:ee("clear"),forEach:xs(!0,!1)},n={get(o){return bs(this,o,!0,!0)},get size(){return Ts(this,!0)},has(o){return Cs.call(this,o,!0)},add:ee("add"),set:ee("set"),delete:ee("delete"),clear:ee("clear"),forEach:xs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Ms(o,!1,!1),e[o]=Ms(o,!0,!1),s[o]=Ms(o,!1,!0),n[o]=Ms(o,!0,!0)}),[t,e,s,n]}const[Tl,xl,Ml,_l]=Cl();function Vi(t,s){const e=s?t?_l:Ml:t?xl:Tl;return(n,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(K(e,i)&&i in n?e:n,i,o)}const El={get:Vi(!1,!1)},Pl={get:Vi(!1,!0)},Ol={get:Vi(!0,!1)},Br=new WeakMap,Dr=new WeakMap,Fr=new WeakMap,Rl=new WeakMap;function Il(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ll(t){return t.__v_skip||!Object.isExtensible(t)?0:Il(Va(t))}function fn(t){return Fe(t)?t:Xi(t,!1,Hr,El,Br)}function Sl(t){return Xi(t,!1,bl,Pl,Dr)}function kr(t){return Xi(t,!0,yl,Ol,Fr)}function Xi(t,s,e,n,i){if(!rt(t)||t.__v_raw&&!(s&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const r=Ll(t);if(r===0)return t;const a=new Proxy(t,r===2?n:e);return i.set(t,a),a}function Be(t){return Fe(t)?Be(t.__v_raw):!!(t&&t.__v_isReactive)}function Fe(t){return!!(t&&t.__v_isReadonly)}function $s(t){return!!(t&&t.__v_isShallow)}function zr(t){return Be(t)||Fe(t)}function Z(t){const s=t&&t.__v_raw;return s?Z(s):t}function dn(t){return As(t,"__v_skip",!0),t}const as=t=>rt(t)?fn(t):t,Gi=t=>rt(t)?kr(t):t;function Nr(t){re&&Ht&&(t=Z(t),Sr(t.dep||(t.dep=Ni())))}function Wr(t,s){t=Z(t);const e=t.dep;e&&qn(e)}function Ct(t){return!!(t&&t.__v_isRef===!0)}function ls(t){return Ur(t,!1)}function Ho(t){return Ur(t,!0)}function Ur(t,s){return Ct(t)?t:new Al(t,s)}class Al{constructor(s,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?s:Z(s),this._value=e?s:as(s)}get value(){return Nr(this),this._value}set value(s){const e=this.__v_isShallow||$s(s)||Fe(s);s=e?s:Z(s),rs(s,this._rawValue)&&(this._rawValue=s,this._value=e?s:as(s),Wr(this))}}function lt(t){return Ct(t)?t.value:t}const $l={get:(t,s,e)=>lt(Reflect.get(t,s,e)),set:(t,s,e,n)=>{const i=t[s];return Ct(i)&&!Ct(e)?(i.value=e,!0):Reflect.set(t,s,e,n)}};function Yr(t){return Be(t)?t:new Proxy(t,$l)}class Hl{constructor(s,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Wi(s,()=>{this._dirty||(this._dirty=!0,Wr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const s=Z(this);return Nr(s),(s._dirty||!s._cacheable)&&(s._dirty=!1,s._value=s.effect.run()),s._value}set value(s){this._setter(s)}}function Bl(t,s,e=!1){let n,i;const o=W(t);return o?(n=t,i=Dt):(n=t.get,i=t.set),new Hl(n,i,o||!i,e)}function ae(t,s,e,n){let i;try{i=n?t(...n):t()}catch(o){gn(o,s,e)}return i}function It(t,s,e,n){if(W(t)){const o=ae(t,s,e,n);return o&&Mr(o)&&o.catch(r=>{gn(r,s,e)}),o}const i=[];for(let o=0;o<t.length;o++)i.push(It(t[o],s,e,n));return i}function gn(t,s,e,n=!0){const i=s?s.vnode:null;if(s){let o=s.parent;const r=s.proxy,a=e;for(;o;){const c=o.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,r,a)===!1)return}o=o.parent}const l=s.appContext.config.errorHandler;if(l){ae(l,null,10,[t,r,a]);return}}Dl(t,e,i,n)}function Dl(t,s,e,n=!0){console.error(t)}let cs=!1,jn=!1;const bt=[];let Xt=0;const De=[];let jt=null,we=0;const Vr=Promise.resolve();let Ki=null;function Fl(t){const s=Ki||Vr;return t?s.then(this?t.bind(this):t):s}function kl(t){let s=Xt+1,e=bt.length;for(;s<e;){const n=s+e>>>1;hs(bt[n])<t?s=n+1:e=n}return s}function Zi(t){(!bt.length||!bt.includes(t,cs&&t.allowRecurse?Xt+1:Xt))&&(t.id==null?bt.push(t):bt.splice(kl(t.id),0,t),Xr())}function Xr(){!cs&&!jn&&(jn=!0,Ki=Vr.then(Kr))}function zl(t){const s=bt.indexOf(t);s>Xt&&bt.splice(s,1)}function Nl(t){k(t)?De.push(...t):(!jt||!jt.includes(t,t.allowRecurse?we+1:we))&&De.push(t),Xr()}function Bo(t,s=cs?Xt+1:0){for(;s<bt.length;s++){const e=bt[s];e&&e.pre&&(bt.splice(s,1),s--,e())}}function Gr(t){if(De.length){const s=[...new Set(De)];if(De.length=0,jt){jt.push(...s);return}for(jt=s,jt.sort((e,n)=>hs(e)-hs(n)),we=0;we<jt.length;we++)jt[we]();jt=null,we=0}}const hs=t=>t.id==null?1/0:t.id,Wl=(t,s)=>{const e=hs(t)-hs(s);if(e===0){if(t.pre&&!s.pre)return-1;if(s.pre&&!t.pre)return 1}return e};function Kr(t){jn=!1,cs=!0,bt.sort(Wl);const s=Dt;try{for(Xt=0;Xt<bt.length;Xt++){const e=bt[Xt];e&&e.active!==!1&&ae(e,null,14)}}finally{Xt=0,bt.length=0,Gr(),cs=!1,Ki=null,(bt.length||De.length)&&Kr()}}function Ul(t,s,...e){if(t.isUnmounted)return;const n=t.vnode.props||ot;let i=e;const o=s.startsWith("update:"),r=o&&s.slice(7);if(r&&r in n){const h=`${r==="modelValue"?"model":r}Modifiers`,{number:d,trim:f}=n[h]||ot;f&&(i=e.map(m=>ht(m)?m.trim():m)),d&&(i=e.map(Ka))}let a,l=n[a=Ls(s)]||n[a=Ls(Gt(s))];!l&&o&&(l=n[a=Ls(ze(s))]),l&&It(l,t,6,i);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,It(c,t,6,i)}}function Zr(t,s,e=!1){const n=s.emitsCache,i=n.get(t);if(i!==void 0)return i;const o=t.emits;let r={},a=!1;if(!W(t)){const l=c=>{const h=Zr(c,s,!0);h&&(a=!0,dt(r,h))};!e&&s.mixins.length&&s.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!a?(rt(t)&&n.set(t,null),null):(k(o)?o.forEach(l=>r[l]=null):dt(r,o),rt(t)&&n.set(t,r),r)}function pn(t,s){return!t||!rn(s)?!1:(s=s.slice(2).replace(/Once$/,""),K(t,s[0].toLowerCase()+s.slice(1))||K(t,ze(s))||K(t,s))}let wt=null,qr=null;function Hs(t){const s=wt;return wt=t,qr=t&&t.type.__scopeId||null,s}function mn(t,s=wt,e){if(!s||t._n)return t;const n=(...i)=>{n._d&&Zo(-1);const o=Hs(s);let r;try{r=t(...i)}finally{Hs(o),n._d&&Zo(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function On(t){const{type:s,vnode:e,proxy:n,withProxy:i,props:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:h,renderCache:d,data:f,setupState:m,ctx:y,inheritAttrs:w}=t;let L,R;const S=Hs(t);try{if(e.shapeFlag&4){const E=i||n;L=Vt(h.call(E,E,d,o,m,f,y)),R=l}else{const E=s;L=Vt(E.length>1?E(o,{attrs:l,slots:a,emit:c}):E(o,null)),R=s.props?l:Yl(l)}}catch(E){is.length=0,gn(E,t,1),L=ft(Lt)}let z=L;if(R&&w!==!1){const E=Object.keys(R),{shapeFlag:$}=z;E.length&&$&7&&(r&&E.some(Di)&&(R=Vl(R,r)),z=ce(z,R))}return e.dirs&&(z=ce(z),z.dirs=z.dirs?z.dirs.concat(e.dirs):e.dirs),e.transition&&(z.transition=e.transition),L=z,Hs(S),L}const Yl=t=>{let s;for(const e in t)(e==="class"||e==="style"||rn(e))&&((s||(s={}))[e]=t[e]);return s},Vl=(t,s)=>{const e={};for(const n in t)(!Di(n)||!(n.slice(9)in s))&&(e[n]=t[n]);return e};function Xl(t,s,e){const{props:n,children:i,component:o}=t,{props:r,children:a,patchFlag:l}=s,c=o.emitsOptions;if(s.dirs||s.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?Do(n,r,c):!!r;if(l&8){const h=s.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(r[f]!==n[f]&&!pn(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?Do(n,r,c):!0:!!r;return!1}function Do(t,s,e){const n=Object.keys(s);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(s[o]!==t[o]&&!pn(e,o))return!0}return!1}function Gl({vnode:t,parent:s},e){for(;s&&s.subTree===t;)(t=s.vnode).el=e,s=s.parent}const Kl=t=>t.__isSuspense;function Zl(t,s){s&&s.pendingBranch?k(t)?s.effects.push(...t):s.effects.push(t):Nl(t)}const _s={};function Rn(t,s,e){return jr(t,s,e)}function jr(t,s,{immediate:e,deep:n,flush:i,onTrack:o,onTrigger:r}=ot){var a;const l=ol()===((a=mt)==null?void 0:a.scope)?mt:null;let c,h=!1,d=!1;if(Ct(t)?(c=()=>t.value,h=$s(t)):Be(t)?(c=()=>t,n=!0):k(t)?(d=!0,h=t.some(E=>Be(E)||$s(E)),c=()=>t.map(E=>{if(Ct(E))return E.value;if(Be(E))return Ce(E);if(W(E))return ae(E,l,2)})):W(t)?s?c=()=>ae(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),It(t,l,3,[m])}:c=Dt,s&&n){const E=c;c=()=>Ce(E())}let f,m=E=>{f=S.onStop=()=>{ae(E,l,4)}},y;if(fs)if(m=Dt,s?e&&It(s,l,3,[c(),d?[]:void 0,m]):c(),i==="sync"){const E=jc();y=E.__watcherHandles||(E.__watcherHandles=[])}else return Dt;let w=d?new Array(t.length).fill(_s):_s;const L=()=>{if(S.active)if(s){const E=S.run();(n||h||(d?E.some(($,j)=>rs($,w[j])):rs(E,w)))&&(f&&f(),It(s,l,3,[E,w===_s?void 0:d&&w[0]===_s?[]:w,m]),w=E)}else S.run()};L.allowRecurse=!!s;let R;i==="sync"?R=L:i==="post"?R=()=>_t(L,l&&l.suspense):(L.pre=!0,l&&(L.id=l.uid),R=()=>Zi(L));const S=new Wi(c,R);s?e?L():w=S.run():i==="post"?_t(S.run.bind(S),l&&l.suspense):S.run();const z=()=>{S.stop(),l&&l.scope&&Fi(l.scope.effects,S)};return y&&y.push(z),z}function ql(t,s,e){const n=this.proxy,i=ht(t)?t.includes(".")?Jr(n,t):()=>n[t]:t.bind(n,n);let o;W(s)?o=s:(o=s.handler,e=s);const r=mt;ke(this);const a=jr(i,o.bind(n),e);return r?ke(r):xe(),a}function Jr(t,s){const e=s.split(".");return()=>{let n=t;for(let i=0;i<e.length&&n;i++)n=n[e[i]];return n}}function Ce(t,s){if(!rt(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),Ct(t))Ce(t.value,s);else if(k(t))for(let e=0;e<t.length;e++)Ce(t[e],s);else if(xr(t)||He(t))t.forEach(e=>{Ce(e,s)});else if(Er(t))for(const e in t)Ce(t[e],s);return t}function jl(t,s){const e=wt;if(e===null)return t;const n=Cn(e)||e.proxy,i=t.dirs||(t.dirs=[]);for(let o=0;o<s.length;o++){let[r,a,l,c=ot]=s[o];r&&(W(r)&&(r={mounted:r,updated:r}),r.deep&&Ce(a),i.push({dir:r,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function de(t,s,e,n){const i=t.dirs,o=s&&s.dirs;for(let r=0;r<i.length;r++){const a=i[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(Ne(),It(l,e,8,[t.el,a,t,s]),We())}}function Jl(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qi(()=>{t.isMounted=!0}),ji(()=>{t.isUnmounting=!0}),t}const Rt=[Function,Array],Qr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rt,onEnter:Rt,onAfterEnter:Rt,onEnterCancelled:Rt,onBeforeLeave:Rt,onLeave:Rt,onAfterLeave:Rt,onLeaveCancelled:Rt,onBeforeAppear:Rt,onAppear:Rt,onAfterAppear:Rt,onAppearCancelled:Rt},Ql={name:"BaseTransition",props:Qr,setup(t,{slots:s}){const e=Nc(),n=Jl();let i;return()=>{const o=s.default&&ea(s.default(),!0);if(!o||!o.length)return;let r=o[0];if(o.length>1){for(const w of o)if(w.type!==Lt){r=w;break}}const a=Z(t),{mode:l}=a;if(n.isLeaving)return In(r);const c=Fo(r);if(!c)return In(r);const h=Jn(c,a,n,e);Qn(c,h);const d=e.subTree,f=d&&Fo(d);let m=!1;const{getTransitionKey:y}=c.type;if(y){const w=y();i===void 0?i=w:w!==i&&(i=w,m=!0)}if(f&&f.type!==Lt&&(!ye(c,f)||m)){const w=Jn(f,a,n,e);if(Qn(f,w),l==="out-in")return n.isLeaving=!0,w.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},In(r);l==="in-out"&&c.type!==Lt&&(w.delayLeave=(L,R,S)=>{const z=ta(n,f);z[String(f.key)]=f,L._leaveCb=()=>{R(),L._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=S})}return r}}},tc=Ql;function ta(t,s){const{leavingVNodes:e}=t;let n=e.get(s.type);return n||(n=Object.create(null),e.set(s.type,n)),n}function Jn(t,s,e,n){const{appear:i,mode:o,persisted:r=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:w,onAppear:L,onAfterAppear:R,onAppearCancelled:S}=s,z=String(t.key),E=ta(e,t),$=(B,Y)=>{B&&It(B,n,9,Y)},j=(B,Y)=>{const U=Y[1];$(B,Y),k(B)?B.every(tt=>tt.length<=1)&&U():B.length<=1&&U()},it={mode:o,persisted:r,beforeEnter(B){let Y=a;if(!e.isMounted)if(i)Y=w||a;else return;B._leaveCb&&B._leaveCb(!0);const U=E[z];U&&ye(t,U)&&U.el._leaveCb&&U.el._leaveCb(),$(Y,[B])},enter(B){let Y=l,U=c,tt=h;if(!e.isMounted)if(i)Y=L||l,U=R||c,tt=S||h;else return;let H=!1;const at=B._enterCb=gt=>{H||(H=!0,gt?$(tt,[B]):$(U,[B]),it.delayedLeave&&it.delayedLeave(),B._enterCb=void 0)};Y?j(Y,[B,at]):at()},leave(B,Y){const U=String(t.key);if(B._enterCb&&B._enterCb(!0),e.isUnmounting)return Y();$(d,[B]);let tt=!1;const H=B._leaveCb=at=>{tt||(tt=!0,Y(),at?$(y,[B]):$(m,[B]),B._leaveCb=void 0,E[U]===t&&delete E[U])};E[U]=t,f?j(f,[B,H]):H()},clone(B){return Jn(B,s,e,n)}};return it}function In(t){if(vn(t))return t=ce(t),t.children=null,t}function Fo(t){return vn(t)?t.children?t.children[0]:void 0:t}function Qn(t,s){t.shapeFlag&6&&t.component?Qn(t.component.subTree,s):t.shapeFlag&128?(t.ssContent.transition=s.clone(t.ssContent),t.ssFallback.transition=s.clone(t.ssFallback)):t.transition=s}function ea(t,s=!1,e){let n=[],i=0;for(let o=0;o<t.length;o++){let r=t[o];const a=e==null?r.key:String(e)+String(r.key!=null?r.key:o);r.type===xt?(r.patchFlag&128&&i++,n=n.concat(ea(r.children,s,a))):(s||r.type!==Lt)&&n.push(a!=null?ce(r,{key:a}):r)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function _e(t,s){return W(t)?(()=>dt({name:t.name},s,{setup:t}))():t}const ts=t=>!!t.type.__asyncLoader,vn=t=>t.type.__isKeepAlive;function ec(t,s){sa(t,"a",s)}function sc(t,s){sa(t,"da",s)}function sa(t,s,e=mt){const n=t.__wdc||(t.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(wn(s,n,e),e){let i=e.parent;for(;i&&i.parent;)vn(i.parent.vnode)&&nc(n,s,e,i),i=i.parent}}function nc(t,s,e,n){const i=wn(s,t,n,!0);na(()=>{Fi(n[s],i)},e)}function wn(t,s,e=mt,n=!1){if(e){const i=e[t]||(e[t]=[]),o=s.__weh||(s.__weh=(...r)=>{if(e.isUnmounted)return;Ne(),ke(e);const a=It(s,e,t,r);return xe(),We(),a});return n?i.unshift(o):i.push(o),o}}const te=t=>(s,e=mt)=>(!fs||t==="sp")&&wn(t,(...n)=>s(...n),e),ic=te("bm"),qi=te("m"),oc=te("bu"),rc=te("u"),ji=te("bum"),na=te("um"),ac=te("sp"),lc=te("rtg"),cc=te("rtc");function hc(t,s=mt){wn("ec",t,s)}const ia="components",oa=Symbol.for("v-ndc");function ti(t){return ht(t)?uc(ia,t,!1)||t:t||oa}function uc(t,s,e=!0,n=!1){const i=wt||mt;if(i){const o=i.type;if(t===ia){const a=Xc(o,!1);if(a&&(a===s||a===Gt(s)||a===cn(Gt(s))))return o}const r=ko(i[t]||o[t],s)||ko(i.appContext[t],s);return!r&&n?o:r}}function ko(t,s){return t&&(t[s]||t[Gt(s)]||t[cn(Gt(s))])}function ei(t,s,e,n){let i;const o=e&&e[n];if(k(t)||ht(t)){i=new Array(t.length);for(let r=0,a=t.length;r<a;r++)i[r]=s(t[r],r,void 0,o&&o[r])}else if(typeof t=="number"){i=new Array(t);for(let r=0;r<t;r++)i[r]=s(r+1,r,void 0,o&&o[r])}else if(rt(t))if(t[Symbol.iterator])i=Array.from(t,(r,a)=>s(r,a,void 0,o&&o[a]));else{const r=Object.keys(t);i=new Array(r.length);for(let a=0,l=r.length;a<l;a++){const c=r[a];i[a]=s(t[c],c,a,o&&o[a])}}else i=[];return e&&(e[n]=i),i}function ra(t,s,e={},n,i){if(wt.isCE||wt.parent&&ts(wt.parent)&&wt.parent.isCE)return s!=="default"&&(e.name=s),ft("slot",e,n&&n());let o=t[s];o&&o._c&&(o._d=!1),X();const r=o&&aa(o(e)),a=oe(xt,{key:e.key||r&&r.key||`_${s}`},r||(n?n():[]),r&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function aa(t){return t.some(s=>Fs(s)?!(s.type===Lt||s.type===xt&&!aa(s.children)):!0)?t:null}function fc(t,s){const e={};for(const n in t)e[s&&/[A-Z]/.test(n)?`on:${n}`:Ls(n)]=t[n];return e}const si=t=>t?ba(t)?Cn(t)||t.proxy:si(t.parent):null,es=dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>si(t.parent),$root:t=>si(t.root),$emit:t=>t.emit,$options:t=>Ji(t),$forceUpdate:t=>t.f||(t.f=()=>Zi(t.update)),$nextTick:t=>t.n||(t.n=Fl.bind(t.proxy)),$watch:t=>ql.bind(t)}),Ln=(t,s)=>t!==ot&&!t.__isScriptSetup&&K(t,s),dc={get({_:t},s){const{ctx:e,setupState:n,data:i,props:o,accessCache:r,type:a,appContext:l}=t;let c;if(s[0]!=="$"){const m=r[s];if(m!==void 0)switch(m){case 1:return n[s];case 2:return i[s];case 4:return e[s];case 3:return o[s]}else{if(Ln(n,s))return r[s]=1,n[s];if(i!==ot&&K(i,s))return r[s]=2,i[s];if((c=t.propsOptions[0])&&K(c,s))return r[s]=3,o[s];if(e!==ot&&K(e,s))return r[s]=4,e[s];ni&&(r[s]=0)}}const h=es[s];let d,f;if(h)return s==="$attrs"&&Et(t,"get",s),h(t);if((d=a.__cssModules)&&(d=d[s]))return d;if(e!==ot&&K(e,s))return r[s]=4,e[s];if(f=l.config.globalProperties,K(f,s))return f[s]},set({_:t},s,e){const{data:n,setupState:i,ctx:o}=t;return Ln(i,s)?(i[s]=e,!0):n!==ot&&K(n,s)?(n[s]=e,!0):K(t.props,s)||s[0]==="$"&&s.slice(1)in t?!1:(o[s]=e,!0)},has({_:{data:t,setupState:s,accessCache:e,ctx:n,appContext:i,propsOptions:o}},r){let a;return!!e[r]||t!==ot&&K(t,r)||Ln(s,r)||(a=o[0])&&K(a,r)||K(n,r)||K(es,r)||K(i.config.globalProperties,r)},defineProperty(t,s,e){return e.get!=null?t._.accessCache[s]=0:K(e,"value")&&this.set(t,s,e.value,null),Reflect.defineProperty(t,s,e)}};function zo(t){return k(t)?t.reduce((s,e)=>(s[e]=null,s),{}):t}let ni=!0;function gc(t){const s=Ji(t),e=t.proxy,n=t.ctx;ni=!1,s.beforeCreate&&No(s.beforeCreate,t,"bc");const{data:i,computed:o,methods:r,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:f,beforeUpdate:m,updated:y,activated:w,deactivated:L,beforeDestroy:R,beforeUnmount:S,destroyed:z,unmounted:E,render:$,renderTracked:j,renderTriggered:it,errorCaptured:B,serverPrefetch:Y,expose:U,inheritAttrs:tt,components:H,directives:at,filters:gt}=s;if(c&&pc(c,n,null),r)for(const ct in r){const et=r[ct];W(et)&&(n[ct]=et.bind(e))}if(i){const ct=i.call(e,e);rt(ct)&&(t.data=fn(ct))}if(ni=!0,o)for(const ct in o){const et=o[ct],ue=W(et)?et.bind(e,e):W(et.get)?et.get.bind(e,e):Dt,ws=!W(et)&&W(et.set)?et.set.bind(e):Dt,fe=Kc({get:ue,set:ws});Object.defineProperty(n,ct,{enumerable:!0,configurable:!0,get:()=>fe.value,set:Ft=>fe.value=Ft})}if(a)for(const ct in a)la(a[ct],n,e,ct);if(l){const ct=W(l)?l.call(e):l;Reflect.ownKeys(ct).forEach(et=>{ha(et,ct[et])})}h&&No(h,t,"c");function pt(ct,et){k(et)?et.forEach(ue=>ct(ue.bind(e))):et&&ct(et.bind(e))}if(pt(ic,d),pt(qi,f),pt(oc,m),pt(rc,y),pt(ec,w),pt(sc,L),pt(hc,B),pt(cc,j),pt(lc,it),pt(ji,S),pt(na,E),pt(ac,Y),k(U))if(U.length){const ct=t.exposed||(t.exposed={});U.forEach(et=>{Object.defineProperty(ct,et,{get:()=>e[et],set:ue=>e[et]=ue})})}else t.exposed||(t.exposed={});$&&t.render===Dt&&(t.render=$),tt!=null&&(t.inheritAttrs=tt),H&&(t.components=H),at&&(t.directives=at)}function pc(t,s,e=Dt){k(t)&&(t=ii(t));for(const n in t){const i=t[n];let o;rt(i)?"default"in i?o=ss(i.from||n,i.default,!0):o=ss(i.from||n):o=ss(i),Ct(o)?Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):s[n]=o}}function No(t,s,e){It(k(t)?t.map(n=>n.bind(s.proxy)):t.bind(s.proxy),s,e)}function la(t,s,e,n){const i=n.includes(".")?Jr(e,n):()=>e[n];if(ht(t)){const o=s[t];W(o)&&Rn(i,o)}else if(W(t))Rn(i,t.bind(e));else if(rt(t))if(k(t))t.forEach(o=>la(o,s,e,n));else{const o=W(t.handler)?t.handler.bind(e):s[t.handler];W(o)&&Rn(i,o,t)}}function Ji(t){const s=t.type,{mixins:e,extends:n}=s,{mixins:i,optionsCache:o,config:{optionMergeStrategies:r}}=t.appContext,a=o.get(s);let l;return a?l=a:!i.length&&!e&&!n?l=s:(l={},i.length&&i.forEach(c=>Bs(l,c,r,!0)),Bs(l,s,r)),rt(s)&&o.set(s,l),l}function Bs(t,s,e,n=!1){const{mixins:i,extends:o}=s;o&&Bs(t,o,e,!0),i&&i.forEach(r=>Bs(t,r,e,!0));for(const r in s)if(!(n&&r==="expose")){const a=mc[r]||e&&e[r];t[r]=a?a(t[r],s[r]):s[r]}return t}const mc={data:Wo,props:Uo,emits:Uo,methods:Je,computed:Je,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:Je,directives:Je,watch:wc,provide:Wo,inject:vc};function Wo(t,s){return s?t?function(){return dt(W(t)?t.call(this,this):t,W(s)?s.call(this,this):s)}:s:t}function vc(t,s){return Je(ii(t),ii(s))}function ii(t){if(k(t)){const s={};for(let e=0;e<t.length;e++)s[t[e]]=t[e];return s}return t}function Tt(t,s){return t?[...new Set([].concat(t,s))]:s}function Je(t,s){return t?dt(Object.create(null),t,s):s}function Uo(t,s){return t?k(t)&&k(s)?[...new Set([...t,...s])]:dt(Object.create(null),zo(t),zo(s??{})):s}function wc(t,s){if(!t)return s;if(!s)return t;const e=dt(Object.create(null),t);for(const n in s)e[n]=Tt(t[n],s[n]);return e}function ca(){return{app:null,config:{isNativeTag:Wa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yc=0;function bc(t,s){return function(n,i=null){W(n)||(n=dt({},n)),i!=null&&!rt(i)&&(i=null);const o=ca(),r=new Set;let a=!1;const l=o.app={_uid:yc++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:Jc,get config(){return o.config},set config(c){},use(c,...h){return r.has(c)||(c&&W(c.install)?(r.add(c),c.install(l,...h)):W(c)&&(r.add(c),c(l,...h))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,h){return h?(o.components[c]=h,l):o.components[c]},directive(c,h){return h?(o.directives[c]=h,l):o.directives[c]},mount(c,h,d){if(!a){const f=ft(n,i);return f.appContext=o,h&&s?s(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,Cn(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,h){return o.provides[c]=h,l},runWithContext(c){Ds=l;try{return c()}finally{Ds=null}}};return l}}let Ds=null;function ha(t,s){if(mt){let e=mt.provides;const n=mt.parent&&mt.parent.provides;n===e&&(e=mt.provides=Object.create(n)),e[t]=s}}function ss(t,s,e=!1){const n=mt||wt;if(n||Ds){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ds._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return e&&W(s)?s.call(n&&n.proxy):s}}function Cc(t,s,e,n=!1){const i={},o={};As(o,bn,1),t.propsDefaults=Object.create(null),ua(t,s,i,o);for(const r in t.propsOptions[0])r in i||(i[r]=void 0);e?t.props=n?i:Sl(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function Tc(t,s,e,n){const{props:i,attrs:o,vnode:{patchFlag:r}}=t,a=Z(i),[l]=t.propsOptions;let c=!1;if((n||r>0)&&!(r&16)){if(r&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(pn(t.emitsOptions,f))continue;const m=s[f];if(l)if(K(o,f))m!==o[f]&&(o[f]=m,c=!0);else{const y=Gt(f);i[y]=oi(l,a,y,m,t,!1)}else m!==o[f]&&(o[f]=m,c=!0)}}}else{ua(t,s,i,o)&&(c=!0);let h;for(const d in a)(!s||!K(s,d)&&((h=ze(d))===d||!K(s,h)))&&(l?e&&(e[d]!==void 0||e[h]!==void 0)&&(i[d]=oi(l,a,d,void 0,t,!0)):delete i[d]);if(o!==a)for(const d in o)(!s||!K(s,d))&&(delete o[d],c=!0)}c&&Qt(t,"set","$attrs")}function ua(t,s,e,n){const[i,o]=t.propsOptions;let r=!1,a;if(s)for(let l in s){if(Is(l))continue;const c=s[l];let h;i&&K(i,h=Gt(l))?!o||!o.includes(h)?e[h]=c:(a||(a={}))[h]=c:pn(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,r=!0)}if(o){const l=Z(e),c=a||ot;for(let h=0;h<o.length;h++){const d=o[h];e[d]=oi(i,l,d,c[d],t,!K(c,d))}}return r}function oi(t,s,e,n,i,o){const r=t[e];if(r!=null){const a=K(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&W(l)){const{propsDefaults:c}=i;e in c?n=c[e]:(ke(i),n=c[e]=l.call(null,s),xe())}else n=l}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===ze(e))&&(n=!0))}return n}function fa(t,s,e=!1){const n=s.propsCache,i=n.get(t);if(i)return i;const o=t.props,r={},a=[];let l=!1;if(!W(t)){const h=d=>{l=!0;const[f,m]=fa(d,s,!0);dt(r,f),m&&a.push(...m)};!e&&s.mixins.length&&s.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!o&&!l)return rt(t)&&n.set(t,$e),$e;if(k(o))for(let h=0;h<o.length;h++){const d=Gt(o[h]);Yo(d)&&(r[d]=ot)}else if(o)for(const h in o){const d=Gt(h);if(Yo(d)){const f=o[h],m=r[d]=k(f)||W(f)?{type:f}:dt({},f);if(m){const y=Go(Boolean,m.type),w=Go(String,m.type);m[0]=y>-1,m[1]=w<0||y<w,(y>-1||K(m,"default"))&&a.push(d)}}}const c=[r,a];return rt(t)&&n.set(t,c),c}function Yo(t){return t[0]!=="$"}function Vo(t){const s=t&&t.toString().match(/^\s*(function|class) (\w+)/);return s?s[2]:t===null?"null":""}function Xo(t,s){return Vo(t)===Vo(s)}function Go(t,s){return k(s)?s.findIndex(e=>Xo(e,t)):W(s)&&Xo(s,t)?0:-1}const da=t=>t[0]==="_"||t==="$stable",Qi=t=>k(t)?t.map(Vt):[Vt(t)],xc=(t,s,e)=>{if(s._n)return s;const n=mn((...i)=>Qi(s(...i)),e);return n._c=!1,n},ga=(t,s,e)=>{const n=t._ctx;for(const i in t){if(da(i))continue;const o=t[i];if(W(o))s[i]=xc(i,o,n);else if(o!=null){const r=Qi(o);s[i]=()=>r}}},pa=(t,s)=>{const e=Qi(s);t.slots.default=()=>e},Mc=(t,s)=>{if(t.vnode.shapeFlag&32){const e=s._;e?(t.slots=Z(s),As(s,"_",e)):ga(s,t.slots={})}else t.slots={},s&&pa(t,s);As(t.slots,bn,1)},_c=(t,s,e)=>{const{vnode:n,slots:i}=t;let o=!0,r=ot;if(n.shapeFlag&32){const a=s._;a?e&&a===1?o=!1:(dt(i,s),!e&&a===1&&delete i._):(o=!s.$stable,ga(s,i)),r=s}else s&&(pa(t,s),r={default:1});if(o)for(const a in i)!da(a)&&!(a in r)&&delete i[a]};function ri(t,s,e,n,i=!1){if(k(t)){t.forEach((f,m)=>ri(f,s&&(k(s)?s[m]:s),e,n,i));return}if(ts(n)&&!i)return;const o=n.shapeFlag&4?Cn(n.component)||n.component.proxy:n.el,r=i?null:o,{i:a,r:l}=t,c=s&&s.r,h=a.refs===ot?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(ht(c)?(h[c]=null,K(d,c)&&(d[c]=null)):Ct(c)&&(c.value=null)),W(l))ae(l,a,12,[r,h]);else{const f=ht(l),m=Ct(l);if(f||m){const y=()=>{if(t.f){const w=f?K(d,l)?d[l]:h[l]:l.value;i?k(w)&&Fi(w,o):k(w)?w.includes(o)||w.push(o):f?(h[l]=[o],K(d,l)&&(d[l]=h[l])):(l.value=[o],t.k&&(h[t.k]=l.value))}else f?(h[l]=r,K(d,l)&&(d[l]=r)):m&&(l.value=r,t.k&&(h[t.k]=r))};r?(y.id=-1,_t(y,e)):y()}}}const _t=Zl;function Ec(t){return Pc(t)}function Pc(t,s){const e=Xn();e.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:f,setScopeId:m=Dt,insertStaticContent:y}=t,w=(u,g,v,C=null,b=null,_=null,I=!1,x=null,O=!!g.dynamicChildren)=>{if(u===g)return;u&&!ye(u,g)&&(C=ys(u),Ft(u,b,_,!0),u=null),g.patchFlag===-2&&(O=!1,g.dynamicChildren=null);const{type:T,ref:D,shapeFlag:A}=g;switch(T){case yn:L(u,g,v,C);break;case Lt:R(u,g,v,C);break;case Sn:u==null&&S(g,v,C,I);break;case xt:H(u,g,v,C,b,_,I,x,O);break;default:A&1?$(u,g,v,C,b,_,I,x,O):A&6?at(u,g,v,C,b,_,I,x,O):(A&64||A&128)&&T.process(u,g,v,C,b,_,I,x,O,Pe)}D!=null&&b&&ri(D,u&&u.ref,_,g||u,!g)},L=(u,g,v,C)=>{if(u==null)n(g.el=a(g.children),v,C);else{const b=g.el=u.el;g.children!==u.children&&c(b,g.children)}},R=(u,g,v,C)=>{u==null?n(g.el=l(g.children||""),v,C):g.el=u.el},S=(u,g,v,C)=>{[u.el,u.anchor]=y(u.children,g,v,C,u.el,u.anchor)},z=({el:u,anchor:g},v,C)=>{let b;for(;u&&u!==g;)b=f(u),n(u,v,C),u=b;n(g,v,C)},E=({el:u,anchor:g})=>{let v;for(;u&&u!==g;)v=f(u),i(u),u=v;i(g)},$=(u,g,v,C,b,_,I,x,O)=>{I=I||g.type==="svg",u==null?j(g,v,C,b,_,I,x,O):Y(u,g,b,_,I,x,O)},j=(u,g,v,C,b,_,I,x)=>{let O,T;const{type:D,props:A,shapeFlag:F,transition:N,dirs:V}=u;if(O=u.el=r(u.type,_,A&&A.is,A),F&8?h(O,u.children):F&16&&B(u.children,O,null,C,b,_&&D!=="foreignObject",I,x),V&&de(u,null,C,"created"),it(O,u,u.scopeId,I,C),A){for(const J in A)J!=="value"&&!Is(J)&&o(O,J,null,A[J],_,u.children,C,b,qt);"value"in A&&o(O,"value",null,A.value),(T=A.onVnodeBeforeMount)&&zt(T,C,u)}V&&de(u,null,C,"beforeMount");const st=(!b||b&&!b.pendingBranch)&&N&&!N.persisted;st&&N.beforeEnter(O),n(O,g,v),((T=A&&A.onVnodeMounted)||st||V)&&_t(()=>{T&&zt(T,C,u),st&&N.enter(O),V&&de(u,null,C,"mounted")},b)},it=(u,g,v,C,b)=>{if(v&&m(u,v),C)for(let _=0;_<C.length;_++)m(u,C[_]);if(b){let _=b.subTree;if(g===_){const I=b.vnode;it(u,I,I.scopeId,I.slotScopeIds,b.parent)}}},B=(u,g,v,C,b,_,I,x,O=0)=>{for(let T=O;T<u.length;T++){const D=u[T]=x?ie(u[T]):Vt(u[T]);w(null,D,g,v,C,b,_,I,x)}},Y=(u,g,v,C,b,_,I)=>{const x=g.el=u.el;let{patchFlag:O,dynamicChildren:T,dirs:D}=g;O|=u.patchFlag&16;const A=u.props||ot,F=g.props||ot;let N;v&&ge(v,!1),(N=F.onVnodeBeforeUpdate)&&zt(N,v,g,u),D&&de(g,u,v,"beforeUpdate"),v&&ge(v,!0);const V=b&&g.type!=="foreignObject";if(T?U(u.dynamicChildren,T,x,v,C,V,_):I||et(u,g,x,null,v,C,V,_,!1),O>0){if(O&16)tt(x,g,A,F,v,C,b);else if(O&2&&A.class!==F.class&&o(x,"class",null,F.class,b),O&4&&o(x,"style",A.style,F.style,b),O&8){const st=g.dynamicProps;for(let J=0;J<st.length;J++){const ut=st[J],At=A[ut],Oe=F[ut];(Oe!==At||ut==="value")&&o(x,ut,At,Oe,b,u.children,v,C,qt)}}O&1&&u.children!==g.children&&h(x,g.children)}else!I&&T==null&&tt(x,g,A,F,v,C,b);((N=F.onVnodeUpdated)||D)&&_t(()=>{N&&zt(N,v,g,u),D&&de(g,u,v,"updated")},C)},U=(u,g,v,C,b,_,I)=>{for(let x=0;x<g.length;x++){const O=u[x],T=g[x],D=O.el&&(O.type===xt||!ye(O,T)||O.shapeFlag&70)?d(O.el):v;w(O,T,D,null,C,b,_,I,!0)}},tt=(u,g,v,C,b,_,I)=>{if(v!==C){if(v!==ot)for(const x in v)!Is(x)&&!(x in C)&&o(u,x,v[x],null,I,g.children,b,_,qt);for(const x in C){if(Is(x))continue;const O=C[x],T=v[x];O!==T&&x!=="value"&&o(u,x,T,O,I,g.children,b,_,qt)}"value"in C&&o(u,"value",v.value,C.value)}},H=(u,g,v,C,b,_,I,x,O)=>{const T=g.el=u?u.el:a(""),D=g.anchor=u?u.anchor:a("");let{patchFlag:A,dynamicChildren:F,slotScopeIds:N}=g;N&&(x=x?x.concat(N):N),u==null?(n(T,v,C),n(D,v,C),B(g.children,v,D,b,_,I,x,O)):A>0&&A&64&&F&&u.dynamicChildren?(U(u.dynamicChildren,F,v,b,_,I,x),(g.key!=null||b&&g===b.subTree)&&to(u,g,!0)):et(u,g,v,D,b,_,I,x,O)},at=(u,g,v,C,b,_,I,x,O)=>{g.slotScopeIds=x,u==null?g.shapeFlag&512?b.ctx.activate(g,v,C,I,O):gt(g,v,C,b,_,I,O):Xe(u,g,O)},gt=(u,g,v,C,b,_,I)=>{const x=u.component=zc(u,C,b);if(vn(u)&&(x.ctx.renderer=Pe),Wc(x),x.asyncDep){if(b&&b.registerDep(x,pt),!u.el){const O=x.subTree=ft(Lt);R(null,O,g,v)}return}pt(x,u,g,v,b,_,I)},Xe=(u,g,v)=>{const C=g.component=u.component;if(Xl(u,g,v))if(C.asyncDep&&!C.asyncResolved){ct(C,g,v);return}else C.next=g,zl(C.update),C.update();else g.el=u.el,C.vnode=g},pt=(u,g,v,C,b,_,I)=>{const x=()=>{if(u.isMounted){let{next:D,bu:A,u:F,parent:N,vnode:V}=u,st=D,J;ge(u,!1),D?(D.el=V.el,ct(u,D,I)):D=V,A&&Pn(A),(J=D.props&&D.props.onVnodeBeforeUpdate)&&zt(J,N,D,V),ge(u,!0);const ut=On(u),At=u.subTree;u.subTree=ut,w(At,ut,d(At.el),ys(At),u,b,_),D.el=ut.el,st===null&&Gl(u,ut.el),F&&_t(F,b),(J=D.props&&D.props.onVnodeUpdated)&&_t(()=>zt(J,N,D,V),b)}else{let D;const{el:A,props:F}=g,{bm:N,m:V,parent:st}=u,J=ts(g);if(ge(u,!1),N&&Pn(N),!J&&(D=F&&F.onVnodeBeforeMount)&&zt(D,st,g),ge(u,!0),A&&En){const ut=()=>{u.subTree=On(u),En(A,u.subTree,u,b,null)};J?g.type.__asyncLoader().then(()=>!u.isUnmounted&&ut()):ut()}else{const ut=u.subTree=On(u);w(null,ut,v,C,u,b,_),g.el=ut.el}if(V&&_t(V,b),!J&&(D=F&&F.onVnodeMounted)){const ut=g;_t(()=>zt(D,st,ut),b)}(g.shapeFlag&256||st&&ts(st.vnode)&&st.vnode.shapeFlag&256)&&u.a&&_t(u.a,b),u.isMounted=!0,g=v=C=null}},O=u.effect=new Wi(x,()=>Zi(T),u.scope),T=u.update=()=>O.run();T.id=u.uid,ge(u,!0),T()},ct=(u,g,v)=>{g.component=u;const C=u.vnode.props;u.vnode=g,u.next=null,Tc(u,g.props,C,v),_c(u,g.children,v),Ne(),Bo(),We()},et=(u,g,v,C,b,_,I,x,O=!1)=>{const T=u&&u.children,D=u?u.shapeFlag:0,A=g.children,{patchFlag:F,shapeFlag:N}=g;if(F>0){if(F&128){ws(T,A,v,C,b,_,I,x,O);return}else if(F&256){ue(T,A,v,C,b,_,I,x,O);return}}N&8?(D&16&&qt(T,b,_),A!==T&&h(v,A)):D&16?N&16?ws(T,A,v,C,b,_,I,x,O):qt(T,b,_,!0):(D&8&&h(v,""),N&16&&B(A,v,C,b,_,I,x,O))},ue=(u,g,v,C,b,_,I,x,O)=>{u=u||$e,g=g||$e;const T=u.length,D=g.length,A=Math.min(T,D);let F;for(F=0;F<A;F++){const N=g[F]=O?ie(g[F]):Vt(g[F]);w(u[F],N,v,null,b,_,I,x,O)}T>D?qt(u,b,_,!0,!1,A):B(g,v,C,b,_,I,x,O,A)},ws=(u,g,v,C,b,_,I,x,O)=>{let T=0;const D=g.length;let A=u.length-1,F=D-1;for(;T<=A&&T<=F;){const N=u[T],V=g[T]=O?ie(g[T]):Vt(g[T]);if(ye(N,V))w(N,V,v,null,b,_,I,x,O);else break;T++}for(;T<=A&&T<=F;){const N=u[A],V=g[F]=O?ie(g[F]):Vt(g[F]);if(ye(N,V))w(N,V,v,null,b,_,I,x,O);else break;A--,F--}if(T>A){if(T<=F){const N=F+1,V=N<D?g[N].el:C;for(;T<=F;)w(null,g[T]=O?ie(g[T]):Vt(g[T]),v,V,b,_,I,x,O),T++}}else if(T>F)for(;T<=A;)Ft(u[T],b,_,!0),T++;else{const N=T,V=T,st=new Map;for(T=V;T<=F;T++){const Pt=g[T]=O?ie(g[T]):Vt(g[T]);Pt.key!=null&&st.set(Pt.key,T)}let J,ut=0;const At=F-V+1;let Oe=!1,Mo=0;const Ge=new Array(At);for(T=0;T<At;T++)Ge[T]=0;for(T=N;T<=A;T++){const Pt=u[T];if(ut>=At){Ft(Pt,b,_,!0);continue}let kt;if(Pt.key!=null)kt=st.get(Pt.key);else for(J=V;J<=F;J++)if(Ge[J-V]===0&&ye(Pt,g[J])){kt=J;break}kt===void 0?Ft(Pt,b,_,!0):(Ge[kt-V]=T+1,kt>=Mo?Mo=kt:Oe=!0,w(Pt,g[kt],v,null,b,_,I,x,O),ut++)}const _o=Oe?Oc(Ge):$e;for(J=_o.length-1,T=At-1;T>=0;T--){const Pt=V+T,kt=g[Pt],Eo=Pt+1<D?g[Pt+1].el:C;Ge[T]===0?w(null,kt,v,Eo,b,_,I,x,O):Oe&&(J<0||T!==_o[J]?fe(kt,v,Eo,2):J--)}}},fe=(u,g,v,C,b=null)=>{const{el:_,type:I,transition:x,children:O,shapeFlag:T}=u;if(T&6){fe(u.component.subTree,g,v,C);return}if(T&128){u.suspense.move(g,v,C);return}if(T&64){I.move(u,g,v,Pe);return}if(I===xt){n(_,g,v);for(let A=0;A<O.length;A++)fe(O[A],g,v,C);n(u.anchor,g,v);return}if(I===Sn){z(u,g,v);return}if(C!==2&&T&1&&x)if(C===0)x.beforeEnter(_),n(_,g,v),_t(()=>x.enter(_),b);else{const{leave:A,delayLeave:F,afterLeave:N}=x,V=()=>n(_,g,v),st=()=>{A(_,()=>{V(),N&&N()})};F?F(_,V,st):st()}else n(_,g,v)},Ft=(u,g,v,C=!1,b=!1)=>{const{type:_,props:I,ref:x,children:O,dynamicChildren:T,shapeFlag:D,patchFlag:A,dirs:F}=u;if(x!=null&&ri(x,null,v,u,!0),D&256){g.ctx.deactivate(u);return}const N=D&1&&F,V=!ts(u);let st;if(V&&(st=I&&I.onVnodeBeforeUnmount)&&zt(st,g,u),D&6)ka(u.component,v,C);else{if(D&128){u.suspense.unmount(v,C);return}N&&de(u,null,g,"beforeUnmount"),D&64?u.type.remove(u,g,v,b,Pe,C):T&&(_!==xt||A>0&&A&64)?qt(T,g,v,!1,!0):(_===xt&&A&384||!b&&D&16)&&qt(O,g,v),C&&To(u)}(V&&(st=I&&I.onVnodeUnmounted)||N)&&_t(()=>{st&&zt(st,g,u),N&&de(u,null,g,"unmounted")},v)},To=u=>{const{type:g,el:v,anchor:C,transition:b}=u;if(g===xt){Fa(v,C);return}if(g===Sn){E(u);return}const _=()=>{i(v),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(u.shapeFlag&1&&b&&!b.persisted){const{leave:I,delayLeave:x}=b,O=()=>I(v,_);x?x(u.el,_,O):O()}else _()},Fa=(u,g)=>{let v;for(;u!==g;)v=f(u),i(u),u=v;i(g)},ka=(u,g,v)=>{const{bum:C,scope:b,update:_,subTree:I,um:x}=u;C&&Pn(C),b.stop(),_&&(_.active=!1,Ft(I,u,g,v)),x&&_t(x,g),_t(()=>{u.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&u.asyncDep&&!u.asyncResolved&&u.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},qt=(u,g,v,C=!1,b=!1,_=0)=>{for(let I=_;I<u.length;I++)Ft(u[I],g,v,C,b)},ys=u=>u.shapeFlag&6?ys(u.component.subTree):u.shapeFlag&128?u.suspense.next():f(u.anchor||u.el),xo=(u,g,v)=>{u==null?g._vnode&&Ft(g._vnode,null,null,!0):w(g._vnode||null,u,g,null,null,null,v),Bo(),Gr(),g._vnode=u},Pe={p:w,um:Ft,m:fe,r:To,mt:gt,mc:B,pc:et,pbc:U,n:ys,o:t};let _n,En;return s&&([_n,En]=s(Pe)),{render:xo,hydrate:_n,createApp:bc(xo,_n)}}function ge({effect:t,update:s},e){t.allowRecurse=s.allowRecurse=e}function to(t,s,e=!1){const n=t.children,i=s.children;if(k(n)&&k(i))for(let o=0;o<n.length;o++){const r=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=ie(i[o]),a.el=r.el),e||to(r,a)),a.type===yn&&(a.el=r.el)}}function Oc(t){const s=t.slice(),e=[0];let n,i,o,r,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=e[e.length-1],t[i]<c){s[n]=i,e.push(n);continue}for(o=0,r=e.length-1;o<r;)a=o+r>>1,t[e[a]]<c?o=a+1:r=a;c<t[e[o]]&&(o>0&&(s[n]=e[o-1]),e[o]=n)}}for(o=e.length,r=e[o-1];o-- >0;)e[o]=r,r=s[r];return e}const Rc=t=>t.__isTeleport,ns=t=>t&&(t.disabled||t.disabled===""),Ko=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ai=(t,s)=>{const e=t&&t.to;return ht(e)?s?s(e):null:e},Ic={__isTeleport:!0,process(t,s,e,n,i,o,r,a,l,c){const{mc:h,pc:d,pbc:f,o:{insert:m,querySelector:y,createText:w,createComment:L}}=c,R=ns(s.props);let{shapeFlag:S,children:z,dynamicChildren:E}=s;if(t==null){const $=s.el=w(""),j=s.anchor=w("");m($,e,n),m(j,e,n);const it=s.target=ai(s.props,y),B=s.targetAnchor=w("");it&&(m(B,it),r=r||Ko(it));const Y=(U,tt)=>{S&16&&h(z,U,tt,i,o,r,a,l)};R?Y(e,j):it&&Y(it,B)}else{s.el=t.el;const $=s.anchor=t.anchor,j=s.target=t.target,it=s.targetAnchor=t.targetAnchor,B=ns(t.props),Y=B?e:j,U=B?$:it;if(r=r||Ko(j),E?(f(t.dynamicChildren,E,Y,i,o,r,a),to(t,s,!0)):l||d(t,s,Y,U,i,o,r,a,!1),R)B||Es(s,e,$,c,1);else if((s.props&&s.props.to)!==(t.props&&t.props.to)){const tt=s.target=ai(s.props,y);tt&&Es(s,tt,null,c,0)}else B&&Es(s,j,it,c,1)}ma(s)},remove(t,s,e,n,{um:i,o:{remove:o}},r){const{shapeFlag:a,children:l,anchor:c,targetAnchor:h,target:d,props:f}=t;if(d&&o(h),(r||!ns(f))&&(o(c),a&16))for(let m=0;m<l.length;m++){const y=l[m];i(y,s,e,!0,!!y.dynamicChildren)}},move:Es,hydrate:Lc};function Es(t,s,e,{o:{insert:n},m:i},o=2){o===0&&n(t.targetAnchor,s,e);const{el:r,anchor:a,shapeFlag:l,children:c,props:h}=t,d=o===2;if(d&&n(r,s,e),(!d||ns(h))&&l&16)for(let f=0;f<c.length;f++)i(c[f],s,e,2);d&&n(a,s,e)}function Lc(t,s,e,n,i,o,{o:{nextSibling:r,parentNode:a,querySelector:l}},c){const h=s.target=ai(s.props,l);if(h){const d=h._lpa||h.firstChild;if(s.shapeFlag&16)if(ns(s.props))s.anchor=c(r(t),s,a(t),e,n,i,o),s.targetAnchor=d;else{s.anchor=r(t);let f=d;for(;f;)if(f=r(f),f&&f.nodeType===8&&f.data==="teleport anchor"){s.targetAnchor=f,h._lpa=s.targetAnchor&&r(s.targetAnchor);break}c(d,s,h,e,n,i,o)}ma(s)}return s.anchor&&r(s.anchor)}const Sc=Ic;function ma(t){const s=t.ctx;if(s&&s.ut){let e=t.children[0].el;for(;e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",s.uid),e=e.nextSibling;s.ut()}}const xt=Symbol.for("v-fgt"),yn=Symbol.for("v-txt"),Lt=Symbol.for("v-cmt"),Sn=Symbol.for("v-stc"),is=[];let Bt=null;function X(t=!1){is.push(Bt=t?null:[])}function Ac(){is.pop(),Bt=is[is.length-1]||null}let us=1;function Zo(t){us+=t}function va(t){return t.dynamicChildren=us>0?Bt||$e:null,Ac(),us>0&&Bt&&Bt.push(t),t}function Q(t,s,e,n,i,o){return va(G(t,s,e,n,i,o,!0))}function oe(t,s,e,n,i){return va(ft(t,s,e,n,i,!0))}function Fs(t){return t?t.__v_isVNode===!0:!1}function ye(t,s){return t.type===s.type&&t.key===s.key}const bn="__vInternal",wa=({key:t})=>t??null,Ss=({ref:t,ref_key:s,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?ht(t)||Ct(t)||W(t)?{i:wt,r:t,k:s,f:!!e}:t:null);function G(t,s=null,e=null,n=0,i=null,o=t===xt?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:s,key:s&&wa(s),ref:s&&Ss(s),scopeId:qr,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wt};return a?(eo(l,e),o&128&&t.normalize(l)):e&&(l.shapeFlag|=ht(e)?8:16),us>0&&!r&&Bt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Bt.push(l),l}const ft=$c;function $c(t,s=null,e=null,n=0,i=null,o=!1){if((!t||t===oa)&&(t=Lt),Fs(t)){const a=ce(t,s,!0);return e&&eo(a,e),us>0&&!o&&Bt&&(a.shapeFlag&6?Bt[Bt.indexOf(t)]=a:Bt.push(a)),a.patchFlag|=-2,a}if(Gc(t)&&(t=t.__vccOpts),s){s=Hc(s);let{class:a,style:l}=s;a&&!ht(a)&&(s.class=yt(a)),rt(l)&&(zr(l)&&!k(l)&&(l=dt({},l)),s.style=hn(l))}const r=ht(t)?1:Kl(t)?128:Rc(t)?64:rt(t)?4:W(t)?2:0;return G(t,s,e,n,i,r,o,!0)}function Hc(t){return t?zr(t)||bn in t?dt({},t):t:null}function ce(t,s,e=!1){const{props:n,ref:i,patchFlag:o,children:r}=t,a=s?ya(n||{},s):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&wa(a),ref:s&&s.ref?e&&i?k(i)?i.concat(Ss(s)):[i,Ss(s)]:Ss(s):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:s&&t.type!==xt?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ce(t.ssContent),ssFallback:t.ssFallback&&ce(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Bc(t=" ",s=0){return ft(yn,null,t,s)}function Dc(t="",s=!1){return s?(X(),oe(Lt,null,t)):ft(Lt,null,t)}function Vt(t){return t==null||typeof t=="boolean"?ft(Lt):k(t)?ft(xt,null,t.slice()):typeof t=="object"?ie(t):ft(yn,null,String(t))}function ie(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ce(t)}function eo(t,s){let e=0;const{shapeFlag:n}=t;if(s==null)s=null;else if(k(s))e=16;else if(typeof s=="object")if(n&65){const i=s.default;i&&(i._c&&(i._d=!1),eo(t,i()),i._c&&(i._d=!0));return}else{e=32;const i=s._;!i&&!(bn in s)?s._ctx=wt:i===3&&wt&&(wt.slots._===1?s._=1:(s._=2,t.patchFlag|=1024))}else W(s)?(s={default:s,_ctx:wt},e=32):(s=String(s),n&64?(e=16,s=[Bc(s)]):e=8);t.children=s,t.shapeFlag|=e}function ya(...t){const s={};for(let e=0;e<t.length;e++){const n=t[e];for(const i in n)if(i==="class")s.class!==n.class&&(s.class=yt([s.class,n.class]));else if(i==="style")s.style=hn([s.style,n.style]);else if(rn(i)){const o=s[i],r=n[i];r&&o!==r&&!(k(o)&&o.includes(r))&&(s[i]=o?[].concat(o,r):r)}else i!==""&&(s[i]=n[i])}return s}function zt(t,s,e,n=null){It(t,s,7,[e,n])}const Fc=ca();let kc=0;function zc(t,s,e){const n=t.type,i=(s?s.appContext:t.appContext)||Fc,o={uid:kc++,vnode:t,type:n,parent:s,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new nl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fa(n,i),emitsOptions:Zr(n,i),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:n.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=s?s.root:o,o.emit=Ul.bind(null,o),t.ce&&t.ce(o),o}let mt=null;const Nc=()=>mt||wt;let so,Re,qo="__VUE_INSTANCE_SETTERS__";(Re=Xn()[qo])||(Re=Xn()[qo]=[]),Re.push(t=>mt=t),so=t=>{Re.length>1?Re.forEach(s=>s(t)):Re[0](t)};const ke=t=>{so(t),t.scope.on()},xe=()=>{mt&&mt.scope.off(),so(null)};function ba(t){return t.vnode.shapeFlag&4}let fs=!1;function Wc(t,s=!1){fs=s;const{props:e,children:n}=t.vnode,i=ba(t);Cc(t,e,i,s),Mc(t,n);const o=i?Uc(t,s):void 0;return fs=!1,o}function Uc(t,s){const e=t.type;t.accessCache=Object.create(null),t.proxy=dn(new Proxy(t.ctx,dc));const{setup:n}=e;if(n){const i=t.setupContext=n.length>1?Vc(t):null;ke(t),Ne();const o=ae(n,t,0,[t.props,i]);if(We(),xe(),Mr(o)){if(o.then(xe,xe),s)return o.then(r=>{jo(t,r,s)}).catch(r=>{gn(r,t,0)});t.asyncDep=o}else jo(t,o,s)}else Ca(t,s)}function jo(t,s,e){W(s)?t.type.__ssrInlineRender?t.ssrRender=s:t.render=s:rt(s)&&(t.setupState=Yr(s)),Ca(t,e)}let Jo;function Ca(t,s,e){const n=t.type;if(!t.render){if(!s&&Jo&&!n.render){const i=n.template||Ji(t).template;if(i){const{isCustomElement:o,compilerOptions:r}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,c=dt(dt({isCustomElement:o,delimiters:a},r),l);n.render=Jo(i,c)}}t.render=n.render||Dt}ke(t),Ne(),gc(t),We(),xe()}function Yc(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(s,e){return Et(t,"get","$attrs"),s[e]}}))}function Vc(t){const s=e=>{t.exposed=e||{}};return{get attrs(){return Yc(t)},slots:t.slots,emit:t.emit,expose:s}}function Cn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Yr(dn(t.exposed)),{get(s,e){if(e in s)return s[e];if(e in es)return es[e](t)},has(s,e){return e in s||e in es}}))}function Xc(t,s=!0){return W(t)?t.displayName||t.name:t.name||s&&t.__name}function Gc(t){return W(t)&&"__vccOpts"in t}const Kc=(t,s)=>Bl(t,s,fs);function Zc(t,s,e){const n=arguments.length;return n===2?rt(s)&&!k(s)?Fs(s)?ft(t,null,[s]):ft(t,s):ft(t,null,s):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Fs(e)&&(e=[e]),ft(t,s,e))}const qc=Symbol.for("v-scx"),jc=()=>ss(qc),Jc="3.3.4",Qc="http://www.w3.org/2000/svg",be=typeof document<"u"?document:null,Qo=be&&be.createElement("template"),th={insert:(t,s,e)=>{s.insertBefore(t,e||null)},remove:t=>{const s=t.parentNode;s&&s.removeChild(t)},createElement:(t,s,e,n)=>{const i=s?be.createElementNS(Qc,t):be.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>be.createTextNode(t),createComment:t=>be.createComment(t),setText:(t,s)=>{t.nodeValue=s},setElementText:(t,s)=>{t.textContent=s},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>be.querySelector(t),setScopeId(t,s){t.setAttribute(s,"")},insertStaticContent(t,s,e,n,i,o){const r=e?e.previousSibling:s.lastChild;if(i&&(i===o||i.nextSibling))for(;s.insertBefore(i.cloneNode(!0),e),!(i===o||!(i=i.nextSibling)););else{Qo.innerHTML=n?`<svg>${t}</svg>`:t;const a=Qo.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}s.insertBefore(a,e)}return[r?r.nextSibling:s.firstChild,e?e.previousSibling:s.lastChild]}};function eh(t,s,e){const n=t._vtc;n&&(s=(s?[s,...n]:[...n]).join(" ")),s==null?t.removeAttribute("class"):e?t.setAttribute("class",s):t.className=s}function sh(t,s,e){const n=t.style,i=ht(e);if(e&&!i){if(s&&!ht(s))for(const o in s)e[o]==null&&li(n,o,"");for(const o in e)li(n,o,e[o])}else{const o=n.display;i?s!==e&&(n.cssText=e):s&&t.removeAttribute("style"),"_vod"in t&&(n.display=o)}}const tr=/\s*!important$/;function li(t,s,e){if(k(e))e.forEach(n=>li(t,s,n));else if(e==null&&(e=""),s.startsWith("--"))t.setProperty(s,e);else{const n=nh(t,s);tr.test(e)?t.setProperty(ze(n),e.replace(tr,""),"important"):t[n]=e}}const er=["Webkit","Moz","ms"],An={};function nh(t,s){const e=An[s];if(e)return e;let n=Gt(s);if(n!=="filter"&&n in t)return An[s]=n;n=cn(n);for(let i=0;i<er.length;i++){const o=er[i]+n;if(o in t)return An[s]=o}return s}const sr="http://www.w3.org/1999/xlink";function ih(t,s,e,n,i){if(n&&s.startsWith("xlink:"))e==null?t.removeAttributeNS(sr,s.slice(6,s.length)):t.setAttributeNS(sr,s,e);else{const o=el(s);e==null||o&&!Pr(e)?t.removeAttribute(s):t.setAttribute(s,o?"":e)}}function oh(t,s,e,n,i,o,r){if(s==="innerHTML"||s==="textContent"){n&&r(n,i,o),t[s]=e??"";return}const a=t.tagName;if(s==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=e;const c=a==="OPTION"?t.getAttribute("value"):t.value,h=e??"";c!==h&&(t.value=h),e==null&&t.removeAttribute(s);return}let l=!1;if(e===""||e==null){const c=typeof t[s];c==="boolean"?e=Pr(e):e==null&&c==="string"?(e="",l=!0):c==="number"&&(e=0,l=!0)}try{t[s]=e}catch{}l&&t.removeAttribute(s)}function rh(t,s,e,n){t.addEventListener(s,e,n)}function ah(t,s,e,n){t.removeEventListener(s,e,n)}function lh(t,s,e,n,i=null){const o=t._vei||(t._vei={}),r=o[s];if(n&&r)r.value=n;else{const[a,l]=ch(s);if(n){const c=o[s]=fh(n,i);rh(t,a,c,l)}else r&&(ah(t,a,r,l),o[s]=void 0)}}const nr=/(?:Once|Passive|Capture)$/;function ch(t){let s;if(nr.test(t)){s={};let n;for(;n=t.match(nr);)t=t.slice(0,t.length-n[0].length),s[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ze(t.slice(2)),s]}let $n=0;const hh=Promise.resolve(),uh=()=>$n||(hh.then(()=>$n=0),$n=Date.now());function fh(t,s){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;It(dh(n,e.value),s,5,[n])};return e.value=t,e.attached=uh(),e}function dh(t,s){if(k(s)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},s.map(n=>i=>!i._stopped&&n&&n(i))}else return s}const ir=/^on[a-z]/,gh=(t,s,e,n,i=!1,o,r,a,l)=>{s==="class"?eh(t,n,i):s==="style"?sh(t,e,n):rn(s)?Di(s)||lh(t,s,e,n,r):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):ph(t,s,n,i))?oh(t,s,n,o,r,a,l):(s==="true-value"?t._trueValue=n:s==="false-value"&&(t._falseValue=n),ih(t,s,n,i))};function ph(t,s,e,n){return n?!!(s==="innerHTML"||s==="textContent"||s in t&&ir.test(s)&&W(e)):s==="spellcheck"||s==="draggable"||s==="translate"||s==="form"||s==="list"&&t.tagName==="INPUT"||s==="type"&&t.tagName==="TEXTAREA"||ir.test(s)&&ht(e)?!1:s in t}const se="transition",Ke="animation",no=(t,{slots:s})=>Zc(tc,mh(t),s);no.displayName="Transition";const Ta={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};no.props=dt({},Qr,Ta);const pe=(t,s=[])=>{k(t)?t.forEach(e=>e(...s)):t&&t(...s)},or=t=>t?k(t)?t.some(s=>s.length>1):t.length>1:!1;function mh(t){const s={};for(const H in t)H in Ta||(s[H]=t[H]);if(t.css===!1)return s;const{name:e="v",type:n,duration:i,enterFromClass:o=`${e}-enter-from`,enterActiveClass:r=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=o,appearActiveClass:c=r,appearToClass:h=a,leaveFromClass:d=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:m=`${e}-leave-to`}=t,y=vh(i),w=y&&y[0],L=y&&y[1],{onBeforeEnter:R,onEnter:S,onEnterCancelled:z,onLeave:E,onLeaveCancelled:$,onBeforeAppear:j=R,onAppear:it=S,onAppearCancelled:B=z}=s,Y=(H,at,gt)=>{me(H,at?h:a),me(H,at?c:r),gt&&gt()},U=(H,at)=>{H._isLeaving=!1,me(H,d),me(H,m),me(H,f),at&&at()},tt=H=>(at,gt)=>{const Xe=H?it:S,pt=()=>Y(at,H,gt);pe(Xe,[at,pt]),rr(()=>{me(at,H?l:o),ne(at,H?h:a),or(Xe)||ar(at,n,w,pt)})};return dt(s,{onBeforeEnter(H){pe(R,[H]),ne(H,o),ne(H,r)},onBeforeAppear(H){pe(j,[H]),ne(H,l),ne(H,c)},onEnter:tt(!1),onAppear:tt(!0),onLeave(H,at){H._isLeaving=!0;const gt=()=>U(H,at);ne(H,d),bh(),ne(H,f),rr(()=>{H._isLeaving&&(me(H,d),ne(H,m),or(E)||ar(H,n,L,gt))}),pe(E,[H,gt])},onEnterCancelled(H){Y(H,!1),pe(z,[H])},onAppearCancelled(H){Y(H,!0),pe(B,[H])},onLeaveCancelled(H){U(H),pe($,[H])}})}function vh(t){if(t==null)return null;if(rt(t))return[Hn(t.enter),Hn(t.leave)];{const s=Hn(t);return[s,s]}}function Hn(t){return Za(t)}function ne(t,s){s.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(s)}function me(t,s){s.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:e}=t;e&&(e.delete(s),e.size||(t._vtc=void 0))}function rr(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wh=0;function ar(t,s,e,n){const i=t._endId=++wh,o=()=>{i===t._endId&&n()};if(e)return setTimeout(o,e);const{type:r,timeout:a,propCount:l}=yh(t,s);if(!r)return n();const c=r+"end";let h=0;const d=()=>{t.removeEventListener(c,f),o()},f=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(c,f)}function yh(t,s){const e=window.getComputedStyle(t),n=y=>(e[y]||"").split(", "),i=n(`${se}Delay`),o=n(`${se}Duration`),r=lr(i,o),a=n(`${Ke}Delay`),l=n(`${Ke}Duration`),c=lr(a,l);let h=null,d=0,f=0;s===se?r>0&&(h=se,d=r,f=o.length):s===Ke?c>0&&(h=Ke,d=c,f=l.length):(d=Math.max(r,c),h=d>0?r>c?se:Ke:null,f=h?h===se?o.length:l.length:0);const m=h===se&&/\b(transform|all)(,|$)/.test(n(`${se}Property`).toString());return{type:h,timeout:d,propCount:f,hasTransform:m}}function lr(t,s){for(;t.length<s.length;)t=t.concat(t);return Math.max(...s.map((e,n)=>cr(e)+cr(t[n])))}function cr(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function bh(){return document.body.offsetHeight}const Ch={beforeMount(t,{value:s},{transition:e}){t._vod=t.style.display==="none"?"":t.style.display,e&&s?e.beforeEnter(t):Ze(t,s)},mounted(t,{value:s},{transition:e}){e&&s&&e.enter(t)},updated(t,{value:s,oldValue:e},{transition:n}){!s!=!e&&(n?s?(n.beforeEnter(t),Ze(t,!0),n.enter(t)):n.leave(t,()=>{Ze(t,!1)}):Ze(t,s))},beforeUnmount(t,{value:s}){Ze(t,s)}};function Ze(t,s){t.style.display=s?t._vod:"none"}const Th=dt({patchProp:gh},th);let hr;function xh(){return hr||(hr=Ec(Th))}const Mh=(...t)=>{const s=xh().createApp(...t),{mount:e}=s;return s.mount=n=>{const i=_h(n);if(!i)return;const o=s._component;!W(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const r=e(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),r},s};function _h(t){return ht(t)?document.querySelector(t):t}const Eh="st",Ph="is-",ve=(t,s,e,n,i)=>{let o=`${t}-${s}`;return e&&(o+=`-${e}`),n&&(o+=`__${n}`),i&&(o+=`--${i}`),o},Ue=t=>{const s=Eh;return{namespace:s,b:(h="")=>ve(s,t,h,"",""),e:h=>h?ve(s,t,"",h,""):"",m:h=>h?ve(s,t,"","",h):"",be:(h,d)=>h&&d?ve(s,t,h,d,""):"",em:(h,d)=>h&&d?ve(s,t,"",h,d):"",bm:(h,d)=>h&&d?ve(s,t,h,"",d):"",bem:(h,d,f)=>h&&d&&f?ve(s,t,h,d,f):"",is:(h,...d)=>{const f=d.length>=1?d[0]:!0;return h&&f?`${Ph}${h}`:""}}};class nt{constructor(s=1,e=0,n=0,i=1,o=0,r=0){p(this,"a");p(this,"b");p(this,"c");p(this,"d");p(this,"tx");p(this,"ty");this.a=s,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=r}set(s,e,n,i,o,r){return this.a=s,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=r,this}getArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}apply(s){const e=s.x,n=s.y;return{x:this.a*e+this.c*n+this.tx,y:this.b*e+this.d*n+this.ty}}applyInverse(s){const e=this.a,n=this.b,i=this.c,o=this.d,r=this.tx,a=this.ty,l=1/(e*o+i*-n),c=s.x,h=s.y;return{x:o*l*c+-i*l*h+(a*i-r*o)*l,y:e*l*h+-n*l*c+(-a*e+r*n)*l}}translate(s,e){return this.tx+=s,this.ty+=e,this}scale(s,e){return this.a*=s,this.d*=e,this.c*=s,this.b*=e,this.tx*=s,this.ty*=e,this}rotate(s){const e=Math.cos(s),n=Math.sin(s),i=this.a,o=this.c,r=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=o*e-this.d*n,this.d=o*n+this.d*e,this.tx=r*e-this.ty*n,this.ty=r*n+this.ty*e,this}append(s){const e=this.a,n=this.b,i=this.c,o=this.d;return this.a=s.a*e+s.b*i,this.b=s.a*n+s.b*o,this.c=s.c*e+s.d*i,this.d=s.c*n+s.d*o,this.tx=s.tx*e+s.ty*i+this.tx,this.ty=s.tx*n+s.ty*o+this.ty,this}appendFrom(s,e){const n=s.a,i=s.b,o=s.c,r=s.d,a=s.tx,l=s.ty,c=e.a,h=e.b,d=e.c,f=e.d;return this.a=n*c+i*d,this.b=n*h+i*f,this.c=o*c+r*d,this.d=o*h+r*f,this.tx=a*c+l*d+e.tx,this.ty=a*h+l*f+e.ty,this}prepend(s){const e=this.tx;if(s.a!==1||s.b!==0||s.c!==0||s.d!==1){const n=this.a,i=this.c;this.a=n*s.a+this.b*s.c,this.b=n*s.b+this.b*s.d,this.c=i*s.a+this.d*s.c,this.d=i*s.b+this.d*s.d}return this.tx=e*s.a+this.ty*s.c+s.tx,this.ty=e*s.b+this.ty*s.d+s.ty,this}invert(){const s=this.a,e=this.b,n=this.c,i=this.d,o=this.tx,r=s*i-e*n;return this.a=i/r,this.b=-e/r,this.c=-n/r,this.d=s/r,this.tx=(n*this.ty-i*o)/r,this.ty=-(s*this.ty-e*o)/r,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const s=new nt;return s.a=this.a,s.b=this.b,s.c=this.c,s.d=this.d,s.tx=this.tx,s.ty=this.ty,s}copyTo(s){return s.a=this.a,s.b=this.b,s.c=this.c,s.d=this.d,s.tx=this.tx,s.ty=this.ty,s}copyFrom(s){return this.a=s.a,this.b=s.b,this.c=s.c,this.d=s.d,this.tx=s.tx,this.ty=s.ty,this}equals(s){return s.a===this.a&&s.b===this.b&&s.c===this.c&&s.d===this.d&&s.tx===this.tx&&s.ty===this.ty}toString(){return`[Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}}const ur=(t,s)=>{const e=t[0],n=t[1],i=t[2],o=t[3];return[s[0]*e+s[1]*i,s[0]*n+s[1]*o,s[2]*e+s[3]*i,s[2]*n+s[3]*o,s[4]*e+s[5]*i+t[4],s[4]*n+s[5]*o+t[5]]},Oh=t=>{const s=t[0],e=t[1],n=t[2],i=t[3],o=t[4],r=s*i-e*n;return[i/r,-e/r,-n/r,s/r,(n*t[5]-i*o)/r,-(s*t[5]-e*o)/r]},Rh=(t,s)=>({x:s.x*t[0]+s.y*t[2]+t[4],y:s.x*t[1]+s.y*t[3]+t[5]}),ci=(t,s)=>Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2)),he=(t,s,e=0)=>(s=Ee(s,e),t.x>=s.x&&t.y>=s.y&&t.x<=s.width+s.x&&t.y<=s.height+s.y),Ih=(t,s,e,n=0)=>{const i=s.x-n,o=s.y-n,r=s.width+n*2,a=s.height+n*2;return t.x>=i&&t.y>=o&&t.x<=i+r&&t.y<=o+a?t.x<=i+e&&t.y<=o+e?(t.x-i-e)**2+(t.y-o-e)**2<=e[0]**2:t.x>=i+r-e&&t.y<=o+e?(t.x-i-r+e)**2+(t.y-o-e)**2<=e**2:t.x>=i+r-e&&t.y>=o+a-e?(t.x-i-r+e)**2+(t.y-o-a+e)**2<=e**2:t.x<=i+e&&t.y>=o+a-e?(t.x-i-e)**2+(t.y-o-a+e)**2<=e**2:!0:!1},fr=(...t)=>{if(t.length===0)throw new Error("the count of rect can not be 0");let s=1/0,e=1/0,n=-1/0,i=-1/0;for(const o of t)s=Math.min(s,o.x),e=Math.min(e,o.y),n=Math.max(n,o.x+o.width),i=Math.max(i,o.y+o.height);return{x:s,y:e,width:n-s,height:i-e}},hi=(t,s)=>t.x<=s.x+s.width&&t.x+t.width>=s.x&&t.y<=s.y+s.height&&t.y+t.height>=s.y,Ee=(t,s)=>({x:t.x-s,y:t.y-s,width:t.width+s*2,height:t.height+s*2}),xa=(t,s,...e)=>{e=[t,s,...e];const n=Math.min(...e.map(a=>a.x)),i=Math.min(...e.map(a=>a.y)),o=Math.max(...e.map(a=>a.x)),r=Math.max(...e.map(a=>a.y));return{x:n,y:i,width:Math.abs(o-n),height:Math.abs(r-i)}};var Nt=(t=>(t.n="n",t.s="s",t.e="e",t.w="w",t.nw="nw",t.ne="ne",t.sw="sw",t.se="se",t))(Nt||{});const Lh={n:{getLocalOrigin:(t,s)=>({x:t/2,y:s}),getNewSize:(t,s,e,n=0)=>({width:e.width,height:s.y-t.y-n})},e:{getLocalOrigin:(t,s)=>({x:0,y:s/2}),getNewSize:(t,s,e,n=0)=>({width:t.x-s.x-n,height:e.height})},s:{getLocalOrigin:t=>({x:t/2,y:0}),getNewSize:(t,s,e,n=0)=>({width:e.width,height:t.y-s.y-n})},w:{getLocalOrigin:(t,s)=>({x:t,y:s/2}),getNewSize:(t,s,e,n=0)=>({width:s.x-t.x-n,height:e.height})},nw:{getLocalOrigin:(t,s)=>({x:t,y:s}),getNewSize:(t,s,e,n=0)=>({width:s.x-t.x-n,height:s.y-t.y-n})},ne:{getLocalOrigin:(t,s)=>({x:0,y:s}),getNewSize:(t,s,e,n=0)=>({width:t.x-s.x-n,height:s.y-t.y-n})},sw:{getLocalOrigin:t=>({x:t,y:0}),getNewSize:(t,s,e,n=0)=>({width:s.x-t.x-n,height:t.y-s.y-n})},se:{getLocalOrigin:()=>({x:0,y:0}),getNewSize:(t,s,e,n=0)=>({width:t.x-s.x-n,height:t.y-s.y-n})}},dr=(t,s,e,n=0)=>{const i=Lh[t],o=new nt(...e.transform),r={width:0,height:0,transform:o.clone()},a=o.applyInverse(s),l=i.getLocalOrigin(e.width,e.height),c=i.getNewSize(a,l,e,n),h=new nt;h.scale(c.width/e.width,c.height/e.height),r.width=e.width,r.height=e.height,r.transform=r.transform.append(h);const d=r.transform.apply(i.getLocalOrigin(r.width,r.height)),f=o.apply(l),m={x:f.x-d.x,y:f.y-d.y};r.transform.prepend(new nt().translate(m.x,m.y));const y=Math.sign(c.width)||1,w=Math.sign(c.height)||1,L=new nt().translate(-r.width/2,-r.height/2).scale(y,w).translate(r.width/2,r.height/2);return r.transform.append(L),{width:r.width,height:r.height,transform:r.transform.getArray()}},Sh=t=>{const s=new nt(t.transform[0],t.transform[1],t.transform[2],t.transform[3],0,0),e=s.apply({x:t.width,y:0}),n=s.apply({x:0,y:t.height}),i={x:0,y:0};return{width:ci(e,i),height:ci(n,i)}},Ah=t=>{const s=Sh(t),e=s.width?t.width/s.width:1,n=s.height?t.height/s.height:1,i=new nt().scale(e,n),o=new nt(...t.transform).append(i);return{width:s.width,height:s.height,transform:o.getArray()}},$h=(t,s)=>{const{x:e,y:n,width:i,height:o}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e+i,y:n+o},{x:e,y:n+o}]},ui=t=>({x:t.minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}),Ma=t=>{let s=1/0,e=1/0,n=-1/0,i=-1/0;for(const o of t)s=Math.min(s,o.x),e=Math.min(e,o.y),n=Math.max(n,o.x),i=Math.max(i,o.y);return{minX:s,minY:e,maxX:n,maxY:i}},_a=(t,s)=>{let e=0,n=0,i=t.width,o=t.height;const r=t.transform,a=$h({x:e,y:n,width:i,height:o}).map(l=>Rh(r,l));return Ma(a)},Ea=t=>{if(t.length===0)throw new Error("the count of boxes can not be 0");let s=1/0,e=1/0,n=-1/0,i=-1/0;for(const o of t)s=Math.min(s,o.minX),e=Math.min(e,o.minY),n=Math.max(n,o.maxX),i=Math.max(i,o.maxY);return{minX:s,minY:e,maxX:n,maxY:i}},fi=(t,s)=>{const e=t.x*s.x+t.y*s.y,n=Math.sqrt(t.x*t.x+t.y*t.y)*Math.sqrt(s.x*s.x+s.y*s.y);let i=e/n;i>1?i=1:i<-1&&(i=-1);let o=Math.acos(i);return t.x*s.y-t.y*s.x<0&&(o=Math.PI*2-o),o},Hh=(t,s={x:0,y:-1})=>{const n=new nt(t[0],t[1],t[2],t[3],0,0).apply(s);return fi(s,n)};var P=(t=>(t.TOP="top",t.LEFT="left",t.RIGHT="right",t.BOTTOM="bottom",t))(P||{});const Tn=(t,s)=>t.map((e,n)=>e-s[n]),Le=(t,s)=>t.map((e,n)=>e+s[n]),Bh=(t,s)=>Math.hypot(...Tn(s,t).map(Math.abs)),gr=(t,s)=>{const e=Tn(s,t).map(Math.abs);return e[0]+e[1]},Pa=t=>t.join(":"),pr=t=>JSON.parse(JSON.stringify(t)),ks=(t,s)=>{const e=t.map(n=>[...n]);return e[0]=Le(e[0],[-s,-s]),e[1]=Le(e[1],[s,-s]),e[2]=Le(e[2],[s,s]),e[3]=Le(e[3],[-s,s]),e},di=(t,s)=>t[0]>=s[0][0]&&t[0]<=s[1][0]&&t[1]>=s[0][1]&&t[1]<=s[2][1],Dh=t=>{const s=new Map,e=[];return t.forEach(n=>{const i=Pa(n);s.has(i)||(e.push(n),s.set(i,!0))}),e},Fh=t=>{const s=[];return t.forEach((e,n)=>{t.forEach((i,o)=>{n!==o&&(s.push([e[0],i[1]]),s.push([i[0],e[1]]))})}),s},kh=(t,s,e)=>{const n=Tn(s,t);let i=!1;switch(e){case P.TOP:i=n[0]<0;break;case P.LEFT:i=n[1]<0;break;case P.RIGHT:i=n[1]>0;break;default:i=n[0]>0}return!i},Bn={[P.LEFT]:[0,-1],[P.RIGHT]:[0,1],[P.TOP]:[-1,0],[P.BOTTOM]:[1,0]},zh={[P.LEFT]:P.RIGHT,[P.TOP]:P.BOTTOM,[P.BOTTOM]:P.TOP,[P.RIGHT]:P.LEFT},gi=t=>zh[t],Nh=(t,s)=>{const e=Object.keys(Bn);if(s){const n=e.filter(i=>i!==gi(t));return n.sort(i=>i===t?-1:1),n.map(i=>Bn[i])}return e.sort((n,i)=>n===t?-1:1),e.map(n=>Bn[n])},pi=t=>t===P.LEFT||t===P.RIGHT,mi=t=>{const s=[[P.LEFT,P.RIGHT],[P.TOP,P.BOTTOM]],e=[[...t].reverse(),t];return s.some(n=>e.some(i=>i[0]===n[0]&&i[1]===n[1]))},Wh=(t,s,e,n,i)=>{if(!mi([t.direction,s.direction]))return!1;const o=n.getGridPoint(e),r=n.getGridPoint(t.endpoint),a=n.getGridPoint(s.endpoint),l=[r[0],a[0]],c=[r[1],a[1]];[l,c].forEach(y=>{y.sort((w,L)=>w-L)});const h=pi(t.direction),d=h?o[1]:o[0],f=h?c:l,m=y=>h?[o[0],y]:[y,o[1]];for(let y=d,w=d;y>=f[0]&&w<=f[1];y--,w++){const L=m(y),R=m(y+1),S=m(w),z=m(w-1);if(!n.isValid(L)||!n.isValid(R)||!n.isValid(S)||!n.isValid(z)||!i(n.getRealPoint(m(y)),n.getRealPoint(m(y+1)))||!i(n.getRealPoint(m(w)),n.getRealPoint(m(w-1))))return!1}return!0},Uh=(t,s)=>[t,s].map(e=>({...e,endpoint:e.origin.slice()})),Yh=(t,s,e,n,i,o)=>n?s&&n?e.some(r=>s[r][o]>n[i[0]][o]&&s[r][o]<n[i[1]][o]):t[o]>n[i[0]][o]&&t[o]<n[i[1]][o]:!0,Vh=(t,s,e,n)=>{if(!t.box&&!s.box)return Uh(t,s);const i=[t,s].map(l=>Object.assign({...pr(l),endpoint:pr(l.origin)},l.box?{boundaryBox:ks(l.box,e),originBoundaryBox:ks(l.box,e)}:{})),o={[P.TOP]:-1,[P.LEFT]:-1,[P.RIGHT]:1,[P.BOTTOM]:1},r={[P.TOP]:[[0,1],[3,2]],[P.LEFT]:[[0,3],[1,2]],[P.RIGHT]:[[1,2],[0,3]],[P.BOTTOM]:[[3,2],[0,1]]};if(n)return i.forEach(({direction:l,endpoint:c,origin:h})=>{const d=o[l],f=pi(l)?0:1;c[f]=h[f]+e*d}),i;const a=Object.keys(o);return i.forEach(({box:l,direction:c,endpoint:h,origin:d,boundaryBox:f,originBoundaryBox:m},y)=>{a.forEach(w=>{const L=r[w],R=i[(y+1)%2],[S,z]=L,E=o[w],$=pi(w)?0:1,j=$===0?1:0,it=Yh(d,m,S,R.originBoundaryBox,z,j),B=l?l[S[0]]:d,Y=R.box?R.box[z[0]][$]-B[$]:R.origin[$]-B[$],U=Y>0?1:-1,tt=Math.abs(Y)/2,H=U===E&&Math.abs(Y)<e*2;it&&H?(l&&f&&S.forEach(gt=>{f[gt][$]=l[gt][$]+E*tt}),R.box&&z.forEach(gt=>{R.boundaryBox[gt][$]=R.box[gt][$]+E*tt*-1}),w===c&&(h[$]=d[$]+E*tt)):w===c&&(h[$]=d[$]+e*E)})}),i};var Me;let Xh=(Me=class{constructor(s,e){p(this,"grid");p(this,"points");p(this,"pointMap");p(this,"costs",[]);p(this,"xAxis",[]);p(this,"yAxis",[]);p(this,"params");this.points=s,this.grid=[],this.pointMap=[],this.params=e,this.setup()}setup(){const{getCost:s}=this.params||{},e=this.points,n=new Set,i=new Set;e.forEach(f=>{n.add(f[0]),i.add(f[1])});const o=i.size,r=n.size,a=Array.from(n.values()),l=Array.from(i.values());a.sort((f,m)=>f-m),l.sort((f,m)=>f-m);const c=Array.from({length:o},()=>new Array(r).fill(0)),h=Array.from({length:o},()=>new Array(r).fill(Me.basicCost)),d=Array.from({length:o},()=>new Array(r));for(let f=0;f<o;f++)for(let m=0;m<r;m++)d[f][m]=[a[m],l[f]],c[f][m]=!0,s&&(h[f][m]=s(d[f][m],Me.basicCost));this.grid=c,this.pointMap=d,this.yAxis=l,this.xAxis=a,this.costs=h}getGridPoint(s){return[this.yAxis.indexOf(s[1]),this.xAxis.indexOf(s[0])]}getRealPoint(s){return this.pointMap[s[0]][s[1]]}getWalkable(s,e){const{getWalkable:n}=this.params||{};return this.isValid(e)&&(n?n(this.getRealPoint(s),this.getRealPoint(e)):!0)}getCost(s){return this.costs[s[0]][s[1]]}isValid(s){const e=this.grid.length,n=this.grid[0].length;return s[0]>=0&&s[0]<e&&s[1]>=0&&s[1]<n}},p(Me,"basicCost",1),Me);const Gh=t=>{if(t.length<3)return t;var s=[],e=t[0][0],n=t[0][1],i=t[1][0],o=t[1][1],r=i-e,a=o-n,l,c,h,d,f,m;for(f=Math.sqrt(r*r+a*a),r/=f,a/=f,s.push([e,n]),m=2;m<t.length;m++)l=i,c=o,h=r,d=a,i=t[m][0],o=t[m][1],r=i-l,a=o-c,f=Math.sqrt(r*r+a*a),r/=f,a/=f,(r!==h||a!==d)&&s.push([l,c]);return s.push([i,o]),s};function Ps(t,s,e,n){var i=(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0]),o=(s[0]-t[0])*(t[1]-e[1])-(s[1]-t[1])*(t[0]-e[0]),r=(n[1]-e[1])*(s[0]-t[0])-(n[0]-e[0])*(s[1]-t[1]);if(r!==0){var a=i/r,l=o/r;if(0<=a&&a<=1&&0<=l&&l<=1)return!0}return!1}const zs=(t,s,e)=>{const[n,i,o,r]=e;return!!(Ps(t,s,n,i)||Ps(t,s,i,o)||Ps(t,s,o,r)||Ps(t,s,r,n))},Kh=(t,s)=>t.some((n,i)=>zs(t[i],t[(i+1)%4],s))||s.some((n,i)=>zs(s[i],s[(i+1)%4],t)),Zh=(t,s,e)=>{const i=t[0]*s[1]-t[1]*s[0]+s[0]*e[1]-s[1]*e[0]+e[0]*t[1]-e[1]*t[0],o=Bh(t,s);return Math.abs(i/o)<=0},mr=t=>{if(t.length<3)return 0;let s=0;for(let e=1;e<t.length-1;e++)Zh(t[e-1],t[e+1],t[e])||s++;return s},qh=(t,s)=>Le(t,s).map(e=>Math.round(e/2));class jh{}class Jh{constructor(){p(this,"heap");this.heap=[null]}peek(){return this.heap[1]}remove(){this.swap(1,this.heap.length-1),this.heap.pop(),this.sink(1)}add(s){this.heap.push(s),this.swim()}clear(){this.heap=[null]}sink(s){const e=this.heap.length-1;let n=0;for(;s*2<=e&&(n=s*2,n+1<=e&&this.heap[n].compare(this.heap[n+1])>0&&n++,this.heap[s].compare(this.heap[n])>0);)this.swap(s,n),s=n}swim(){let s=this.heap.length-1,e=0;for(;s>1&&(e=s>>1,this.heap[s].compare(this.heap[e])<0);)this.swap(s,e),s=e}swap(s,e){const n=this.heap[s];this.heap[s]=this.heap[e],this.heap[e]=n}}class Dn extends jh{constructor(e,n=0,i=null){super();p(this,"G");p(this,"H");p(this,"parent");p(this,"xy");p(this,"key");p(this,"F");this.G=n,this.H=0,this.parent=i,this.xy=e,this.key=Pa(e),this.F=n}setParent(e){this.parent=e}setG(e){this.G=e,this.F=this.H+this.G}setH(e){this.H=e,this.F=this.H+this.G}compare(e){return this.F-e.F}}const qe=new Jh,Fn=new Map,Ie=new Map,vr=(t,s)=>{const e=Tn(s,t);return e[0]===0?e[1]>0?P.BOTTOM:P.TOP:e[0]>0?P.RIGHT:P.LEFT};function wr(t,s,e,n,i,o,r){const a=t.getGridPoint(s),l=t.getGridPoint(e),c=new Dn(a),h=new Dn(l),d=[];let f=!0,m=0;for(qe.add(c),Ie.set(c.key,c);Ie.size;){const y=qe.peek(),w=y.xy;if(qe.remove(),Ie.delete(y.key),y.key===h.key){if(y.parent&&!kh(y.parent.xy,w,i))continue;let S=y;for(;S;)d.unshift(t.getRealPoint(S.xy)),S=S.parent;m=y.G;break}Fn.set(y.key,y);const L=Nh(n,f),R=r!==void 0&&f?L.slice(r,r+1):L;f=!1,R.forEach(([S,z])=>{const E=Le(w,[S,z]),$=new Dn(E);if(!Fn.has($.key)&&t.getWalkable(w,E)){const j=Ie.get($.key),it=vr(w,E),B=y.parent?vr(y.parent.xy,w):null,Y=B!==null&&B!==it,U=y.G+t.getCost(E)+(Y?.02:0),tt=o(E,t);$.setG(U),$.setH(tt),j?$.G<j.G&&(j.setG(U),j.setParent(y)):($.setParent(y),qe.add($),Ie.set($.key,$))}})}return qe.clear(),Ie.clear(),Fn.clear(),{path:Gh(d),grid:t,G:m}}const Qh=(t,{startInfo:s,endInfo:e,waypoint:n,isCovered:i,checkWaypointWalkable:o})=>{const r=n&&Wh(s,e,n,t,o),a=(f,m)=>{const y=gr(f,m.getGridPoint(e.endpoint));return r?y+gr(f,m.getGridPoint(n)):y};if(i){const f=wr(t,s.endpoint,e.endpoint,s.direction,e.direction,a);return f.path.push(e.origin),f.path.unshift(s.origin),f}const l=[0,1,2,4].map(f=>wr(t,s.endpoint,e.endpoint,s.direction,e.direction,a,f)).filter(f=>f.path.length);let c=null,h=1/0,d=1/0;return l.forEach(f=>{const m=[...f.path];m.push(e.origin),m.unshift(s.origin);const y=mr(f.path),w=mr(m);(y<h||y===h&&w<d||y===h&&w===d&&f.G<c.G)&&(h=y,d=w,c=f)}),c||(c={grid:t,path:[],G:1/0},console.warn("Path not found")),c.path.push(e.origin),c.path.unshift(s.origin),c},tu=(t,s,e)=>{const n=t.box&&s.box?Kh(t.box,s.box):!1,o=[[t.origin,s.box],[s.origin,t.box]].filter(f=>f[1]).every(([f,m])=>di(f,m)),[r,a]=Vh(t,s,e,o),l=qh(r.endpoint,a.endpoint),c=[[r.endpoint[0],l[1]],[a.endpoint[0],l[1]],[l[0],r.endpoint[1]],[l[0],a.endpoint[1]],l],h=l,d=[r.endpoint,a.endpoint,...c];return o||d.push(...r.boundaryBox??[],...a.boundaryBox??[]),{isIntersect:n,isCovered:o,startInfo:r,endInfo:a,allPoints:Dh(Fh(d)),waypoint:h}},eu=(t,s,e)=>{const{isCovered:n,isIntersect:i,startInfo:o,endInfo:r,allPoints:a,waypoint:l}=tu(t,s,e),c=[o.boundaryBox&&ks(o.boundaryBox,-1),r.boundaryBox&&ks(r.boundaryBox,-1)].filter(Boolean),h=[o.box,r.box].filter(Boolean),d=i?!n&&mi([o.direction,r.direction])?2:0:5,f=c.length===2?!i:!n,m=new Xh(a,{getCost(w,L){const R=[0,1].reduce((S,z)=>h[z]&&di(w,h[z])?S+2:c[z]&&di(w,c[z])?S+1:S,0);return L+R*d},getWalkable(w,L){return f?c.every(R=>!zs(w,L,R)):!0}}),y=Qh(m,{startInfo:o,endInfo:r,isCovered:n,waypoint:mi([o.direction,r.direction])?l:void 0,checkWaypointWalkable:(w,L)=>n||!L?!0:c.every(R=>!zs(w,L,R))});return{path:y,points:y.grid.points,boxs:[{box:o.boundaryBox},{box:r.boundaryBox}]}},yr=t=>[t.x,t.y],br=t=>{const{x:s,y:e,width:n,height:i}=t;return[[s,e],[s+n,e],[s+n,e+i],[s,e+i]]},Cr=t=>({x:t[0],y:t[1]}),vi=t=>{const s=Math.atan2(Math.abs(t[1]),Math.abs(t[0]))/Math.PI*180;let e=s;const n=45;t[0]<0?e=t[1]>=0?180-s:180+s:e=t[1]>=0?s:360-s;let i;return e<=n||e>360-n?i=P.LEFT:e>n&&e<=180-n?i=P.TOP:e>180-n&&e<=180+n?i=P.RIGHT:i=P.BOTTOM,i},su=(t,s,e)=>{const n=eu({box:t.rect?br(t.rect):void 0,origin:yr(t.origin),direction:t.direction},{box:s.rect?br(s.rect):void 0,origin:yr(s.origin),direction:s.direction},e);return{controlPoints:n.path.path.map(Cr),mapPoints:n.points.map(Cr)}};function nu({x:t,y:s},e,n,i=0){return e+=i,n+=i,e===n?t*t+s*s<=e*e:t*t/(e*e)+s*s/(n*n)<=1}function iu(t,[s,e]){const n={x:s.x-t.x,y:s.y-t.y};e.x-t.x,e.y-t.y;const i={x:e.x-s.x,y:e.y-s.y},o=n.x*i.y-n.y*i.x;if(Math.abs(o)>Number.EPSILON)return!1;const r=n.x*i.x+n.y*i.y;if(r<0)return!1;const a=i.x*i.x+i.y*i.y;return!(r>a)}function ou(t,[s,e]){let n=((t.x-s.x)*(e.x-s.x)+(t.y-s.y)*(e.y-s.y))/((e.x-s.x)**2+(e.y-s.y)**2);return n=Math.max(0,Math.min(1,n)),{x:s.x+n*(e.x-s.x),y:s.y+n*(e.y-s.y)}}function ru(t){if(t.length<2)return[];const s=[];for(let e=0;e<t.length-1;e++)s.push([t[e],t[e+1]]);return s}function au(t,[s,e],n){if(n===0)return iu(t,[s,e]);const i=ou(t,[s,e]);return ci(t,i)<=n/2}function lu(t,s,e){return s.some(n=>au(t,n,e))}function cu({x:t,y:s},e,n,i=0){e+=i,n+=i;const o=Math.abs(t*n)+Math.abs(s*e),r=e*n*.5;return o<=r}let Kt=class{constructor(){p(this,"eventMap",new Map);p(this,"eventMapCache",new Map)}on(s,e){return this.eventMap.has(s)||this.eventMap.set(s,[]),this.eventMap.get(s).push(e),this}emit(s,...e){const n=this.eventMap.get(s);return!n||n.length===0?!1:(n.forEach(i=>{i(...e)}),!0)}off(s,e){if(this.eventMap.has(s)){const n=this.eventMap.get(s).filter(i=>i!==e);n.length?this.eventMap.set(s,n):this.eventMap.delete(s)}return this}clear(){this.eventMapCache.clear();const s=this.eventMap.entries();for(const[e,n]of s)this.eventMapCache.set(e,n);this.eventMap.clear()}reset(){this.eventMap.clear();const s=this.eventMapCache.entries();for(const[e,n]of s)this.eventMap.set(e,n)}};function hu(...t){console.warn(...t)}var vt=[];for(var kn=0;kn<256;++kn)vt.push((kn+256).toString(16).slice(1));function uu(t,s=0){return(vt[t[s+0]]+vt[t[s+1]]+vt[t[s+2]]+vt[t[s+3]]+"-"+vt[t[s+4]]+vt[t[s+5]]+"-"+vt[t[s+6]]+vt[t[s+7]]+"-"+vt[t[s+8]]+vt[t[s+9]]+"-"+vt[t[s+10]]+vt[t[s+11]]+vt[t[s+12]]+vt[t[s+13]]+vt[t[s+14]]+vt[t[s+15]]).toLowerCase()}var Os,fu=new Uint8Array(16);function du(){if(!Os&&(Os=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Os))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Os(fu)}var gu=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tr={randomUUID:gu};function pu(t,s,e){if(Tr.randomUUID&&!s&&!t)return Tr.randomUUID();t=t||{};var n=t.random||(t.rng||du)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,uu(n)}function Ye(){return pu()}function Qe(){return window.devicePixelRatio||1}function zn(t,s,e){const n=Qe();t.width=s*n,t.height=e*n,t.style.width=`${s}px`,t.style.height=`${e}px`}function Nn(t){t.setLineDash([]),t.lineDashOffset=0}function Oa(t,s){const e=t.indexOf(s);e>-1&&t.splice(e,1)}const xn=(t,s)=>{let e=!1,n=s.pageX,i=s.pageY;const o=a=>{var h,d;const l=a.pageX-n,c=a.pageY-i;e||(e=!0,(h=t.onDragStart)==null||h.call(t,a)),(d=t.onDragMove)==null||d.call(t,a,[l,c])},r=a=>{var l;e&&((l=t.onDragEnd)==null||l.call(t,a)),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r),window.removeEventListener("mouseleave",r)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",r),window.addEventListener("mouseleave",r)};class mu{constructor(){p(this,"started",!1);p(this,"animations",[]);p(this,"tick",()=>{this.animations=this.animations.filter(s=>s.status==="running"),this.animations.length&&(this.animations.forEach(s=>s.run()),requestAnimationFrame(this.tick))})}add(s){this.animations.includes(s)||this.animations.push(s)}start(){this.started||requestAnimationFrame(this.tick)}}class vu{constructor(s,e){p(this,"startValue");p(this,"endValue");p(this,"duration");p(this,"startTime",Date.now());p(this,"status","stopped");this.manager=s,this.options=e,this.startValue=e.startValue,this.endValue=e.endValue,this.duration=e.duration}start(){this.startTime=Date.now(),this.status="running",this.manager.add(this),this.manager.start()}stop(){this.status="stopped"}run(){var i,o;const s=this.endValue-this.startValue;let e=Date.now()-this.startTime;e>this.duration&&(e=this.duration,this.options.loop?this.startTime=Date.now():this.status="stopped");const n=this.startValue+s*e/this.duration;this.options.onUpdate(n),e===this.duration&&((o=(i=this.options).onEnd)==null||o.call(i))}}let Wn=null;function Ra(t){return Wn||(Wn=new mu),new vu(Wn,t)}function io(t){if(t===null||typeof t!="object")return t;const s=Array.isArray(t)?[]:{};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=io(t[e]));return s}class wu extends Kt{constructor(e){super();p(this,"modelList",[]);p(this,"modelMap",new Map);this.name=e}addModel(e){this.modelMap.has(e.id)||(this.modelList.push(e),this.modelMap.set(e.id,e),this.emit("addModel",e))}removeModel(e){this.modelMap.has(e.id)&&(this.modelList=this.modelList.filter(n=>n.id!==e.id),this.modelMap.delete(e.id),this.emit("removeModel",e),e.dispose())}dispose(){this.clear()}}var M=(t=>(t.rectChange="rectChange",t.change="change",t.mouseIn="mouseIn",t.mouseOut="mouseOut",t.mouseDown="mouseDown",t.mouseUp="mouseUp",t.REPAINT="repaint",t))(M||{}),ds=(t=>(t.addModels="add-models",t.removeModels="remove-models",t.modelsChange="change",t))(ds||{});class yu extends Kt{constructor(){super();p(this,"modelList",[]);p(this,"modelMap",new Map);p(this,"layerList",[]);p(this,"layerMap",new Map);const e=new wu("default");this.addLayer(e)}addLayer(e){if(e.modelList.length>0){hu("!");return}this.layerMap.has(e.name)||(this.layerList.push(e),this.layerMap.set(e.name,e))}removeLayer(e){const n=this.getLayer(e);n&&n.name!=="default"&&(this.layerList=this.layerList.filter(i=>i.name!==e),this.layerMap.delete(e),n.modelList.forEach(i=>{this.modelList=this.modelList.filter(o=>o.id!==i.id),this.modelMap.delete(i.id)}),this.emit("remove-models",n.modelList),this.emit("change",n.modelList),n.dispose())}getLayer(e){return this.layerMap.get(e)||null}getDefaultLayer(){return this.getLayer("default")}_addModels(e){e.forEach(n=>{const i=n.getLayerId();let o=this.getLayer(i);o||(o=this.getDefaultLayer(),n.setLayerId("default")),n.on(M.change,()=>{this.emit("change",[n])}),this.modelMap.set(n.id,n),this.modelList.push(n),o.addModel(n)})}addModel(e){this._addModels([e]),this.emit("add-models",[e]),this.emit("change",[e])}addModels(e){this._addModels(e),this.emit("add-models",e),this.emit("change",e)}_removeModels(e){e.forEach(n=>{if(!this.modelMap.has(n.id))return;const i=n.getLayerId(),o=this.getLayer(i);o&&(o.removeModel(n),this.modelMap.delete(n.id),Oa(this.modelList,n))})}removeModel(e){this._removeModels([e]),this.emit("remove-models",[e]),this.emit("change",[e])}removeModels(e){this._removeModels(e),this.emit("remove-models",e),this.emit("change",e)}each(e){for(let n=0;n<=this.layerList.length-1;n++){const i=this.layerList[n];for(let o=0;o<=i.modelList.length-1;o++){const r=i.modelList[o];if(e(r,i)===!0)return}}}reverseEach(e){for(let n=this.layerList.length-1;n>=0;n--){const i=this.layerList[n];for(let o=i.modelList.length-1;o>=0;o--){const r=i.modelList[o];if(e(r,i)===!0)return}}}has(e){return this.modelMap.has(e.id)}getModelList(){return this.modelList}dispose(){this.modelList.forEach(e=>e.dispose()),this.modelList=[],this.modelMap.clear(),this.layerList.forEach(e=>e.dispose()),this.layerList=[],this.layerMap.clear(),this.clear()}removeAll(){const e=this.modelList.slice();this._removeModels(e)}}class Mn extends Kt{constructor(e,n=""){super();p(this,"rect",{x:0,y:0,width:0,height:0});p(this,"isHovered",!1);p(this,"isActive",!1);this.host=e,this.tag=n,this.on(M.change,()=>{this.getHost().emit(M.change)}),this.on(M.mouseIn,()=>{this.setIsHovered(!0)}),this.on(M.mouseOut,()=>{this.setIsHovered(!1)}),this.init()}init(){}updatePosition(){}getIsHovered(){return this.isHovered}setIsHovered(e){e!==this.isHovered&&(this.isHovered=e,this.emit(M.change))}getIsActive(){return this.isActive}setIsActive(e){e!==this.isActive&&(this.isActive=e,this.getHost().setActiveControl(e?this:null),this.emit(M.change))}getHost(){return this.host}getTag(){return this.tag}setSize(e,n){e===this.rect.width&&n===this.rect.height||(this.rect.width=e,this.rect.height=n)}setPosition(e,n){e===this.rect.x&&n===this.rect.y||(this.rect.x=e,this.rect.y=n)}getCenterPosition(){return{x:this.rect.x+this.rect.width/2,y:this.rect.y+this.rect.height/2}}setCenterPosition(e,n){const{x:i,y:o,width:r,height:a}=this.rect,l=e-r/2,c=n-a/2;l===i&&c===o||(this.rect.x=l,this.rect.y=c)}getScenePosition(){const e=this.getHost(),{x:n,y:i}=e.getRect();return{x:n+this.rect.x,y:i+this.rect.y}}getSceneCenterPosition(){const n=this.getHost().getWorldTransform(),i={x:this.rect.x+this.rect.width/2,y:this.rect.y+this.rect.height/2};return new nt(...n).apply(i)}getRect(){return this.rect}handleMousedown(e,n){}hitTest(e,n){const o=new nt(...this.getHost().getWorldTransform()).applyInverse({x:e,y:n});return he(o,this.getRect())}getCursor(){return"default"}dispose(){this.clear()}}var gs=(t=>(t.mouseIn="mouseIn",t.mouseOut="mouseOut",t.selected="selected",t.unselected="unselected",t.ATTR_CHANGE="attrChange",t))(gs||{});class Ve extends Kt{constructor(e=Ye()){super();p(this,"rect",{x:0,y:0,width:0,height:0});p(this,"transform",[1,0,0,1,0,0]);p(this,"layerId","");p(this,"isHovered",!1);p(this,"isSelected",!1);p(this,"activeControl",null);this.id=e,this.on("mouseIn",()=>{this.setIsHovered(!0)}),this.on("mouseOut",()=>{this.setIsHovered(!1)}),this.on("selected",()=>{this.setIsSelected(!0)}),this.on("unselected",()=>{this.setIsSelected(!1)}),this.init()}init(){}getMinWidth(){return 0}getMinHeight(){return 0}getSize(){return{width:this.rect.width,height:this.rect.height}}setSize(e,n){e=Math.max(e,this.getMinWidth()),n=Math.max(n,this.getMinHeight());let i=!1;e!==this.rect.width&&(this.rect.width=e,i=!0),n!==this.rect.height&&(this.rect.height=n,i=!0),i&&(this.emit(M.rectChange),this.emit(M.change))}setPosition(e,n){const i=this.getRect();let o=e!==i.x||n!==i.y;this.rect.x=e,this.rect.y=n,o&&(this.emit(M.rectChange),this.emit(M.change))}getPosition(){const e=this.getRect();return{x:e.x,y:e.y}}getCenterPosition(){const e=this.getRect();return{x:e.x+e.width/2,y:e.y+e.height/2}}setCenterPosition(e,n){const{width:i,height:o}=this.getRect();this.setPosition(e-i/2,n-o/2)}move(e,n){this.rect.x+=e,this.rect.y+=n,(e!==0||n!==0)&&(this.emit(M.rectChange),this.emit(M.change))}getRect(){return{...this.rect}}getRenderRect(){return this.rect}getLayerId(){return this.layerId}setLayerId(e){this.layerId=e}getTransform(){return[...this.transform]}setTransform(e){this.transform=[...e]}getWorldTransform(){const[e,n,i,o]=this.transform;return[e,n,i,o,this.rect.x,this.rect.y]}setWorldTransform(e){const[n,i,o,r,a,l]=e;this.transform=[n,i,o,r,0,0],this.setPosition(a,l)}hitTest(e,n){return!1}beforePaint(e,n){}afterPaint(e,n){}getIsHovered(){return this.isHovered}setIsHovered(e){this.isHovered!==e&&(this.isHovered=e,this.emit(M.change))}getIsSelected(){return this.isSelected}setIsSelected(e){this.isSelected!==e&&(this.isSelected=e,this.emit(M.change))}getActiveControl(){return this.activeControl}setActiveControl(e){e!==this.activeControl&&(this.activeControl=e,this.emit(M.change))}dispose(){this.clear(),this.isSelected=!1,this.isHovered=!1}getBoundingBox(){return _a({...this.getSize(),transform:this.getWorldTransform()})}getBoundingRect(){return ui(this.getBoundingBox())}getRotate(){return Hh(this.getWorldTransform())}setRotate(e,n,i){const r=new nt().translate(-i.x,-i.y).rotate(e).translate(i.x,i.y).append(new nt(...n)).getArray();this.setWorldTransform(r)}getMovable(){return!0}getResizeable(){return!0}getRotatable(){return!0}updateControlPosition(e){}setAttr(e,n,i=!1){(this.attrs[e]!==n||i)&&(this.attrs[e]=n,this.emit("attrChange",{property:e,value:n}),this.emit(M.change))}toJson(){const e={id:this.id,category:this.getCategory(),attrs:this.attrs,rect:this.rect,transform:this.transform,layerId:this.layerId};return io(e)}static fromJson(e,n,i){const o=new i(e.id);return o.attrs=e.attrs,o.setPosition(e.rect.x,e.rect.y),o.setSize(e.rect.width,e.rect.height),o.transform=e.transform,o.setLayerId(e.layerId),o}getControlByTag(e){return null}}p(Ve,"CATEGORY");const Wt=class Wt extends Mn{constructor(e,n){super(e,n);p(this,"updatePosition",()=>{this.getHost().updateControlPosition()});e.on(M.rectChange,this.updatePosition)}init(){this.setSize(Wt.SIZE,Wt.SIZE)}handleMousedown(e,n){const i=this.getHost(),o=i.getEnd();xn({onDragStart:r=>{this.setIsActive(!0)},onDragMove:(r,a)=>{const l=n.getElementAt(r);let c;l&&l.control&&l.control instanceof q&&l.control!==this?c=l.control:c=n.viewportManager.getCursorScenePoint(r),this.getHost().setEnd(c)},onDragEnd:r=>{this.setIsActive(!1);const a=this.getHost().getEnd();if(a!==o){const l={undo:()=>{i.setEnd(o)},redo:()=>{i.setEnd(a)}};n.actionManager.push(l)}}},e)}paint(e){const n=this.getRect();e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.fillStyle=e.fillStyle=this.getIsHovered()||this.getIsActive()?Wt.BORDER_COLOR:"#fff",e.fill(),e.setLineDash([]),e.strokeStyle=Wt.BORDER_COLOR,e.lineWidth=1,e.stroke()}getCursor(){return"move"}};p(Wt,"SIZE",8),p(Wt,"BORDER_WIDTH",2),p(Wt,"BORDER_COLOR","#0f8eff"),p(Wt,"FILL_COLOR","#0f8eff");let Ns=Wt;const os=class os extends Ve{constructor(e,n,i=Ye()){super(i);p(this,"attrs",{lineColor:"#000",lineWidth:2,lineCap:"round",lineDash:[10,10],lineDashOffset:-20});p(this,"controlPoints",[]);p(this,"mapPoints",[]);p(this,"_endDirection",P.LEFT);p(this,"animation",null);p(this,"isCreating",!1);p(this,"pointControls",[]);p(this,"findPathPoints",()=>{const n={rect:this.start.getHost().getRect(),origin:this.start.getSceneCenterPosition(),direction:this.getStartDirection()},i="paint"in this.end?this.end.getSceneCenterPosition():this.end,o={rect:"paint"in this.end?this.end.getHost().getRect():void 0,origin:i,direction:this.getEndDirection()},{mapPoints:r,controlPoints:a}=su(n,o,20);this.mapPoints=r,this.controlPoints=a,a.shift(),a.pop(),this.emit(M.rectChange),this.emit(M.change)});this.start=e,this.end=n,this.id=i,e.getHost().on(M.rectChange,this.findPathPoints),"paint"in this.end&&this.end.getHost().on(M.rectChange,this.findPathPoints),this.startAnimation(),this.initPointControls()}initPointControls(){this.pointControls=[new Ns(this,"end")]}updateControlPosition(){const e=this.getRect();this.pointControls.forEach(n=>{if(n.getTag()==="end"){const{x:i,y:o}=this.getEndPoint();n.setCenterPosition(i-e.x,o-e.y)}})}hitTest(e,n){if(this.isCreating||this.getIsUpdating()||!he({x:e,y:n},this.getRenderRect()))return!1;if(this.getIsHovered()){const o=this.pointControls.find(r=>r.hitTest(e,n));if(o)return o}const i=ru(this.getAllPoints());return lu({x:e,y:n},i,this.attrs.lineWidth+1)}getStartPoint(){return this.start.getSceneCenterPosition()}getEndPoint(){return"paint"in this.end?this.end.getSceneCenterPosition():this.end}setEnd(e){this.end!==e&&("paint"in this.end&&this.end.getHost().off(M.rectChange,this.findPathPoints),this.end=e,"paint"in e&&e.getHost().on(M.rectChange,this.findPathPoints),this.findPathPoints(),this.updateControlPosition(),this.emit(M.change))}setEndDirection(e){"paint"in this.end||this._endDirection!==e&&(this._endDirection=e,this.findPathPoints(),this.emit(M.change))}getStartDirection(){const e=this.start.getSceneCenterPosition(),n=this.start.getHost().getCenterPosition(),i=[e.x-n.x,e.y-n.y],o=vi(i);return gi(o)}getEndDirection(){if("paint"in this.end){const e=this.end.getSceneCenterPosition(),n=this.end.getHost().getCenterPosition(),i=[e.x-n.x,e.y-n.y],o=vi(i);return gi(o)}return this._endDirection}getAllPoints(){const e=this.getStartPoint(),n=this.getEndPoint();return[e,...this.controlPoints,n]}getRect(){const e=this.getStartPoint(),n=this.getEndPoint();return xa(e,n,...this.controlPoints)}getRenderRect(){const e=this.getRect(),n=Ns.BORDER_WIDTH,i=this.attrs.lineWidth*2+n;return Ee(e,i)}getSize(){const{width:e,height:n}=this.getRect();return{width:e,height:n}}getWorldTransform(){const{x:e,y:n}=this.getRect();return[1,0,0,1,e,n]}paint(e){e.beginPath();const n=this.getAllPoints(),{x:i,y:o}=n.pop(),r=this.getEndDirection(),a=8,l=12;let c=1/0,h=1/0;n.forEach((m,y)=>{c=Math.min(m.x,c),h=Math.min(m.y,h),e[y?"lineTo":"moveTo"](m.x,m.y)}),r===P.LEFT?e.lineTo(i-l/2,o):r===P.RIGHT?e.lineTo(i+l/2,o):r===P.BOTTOM?e.lineTo(i,o+l/2):r===P.TOP&&e.lineTo(i,o-l/2);const{attrs:d}=this,f=d.lineWidth;e.strokeStyle=d.lineColor,e.lineCap=d.lineCap,e.lineWidth=f,e.setLineDash(d.lineDash),e.lineDashOffset=d.lineDashOffset,e.stroke(),e.beginPath(),r===P.LEFT?(e.moveTo(i,o),e.lineTo(i-l,o-a/2),e.lineTo(i-l,o+a/2)):r===P.RIGHT?(e.moveTo(i,o),e.lineTo(i+l,o-a/2),e.lineTo(i+l,o+a/2)):r===P.BOTTOM?(e.moveTo(i,o),e.lineTo(i-a/2,o+l),e.lineTo(i+a/2,o+l)):r===P.TOP&&(e.moveTo(i,o),e.lineTo(i-a/2,o-l),e.lineTo(i+a/2,o-l)),e.closePath(),e.fillStyle=d.lineColor,e.fill(),this.getIsSelected()&&(e.save(),e.translate(c,h),this.pointControls.forEach(m=>{m.paint(e)}),e.restore())}getCategory(){return os.CATEGORY}getStart(){return this.start}getStartHost(){return this.start.getHost()}getEnd(){return this.end}getEndHost(){return"getHost"in this.end?this.end.getHost():null}move(e,n){"paint"in this.end||(this.end.x+=e,this.end.y+=n,this.findPathPoints(),this.emit(M.rectChange),this.emit(M.change))}getMovable(){return!("paint"in this.end)}getResizeable(){return!1}getRotatable(){return!1}startAnimation(){if(!this.animation){const e=this.attrs.lineDashOffset;this.animation=Ra({startValue:0,endValue:e,duration:1e3,loop:!0,onUpdate:n=>{this.setAttr("lineDashOffset",n)}})}this.animation.start()}dispose(){var e,n;super.dispose(),(e=this.animation)==null||e.stop(),this.getStartHost().off(M.rectChange,this.findPathPoints),(n=this.getEndHost())==null||n.off(M.rectChange,this.findPathPoints)}reset(){var e;super.reset(),this.getStartHost().on(M.rectChange,this.findPathPoints),(e=this.getEndHost())==null||e.on(M.rectChange,this.findPathPoints),this.startAnimation()}toJson(){const e=super.toJson();e.start=this.getStartHost().id;const n=this.getEndHost();e.end=n?n.id:this.getEndPoint(),e.startControlDir=this.start.getTag();const i=this.end;return e.endControlDir="getTag"in i?i.getTag():this._endDirection,e}setIsCreating(e){this.isCreating=e}getIsUpdating(){return this.pointControls.some(e=>e.getIsActive())}static fromJson(e,n){const i=n.find(l=>l.id===e.start);if(!i)throw new Error(`Link:ID${e.start}`);const o=i.getControlByTag(e.startControlDir);let r;if(typeof e.end=="string"){const l=n.find(c=>c.id===e.end);if(!l)throw new Error(`Link:ID${e.end}`);r=l.getControlByTag(e.endControlDir)}else r=e.end;const a=new os(o,r,e.id);return a.setEndDirection(e.endControlDir),a.attrs=e.attrs,a.setPosition(e.rect.x,e.rect.y),a.setSize(e.rect.width,e.rect.height),a.transform=e.transform,a.setLayerId(e.layerId),a.findPathPoints(),a}};p(os,"CATEGORY","link");let St=os;const Mt=class Mt extends Mn{constructor(e,n){super(e,n);p(this,"updatePosition",()=>{this.getHost().updateControlPosition(this)});e.on(M.rectChange,this.updatePosition)}init(){this.setSize(Mt.SIZE,Mt.SIZE)}handleMousedown(e,n){let i=null;const r=this.getHost().getLayerId();xn({onDragStart:a=>{this.setIsActive(!0)},onDragMove:(a,l)=>{const c=n.getElementAt(a);let h;c&&c.control&&c.control instanceof Mt&&c.control!==this?h=c.control:h=n.viewportManager.getCursorScenePoint(a),i?(i.setEndDirection(vi(l)),i.setEnd(h)):(i=new St(this,h),i.setIsCreating(!0),i.setLayerId(r),n.box.addModel(i))},onDragEnd:a=>{if(this.setIsActive(!1),!i)return;i.setIsCreating(!1);const l=n.getElementAt(a);l&&l.control&&l.control instanceof Mt&&i.setEnd(l.control);const c={undo(){n.box.removeModel(i)},redo(){n.box.addModel(i),i==null||i.reset()}};n.actionManager.push(c)}},e)}paint(e){const n=this.getRect(),i=n.x+n.width/2,o=n.y+n.height/2;e.beginPath(),e.arc(i,o,Mt.SIZE/2,0,Math.PI*2),this.getIsHovered()||this.getIsActive()?(e.fillStyle=Mt.FILL_COLOR,e.fill()):(e.fillStyle="#fff",e.fill()),e.strokeStyle=Mt.BORDER_COLOR,e.lineWidth=Mt.BORDER_WIDTH,e.stroke()}getCursor(){return"crosshair"}};p(Mt,"SIZE",8),p(Mt,"BORDER_WIDTH",2),p(Mt,"BORDER_COLOR","#0f8eff"),p(Mt,"FILL_COLOR","#0f8eff");let q=Mt;const Ys=class Ys extends Ve{constructor(e=Ye()){super(e);p(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff"});p(this,"rect",{x:0,y:0,width:200,height:150});p(this,"linkControls",[]);this.linkControls=[new q(this,P.TOP),new q(this,P.RIGHT),new q(this,P.BOTTOM),new q(this,P.LEFT)]}getConnectionPoints(){const{width:e,height:n}=this.getRect(),i=e/2,o=n/2;return[{x:i,y:0},{x:e,y:o},{x:i,y:n},{x:0,y:o}]}getBoundingBox(){const e=new nt(...this.getWorldTransform()),n=this.getConnectionPoints().map(i=>e.apply(i));return Ma(n)}hitTest(e,n){var l;if(!he({x:e,y:n},this.getRenderRect()))return!1;if(this.getIsHovered()){const c=this.linkControls.find(h=>h.hitTest(e,n));if(c)return c}const{width:i,height:o}=this.getRect(),a=new nt().translate(i/2,o/2).prepend(new nt(...this.getWorldTransform())).applyInverse({x:e,y:n});return cu(a,i,o,(l=this.attrs.border)==null?void 0:l.width)}getRenderRect(){var i;let e=((i=this.attrs.border)==null?void 0:i.width)||1;const n=this.getBoundingRect();return e=Math.max(e,q.SIZE/2+q.BORDER_WIDTH),Ee(n,e)}beforePaint(e,n){e.save();const i=this.getWorldTransform();e.transform(...i)}paint(e){var o;const{attrs:n}=this,i=this.getConnectionPoints();e.beginPath(),[...i,i[0]].forEach((r,a)=>{e[a?"lineTo":"moveTo"](r.x,r.y)}),n.fill&&(e.fillStyle=n.fillColor,e.fill()),(o=n.border)!=null&&o.width&&(e.strokeStyle=n.border.color,e.lineWidth=n.border.width,e.stroke())}afterPaint(e,n){const i=this.getActiveControl();(this.getIsHovered()||i instanceof q)&&this.linkControls.forEach(o=>{o.paint(e)}),e.restore()}getCategory(){return Ys.CATEGORY}updateControlPosition(e){const n=this.getRect(),{width:i,height:o}=n;switch(e.getTag()){case P.TOP:e.setCenterPosition(i/2,0);break;case P.RIGHT:e.setCenterPosition(i,o/2);break;case P.BOTTOM:e.setCenterPosition(i/2,o);break;case P.LEFT:e.setCenterPosition(0,o/2)}}getControlByTag(e){return this.linkControls.find(n=>n.getTag()===e)||null}};p(Ys,"CATEGORY","diamond");let wi=Ys;const Vs=class Vs extends Ve{constructor(e=Ye()){super(e);p(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff"});p(this,"rect",{x:0,y:0,width:200,height:200});p(this,"linkControls",[]);this.id=e,this.linkControls=[new q(this,P.TOP),new q(this,P.RIGHT),new q(this,P.BOTTOM),new q(this,P.LEFT)]}getRenderRect(){var i;let e=((i=this.attrs.border)==null?void 0:i.width)||1;const n=this.getBoundingRect();return e=Math.max(e,q.SIZE/2+q.BORDER_WIDTH),Ee(n,e)}hitTest(e,n){var l;if(!he({x:e,y:n},this.getRenderRect()))return!1;if(this.getIsHovered()){const c=this.linkControls.find(h=>h.hitTest(e,n));if(c)return c}const{width:i,height:o}=this.getRect(),a=new nt().translate(i/2,o/2).prepend(new nt(...this.getWorldTransform())).applyInverse({x:e,y:n});return nu(a,i/2,o/2,((l=this.attrs.border)==null?void 0:l.width)??0)}beforePaint(e,n){e.save();const i=this.getWorldTransform();e.transform(...i)}paint(e){var l;const{attrs:n}=this,{width:i,height:o}=this.rect,r=i/2,a=o/2;if(e.beginPath(),i===o)e.arc(r,a,i/2,0,Math.PI*2);else{const c=i/2,h=o/2,d=c>h?1/c:1/h;e.moveTo(r+c,a);for(let f=0;f<2*Math.PI;f+=d)e.lineTo(r+c*Math.cos(f),a+h*Math.sin(f));e.closePath()}n.fill&&(e.fillStyle=n.fillColor,e.fill()),(l=n.border)!=null&&l.width&&(e.strokeStyle=n.border.color,e.lineWidth=n.border.width,e.stroke())}afterPaint(e,n){const i=this.getActiveControl();(this.getIsHovered()||i instanceof q)&&this.linkControls.forEach(o=>{o.paint(e)}),e.restore()}dispose(){super.dispose()}getCategory(){return Vs.CATEGORY}updateControlPosition(e){const n=this.getRect(),{width:i,height:o}=n;switch(e.getTag()){case P.TOP:e.setCenterPosition(i/2,0);break;case P.RIGHT:e.setCenterPosition(i,o/2);break;case P.BOTTOM:e.setCenterPosition(i/2,o);break;case P.LEFT:e.setCenterPosition(0,o/2)}}getControlByTag(e){return this.linkControls.find(n=>n.getTag()===e)||null}};p(Vs,"CATEGORY","ellipse");let yi=Vs;class bu{constructor(){p(this,"classMap",new Map);this.register(St)}register(s){this.classMap.set(s.CATEGORY,s)}getInstance(s,e){const n=this.classMap.get(s);if(!n)throw new Error(`${s} is not registered`);return new n(e)}parseJson(s,e){const n=this.classMap.get(s.category);if(!n)throw new Error(`${s.category} is not registered`);return n.fromJson(s,e,n)}}const Xs=class Xs extends Ve{constructor(e=Ye()){super(e);p(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff",roundGap:0});p(this,"rect",{x:0,y:0,width:200,height:100});p(this,"linkControls",[]);this.id=e,this.linkControls=[new q(this,P.TOP),new q(this,P.RIGHT),new q(this,P.BOTTOM),new q(this,P.LEFT)]}getRoundGap(){return Math.min(Math.min(this.rect.width,this.rect.height)/2,this.attrs.roundGap??0)}getRenderRect(){var i;let e=((i=this.attrs.border)==null?void 0:i.width)||1;const n=this.getBoundingRect();return e=Math.max(e,q.SIZE/2+q.BORDER_WIDTH),Ee(n,e)}hitTest(e,n){if(!he({x:e,y:n},this.getRenderRect()))return!1;if(this.getIsHovered()){const l=this.linkControls.find(c=>c.hitTest(e,n));if(l)return l}const o=new nt(...this.getWorldTransform()).applyInverse({x:e,y:n}),{width:r,height:a}=this.getRect();return Ih(o,{x:0,y:0,width:r,height:a},this.getRoundGap())}beforePaint(e,n){e.save();const i=this.getWorldTransform();e.transform(...i)}paint(e){var a;const{attrs:n}=this,{width:i,height:o}=this.rect;e.beginPath();const r=this.getRoundGap();r?e.roundRect(0,0,i,o,r):e.rect(0,0,i,o),n.fill&&(e.fillStyle=n.fillColor,e.fill()),(a=n.border)!=null&&a.width&&(e.strokeStyle=n.border.color,e.lineWidth=n.border.width,e.stroke())}afterPaint(e,n){const i=this.getActiveControl();(this.getIsHovered()||i instanceof q)&&this.linkControls.forEach(o=>{o.paint(e)}),e.restore()}dispose(){super.dispose()}getCategory(){return Xs.CATEGORY}updateControlPosition(e){const n=this.getRect(),{width:i,height:o}=n;switch(e.getTag()){case P.TOP:e.setCenterPosition(i/2,0);break;case P.RIGHT:e.setCenterPosition(i,o/2);break;case P.BOTTOM:e.setCenterPosition(i/2,o);break;case P.LEFT:e.setCenterPosition(0,o/2)}}getControlByTag(e){return this.linkControls.find(n=>n.getTag()===e)||null}};p(Xs,"CATEGORY","rect");let bi=Xs;const Ut=class Ut extends Mn{constructor(s,e){super(s,e)}init(){this.setSize(Ut.SIZE,Ut.SIZE)}updatePosition(){const s=this.getHost().getRect();if(!s||s.width===0||s.height===0)return;const{width:e,height:n}=s,i=Ut.SIZE/2,o=this.getTag();o===Nt.nw?this.setPosition(0-i,0-i):o===Nt.ne?this.setPosition(e-i,0-i):o===Nt.sw?this.setPosition(0-i,n-i):o===Nt.se?this.setPosition(e-i,n-i):o===Nt.n?this.setPosition(e/2-i,0-i):o===Nt.e?this.setPosition(e-i,n/2-i):o===Nt.w?this.setPosition(0-i,n/2-i):o===Nt.s&&this.setPosition(e/2-i,n-i)}hitTest(s,e){return super.hitTest(s,e)}paint(s){const e=this.getRect();s.beginPath(),s.rect(e.x,e.y,e.width,e.height),s.fillStyle=s.fillStyle=this.getIsHovered()||this.getIsActive()?Ut.BORDER_COLOR:"#fff",s.fill(),s.setLineDash([]),s.strokeStyle=Ut.BORDER_COLOR,s.lineWidth=1,s.stroke()}handleMousedown(s,e){const n=this.getHost(),i=n.getSelectionList().filter(w=>w.getResizeable());if(i.length===0)return;const o=new Map,r=new Map;i.forEach(w=>{o.set(w.id,w.getWorldTransform()),r.set(w.id,w.getRect())});let{x:a,y:l,width:c,height:h}=n.getBoundingRect();const d=new nt().translate(a,l);let f={x:s.offsetX,y:s.offsetY};const m=new Map,y=new Map;xn({onDragStart:()=>{this.setIsActive(!0)},onDragMove:w=>{const L={x:w.offsetX,y:w.offsetY};if(L.x===f.x&&L.y===f.y)return;const R=e.viewportManager.getCursorScenePoint(w);f=L;let S=new nt;if(n.getSelectionList().length===1){const E=o.get(i[0].id),$=r.get(i[0].id),j=dr(this.getTag(),R,{width:$.width,height:$.height,transform:E});S=new nt(...j.transform).append(new nt(...E).invert())}else{const E=dr(this.getTag(),R,{width:c,height:h,transform:d.getArray()});S=new nt(...E.transform).append(d.clone().invert())}const z=S.getArray();i.forEach(E=>{const $=o.get(E.id),j=ur(z,$),it=ur(Oh([1,0,0,1,0,0]),j),{width:B,height:Y}=r.get(E.id),U=Ah({width:B,height:Y,transform:it});E.setSize(U.width,U.height),E.setWorldTransform(U.transform),m.set(E.id,E.getWorldTransform()),y.set(E.id,E.getRect())})},onDragEnd:w=>{this.setIsActive(!1);const L={undo:()=>{i.forEach(R=>{const{width:S,height:z}=r.get(R.id),E=o.get(R.id);R.setSize(S,z),R.setWorldTransform(E)})},redo:()=>{i.forEach(R=>{const{width:S,height:z}=y.get(R.id),E=m.get(R.id);R.setSize(S,z),R.setWorldTransform(E)})}};e.actionManager.push(L)}},s)}getCursor(){return`${this.getTag()}-resize`}};p(Ut,"BORDER_WIDTH",1),p(Ut,"SIZE",8),p(Ut,"BORDER_COLOR","#0f8eff");let Ci=Ut;const Yt=class Yt extends Mn{init(){this.setSize(Yt.SIZE,Yt.SIZE)}updatePosition(){const{width:s,height:e}=this.getHost().getRect();this.setPosition(s,-Yt.SIZE)}handleMousedown(s,e){const n=this.getHost(),i=n.getSelectionList().filter(w=>w.getRotatable());if(i.length===0)return;const o=new Map,r=new Map;i.forEach(w=>{o.set(w.id,w.getWorldTransform()),r.set(w.id,{...w.getRect()})});const{x:a,y:l,width:c,height:h}=n.getBoundingRect(),d={x:a+c/2,y:l+h/2},f=e.viewportManager.getScenePoint({x:s.offsetX,y:s.offsetY}),m=fi({x:0,y:-1},{x:f.x-d.x,y:f.y-d.y});n.togglePauseUpdateRect(!0);const y=new Map;xn({onDragStart:()=>{this.setIsActive(!0)},onDragMove:w=>{const L=e.viewportManager.getScenePoint({x:w.offsetX,y:w.offsetY}),{x:R,y:S}=d,E=fi({x:0,y:-1},{x:L.x-R,y:L.y-S})-m;i.forEach($=>{$.setRotate(E,o.get($.id),{x:R,y:S}),y.set($.id,$.getWorldTransform())}),n.setRotate(E)},onDragEnd:w=>{this.setIsActive(!1),n.setRotate(0),n.togglePauseUpdateRect(!1),n.caculateContainRect();const L={undo:()=>{i.forEach(R=>{const S=o.get(R.id);R.setWorldTransform(S)})},redo:()=>{i.forEach(R=>{const S=y.get(R.id);R.setWorldTransform(S)})}};e.actionManager.push(L)}},s)}paint(s){const n=this.getIsHovered()||this.getIsActive()?Yt.ACTIVE_FILL_STYLE:Yt.FILL_STYLE;s.save(),s.translate(this.rect.x,this.rect.y),s.strokeStyle="rgba(0,0,0,0)",s.miterLimit=4,s.scale(.015625,.015625),s.save(),s.fillStyle=n,s.beginPath(),s.moveTo(793.6,993.28),s.bezierCurveTo(784.384,993.28,775.168,989.696,768,983.04),s.lineTo(594.432,808.9599999999999),s.bezierCurveTo(580.6080000000001,795.136,580.6080000000001,772.0959999999999,594.432,758.2719999999999),s.bezierCurveTo(608.256,744.448,631.296,744.448,645.12,758.2719999999999),s.lineTo(793.6,906.752),s.lineTo(942.08,758.2719999999999),s.bezierCurveTo(955.904,744.448,978.9440000000001,744.448,992.768,758.2719999999999),s.bezierCurveTo(1006.592,772.0959999999999,1006.592,795.136,992.768,808.9599999999999),s.lineTo(819.2,983.04),s.bezierCurveTo(812.032,989.6959999999999,802.816,993.28,793.6,993.28),s.closePath(),s.moveTo(250.88,450.56),s.bezierCurveTo(241.664,450.56,232.448,446.976,225.792,439.808),s.lineTo(51.712,266.24),s.bezierCurveTo(37.888000000000005,252.416,37.888000000000005,229.376,51.712,215.55200000000002),s.lineTo(225.79200000000003,41.98400000000001),s.bezierCurveTo(239.61600000000004,28.16000000000001,262.656,28.16000000000001,276.48,41.98400000000001),s.bezierCurveTo(290.30400000000003,55.80800000000001,290.30400000000003,78.84800000000001,276.48,92.67200000000001),s.lineTo(128.00000000000003,241.152),s.lineTo(276.48,389.63199999999995),s.bezierCurveTo(290.30400000000003,403.45599999999996,290.30400000000003,426.4959999999999,276.48,440.31999999999994),s.bezierCurveTo(269.312,446.97599999999994,260.096,450.55999999999995,250.88000000000002,450.55999999999995),s.closePath(),s.fill(),s.stroke(),s.restore(),s.save(),s.fillStyle=n,s.beginPath(),s.moveTo(793.6,993.28),s.bezierCurveTo(773.6320000000001,993.28,757.76,977.408,757.76,957.4399999999999),s.lineTo(757.76,803.8399999999999),s.bezierCurveTo(757.76,513.0239999999999,521.216,276.4799999999999,230.39999999999998,276.4799999999999),s.lineTo(76.8,276.4799999999999),s.bezierCurveTo(56.831999999999994,276.4799999999999,40.959999999999994,260.6079999999999,40.959999999999994,240.6399999999999),s.bezierCurveTo(40.959999999999994,220.6719999999999,56.831999999999994,204.7999999999999,76.8,204.7999999999999),s.lineTo(230.39999999999998,204.7999999999999),s.bezierCurveTo(560.64,204.7999999999999,829.4399999999999,473.5999999999999,829.4399999999999,803.8399999999999),s.lineTo(829.4399999999999,957.4399999999999),s.bezierCurveTo(829.4399999999999,977.4079999999999,813.568,993.28,793.5999999999999,993.28),s.closePath(),s.fill(),s.stroke(),s.restore(),s.restore()}};p(Yt,"SIZE",16),p(Yt,"FILL_STYLE","#333"),p(Yt,"ACTIVE_FILL_STYLE","#0f8eff");let Ws=Yt;const Gs=class Gs extends Ve{constructor(e=Ye()){super(e);p(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff"});p(this,"rect",{x:0,y:0,width:200,height:100});p(this,"linkControls",[]);this.linkControls=[new q(this,P.TOP),new q(this,P.RIGHT),new q(this,P.BOTTOM),new q(this,P.LEFT)]}hitTest(e,n){var l,c;if(!he({x:e,y:n},this.getRenderRect()))return!1;if(this.getIsHovered()){const h=this.linkControls.find(d=>d.hitTest(e,n));if(h)return h}const o=new nt(...this.getWorldTransform()).applyInverse({x:e,y:n}),{width:r,height:a}=this.getRect();return he(o,{x:0,y:0,width:r,height:a},((c=(l=this.attrs)==null?void 0:l.border)==null?void 0:c.width)??0)}getRenderRect(){var i;let e=((i=this.attrs.border)==null?void 0:i.width)||1;const n=this.getBoundingRect();return e=Math.max(e,q.SIZE/2+q.BORDER_WIDTH),Ee(n,e)}beforePaint(e,n){e.save();const i=this.getWorldTransform();e.transform(...i)}paint(e){var l;const{attrs:n}=this,{width:i,height:o}=this.getRect();e.beginPath();let r=Math.min(i,o)/2;const a=Math.max(0,i-2*r);e.moveTo(r,0),e.lineTo(r+a,0),e.arcTo(r+a+r,0,r+a+r,o/2,r),e.arcTo(r+a+r,o,r+a,o,r),e.lineTo(r,o),e.arcTo(0,o,0,o/2,r),e.arcTo(0,0,r,0,r),n.fill&&(e.fillStyle=n.fillColor,e.fill()),(l=n.border)!=null&&l.width&&(e.strokeStyle=n.border.color,e.lineWidth=n.border.width,e.stroke())}afterPaint(e,n){const i=this.getActiveControl();(this.getIsHovered()||i instanceof q)&&this.linkControls.forEach(o=>{o.paint(e)}),e.restore()}getCategory(){return Gs.CATEGORY}updateControlPosition(e){const n=this.getRect(),{width:i,height:o}=n;switch(e.getTag()){case P.TOP:e.setCenterPosition(i/2,0);break;case P.RIGHT:e.setCenterPosition(i,o/2);break;case P.BOTTOM:e.setCenterPosition(i/2,o);break;case P.LEFT:e.setCenterPosition(0,o/2)}}getControlByTag(e){return this.linkControls.find(n=>n.getTag()===e)||null}};p(Gs,"CATEGORY","terminator");let Ti=Gs;const Se=class Se extends Kt{constructor(e){super();p(this,"mousedown",!1);p(this,"selectionRect",null);p(this,"mouseEl",null);p(this,"mouseControl",null);p(this,"handleMouseDown",e=>{this.mousedown=!0,this.selectionRect=null;const n=this.editor.selectionManager,i=this.mouseEl;if(e.shiftKey&&i){n.toggleSelection(i);return}this.mouseControl?(this.mouseControl.emit(M.mouseDown,e),this.mouseControl.handleMousedown(e,this.editor)):i?this.handleMoveElement(e,i):this.handleBoxSelection(e)});p(this,"handleMouseMove",e=>{const n=this.editor.viewportManager.getCursorScenePoint(e),i=this.editor.selectionManager.getControlAt(n),o=this.mouseEl,r=this.mouseControl;if(i)this.mouseControl=i,this.mouseEl=null;else{const a=this.editor.getElementAt(e)||null;this.mouseEl=(a==null?void 0:a.model)||null,this.mouseControl=(a==null?void 0:a.control)||null}this.mouseControl?this.setCursorStyle(this.mouseControl.getCursor()):this.mouseEl&&this.mouseEl.getMovable()?this.setCursorStyle("move"):this.setCursorStyle("default"),this.mouseEl!==o&&(o&&o.emit(gs.mouseOut,e),this.mouseEl&&this.mouseEl.emit(gs.mouseIn,e)),this.mouseControl!==r&&(r&&r.emit(M.mouseOut,e),this.mouseControl&&this.mouseControl.emit(M.mouseIn,e))});p(this,"handleMouseUp",e=>{this.mousedown=!1});p(this,"handleMouseLeave",e=>{this.mousedown=!1});p(this,"handleMouseWheel",e=>{if(e.preventDefault(),e.ctrlKey||e.metaKey){const n={x:e.offsetX,y:e.offsetY};e.deltaY>0?this.editor.viewportManager.zoomIn(n):this.editor.viewportManager.zoomOut(n)}else{const n=this.editor.viewportManager.getZoom();this.editor.viewportManager.move(-e.deltaX/n,-e.deltaY/n)}});p(this,"handleKeydonw",e=>{const n=e.key.toLowerCase(),i=e.ctrlKey||e.metaKey;n==="backspace"||e.key==="delete"?this.editor.removeSelection():n==="z"&&i?e.shiftKey?this.editor.actionManager.redo():this.editor.actionManager.undo():n==="y"&&i&&this.editor.actionManager.redo()});this.editor=e,this.setup()}setup(){this.editor.topCanvas.addEventListener("mousedown",this.handleMouseDown),this.editor.topCanvas.addEventListener("mousemove",this.handleMouseMove),this.editor.topCanvas.addEventListener("mouseup",this.handleMouseUp),this.editor.topCanvas.addEventListener("mouseleave",this.handleMouseUp),this.editor.topCanvas.addEventListener("wheel",this.handleMouseWheel),this.editor.topCanvas.addEventListener("keydown",this.handleKeydonw)}handleMoveElement(e,n){const i=this.editor.selectionManager,o=this.editor.viewportManager.getZoom();n&&!i.isSelected(n)&&i.setSelection([n]);let r=e.clientX,a=e.clientY,l=r,c=a;const h=i.getSelectionList(),d=h.length>1,f=y=>{const w=y.clientX-l,L=y.clientY-c;l=y.clientX,c=y.clientY,this.selectionRect=null,h.forEach(R=>{R instanceof St?R.getMovable()&&d&&R.move(w/o,L/o):R.move(w/o,L/o)})},m=y=>{const w=y.clientX-r,L=y.clientY-a;if(w||L){let R={undo:()=>{h.forEach(S=>{S.move(-w/o,-L/o)})},redo:()=>{h.forEach(S=>{S.move(w/o,L/o)})}};this.editor.actionManager.push(R)}window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",m),window.removeEventListener("mouseleave",m)};window.addEventListener("mousemove",f),window.addEventListener("mouseup",m),window.addEventListener("mouseleave",m)}handleBoxSelection(e){const n=this.editor.selectionManager,i=this.editor.viewportManager.getCursorScenePoint(e);let o=e.clientX,r=e.clientY;const a=c=>{const h=this.editor.viewportManager.getCursorScenePoint(c);this.selectionRect=xa(i,h),this.emit(M.REPAINT)},l=c=>{const h=c.clientX-o,d=c.clientY-r;if(h||d){const f=this.selectionRect;this.selectionRect=null;const m=[];this.editor.box.each(y=>{const w=y.getRenderRect();hi(f,w)&&m.push(y)}),n.setSelection(m)}else n.clearSelection();this.emit(M.REPAINT),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l),window.removeEventListener("mouseleave",l)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",l),window.addEventListener("mouseleave",l)}setCursorStyle(e){this.editor.topCanvas.style.cursor=e}dispose(){this.editor.topCanvas.removeEventListener("mousedown",this.handleMouseDown),this.editor.topCanvas.removeEventListener("mousemove",this.handleMouseMove),this.editor.topCanvas.removeEventListener("mouseup",this.handleMouseUp),this.editor.topCanvas.removeEventListener("mouseleave",this.handleMouseUp),this.editor.topCanvas.removeEventListener("wheel",this.handleMouseWheel),this.editor.topCanvas.removeEventListener("keydown",this.handleKeydonw)}paintTop(e){this.selectionRect&&(e.beginPath(),e.roundRect(this.selectionRect.x,this.selectionRect.y,this.selectionRect.width,this.selectionRect.height,2),e.fillStyle=Se.SELECTION_FILL_COLOR,e.fill(),e.strokeStyle=Se.SELECTION_STROKE_COLOR,e.lineWidth=2,e.stroke())}paintRoot(e){}isHovered(e){return this.mouseEl===e}};p(Se,"SELECTION_STROKE_COLOR","#0f8eff"),p(Se,"SELECTION_FILL_COLOR","#0f8eff33");let xi=Se;var ps=(t=>(t.ZOOM_CHANGE="zoomChange",t))(ps||{});const Jt=class Jt extends Kt{constructor(e){super();p(this,"x",0);p(this,"y",0);p(this,"zoom",1);p(this,"zoomTextOpaticy",-1);p(this,"animation",null);this.editor=e}getZoom(){return this.zoom}zoomOut(e){const n=this.zoom;let i=n+Jt.ZOOM_STEP;if(i=Math.min(i,Jt.MAX_ZOOM),i!==n){const{x:o,y:r}=e,{x:a,y:l}=this.getScenePoint(e),c=a-o/i,h=l-r/i;this.x=c,this.y=h,this.zoom=i,this.startAnimation(),this.emit("zoomChange",i),this.emit(M.change)}}zoomIn(e){const n=this.zoom;let i=n-Jt.ZOOM_STEP;if(i=Math.max(i,Jt.MIN_ZOOM),i!==n){const{x:o,y:r}=e,{x:a,y:l}=this.getScenePoint(e),c=a-o/i,h=l-r/i;this.x=c,this.y=h,this.zoom=i,this.startAnimation(),this.emit("zoomChange",i),this.emit(M.change)}}move(e,n){this.x-=e,this.y-=n,(e!==0||n!==0)&&this.emit(M.change)}getViewport(){return{x:this.x,y:this.y,width:parseFloat(this.editor.topCanvas.style.width),height:parseFloat(this.editor.topCanvas.style.height)}}getViewRect(){const e=this.getViewport(),n=this.getZoom();return{x:this.x,y:this.y,width:e.width/n,height:e.height/n}}getCursorViewPoint(e){return{x:e.offsetX,y:e.offsetY}}getCursorScenePoint(e){const n=this.getCursorViewPoint(e);return this.getScenePoint(n)}getScenePoint(e,n=this.zoom){const{x:i,y:o}=e,{x:r,y:a}=this.getViewport();return{x:r+i/n,y:a+o/n}}getViewPoint(e,n=this.zoom){const{x:i,y:o}=e,{x:r,y:a}=this;return{x:(i-r)/n,y:(o-a)/n}}getViewCenter(){const e=this.getViewport();return{x:e.width/2,y:e.height/2}}startAnimation(){this.animation?this.animation.stop():this.animation=Ra({duration:2e3,startValue:1,endValue:0,onUpdate:e=>{this.zoomTextOpaticy=e,this.emit(M.REPAINT)},onEnd(){this.zoomTextOpaticy=-1}}),this.animation.start()}paintTop(e){if(this.zoomTextOpaticy>=0){const n=this.getZoom();e.save(),e.setTransform(1,0,0,1,0,0),e.font="30px Arial",e.fillStyle="#000",e.globalAlpha=this.zoomTextOpaticy,e.fillText(`ZOOM: ${n.toFixed(1)}`,10,40),e.restore()}}paintRoot(e){}dispose(){var e;this.clear(),(e=this.animation)==null||e.stop()}};p(Jt,"ZOOM_STEP",.1),p(Jt,"MIN_ZOOM",.1),p(Jt,"MAX_ZOOM",5);let ms=Jt;const Ks=class Ks extends Kt{constructor(e=Ks.MAX){super();p(this,"list",[]);p(this,"batch",null);p(this,"cursor",-1);p(this,"isOperating",!1);this.limit=e}push(e){if(!this.isOperating){if(this.batch){this.batch.push(e);return}this.cursor!==this.list.length-1&&this.list.splice(this.cursor+1,this.list.length),this.limit===this.list.length&&this.list.splice(0,1),this.list.push(e),this.cursor=this.list.length-1,this.emit(M.change)}}clear(){this.list=[],this.emit(M.change)}undoable(){return this.cursor>=0}redoable(){return this.cursor<this.list.length-1}undo(){if(!this.undoable())return;const e=this.list[this.cursor--];this.isOperating=!0;try{if(Array.isArray(e))for(let n=e.length-1;n>=0;n--)e[n].undo();else e.undo()}catch(n){console.warn(n)}finally{this.isOperating=!1}this.emit(M.change)}redo(){if(!this.redoable())return;const e=this.list[++this.cursor];this.isOperating=!0;try{Array.isArray(e)?e.forEach(n=>n.redo()):e.redo()}catch(n){console.warn(n)}finally{this.isOperating=!1}this.emit(M.change)}startBatch(){this.batch||(this.batch=[])}endBatch(){const e=this.batch;this.batch=null,e!=null&&e.length&&this.push(e)}dispose(){this.clear()}};p(Ks,"MAX",50);let Mi=Ks;const Ae=class Ae extends Kt{constructor(e){super();p(this,"selection",[]);p(this,"rect",{x:0,y:0,height:0,width:0});p(this,"resizers",[]);p(this,"rotator",new Ws(this));p(this,"pauseUpdateRect",!1);p(this,"rotate",0);p(this,"activeControl",null);p(this,"repaint",()=>{this.emit(M.REPAINT)});p(this,"caculateContainRect",()=>{if(!this.pauseUpdateRect){if(this.selection.length===1)this.rect=this.selection[0].getRect();else if(this.selection.length>1){const e=this.selection.map(n=>n.getBoundingBox());this.rect=ui(Ea(e))}else this.rect={x:0,width:0,height:0,y:0};this.emit(M.rectChange),this.repaint()}});this.editor=e,e.box.on(ds.removeModels,n=>{n.forEach(i=>{this.isSelected(i)&&this.removeSelection(i)})}),this.initResizers(),this.rotator.on(M.change,this.repaint),this.on(M.change,this.caculateContainRect)}initResizers(){this.resizers=Object.values(Nt).map(e=>new Ci(this,e)),this.resizers.forEach(e=>{e.on(M.change,this.repaint)})}_addSelection(e){e.on(M.rectChange,this.caculateContainRect),e.emit(gs.selected),this.selection.push(e)}_removeSelection(e){e.off(M.rectChange,this.caculateContainRect),e.emit(gs.unselected),Oa(this.selection,e)}_clearSelection(){for(let e=this.selection.length-1;e>=0;e--)this._removeSelection(this.selection[e])}setSelection(e){this._clearSelection(),e.forEach(n=>this._addSelection(n)),this.emit("setSelection",e),this.emit(M.change)}addSelection(e){this.isSelected(e)||(this._addSelection(e),this.emit("addSelection",e),this.emit(M.change))}removeSelection(e){this.isSelected(e)&&(this._removeSelection(e),this.emit("removeSelection",e),this.emit(M.change))}clearSelection(){this.selection.length&&(this._clearSelection(),this.emit("clearSelection"),this.emit(M.change))}toggleSelection(e){this.isSelected(e)?this.removeSelection(e):this.addSelection(e)}isSelected(e){return this.selection.includes(e)}togglePauseUpdateRect(e){this.pauseUpdateRect=e}getRenderRect(){const e=this.getBoundingRect();return Ee(e,Ws.SIZE)}getBoundingRect(){const e=this.getRect();if(this.selection.length===1){const n=_a({...e,transform:this.getWorldTransform()});return ui(n)}else return e}getSelectionList(){return[...this.selection]}isOneLink(){return this.selection.length===1&&this.selection[0]instanceof St}getRect(){return this.rect}setPosition(e,n){}move(e,n){this.selection.forEach(i=>{i.move(e,n)})}setRotate(e){this.rotate=e,this.repaint()}getWorldTransform(){if(this.selection.length===1)return this.selection[0].getWorldTransform();const{x:e,y:n}=this.rect||{x:0,y:0};return[1,0,0,1,e,n]}paintTop(e){if(this.selection.length>0){e.save();const{width:n,height:i}=this.rect,o=this.getWorldTransform();e.transform(...o),this.selection.length>1&&this.rotate&&(e.translate(n/2,i/2),e.rotate(this.rotate),e.translate(-(n/2),-(i/2))),e.beginPath(),e.roundRect(0,0,n,i,2),e.strokeStyle=Ae.SELECTION_STROKE_COLOR,e.lineWidth=2,e.setLineDash(Ae.SELECTION_LINE_DASH),e.stroke(),e.translate(0,0),this.isOneLink()||(this.resizers.forEach(r=>{r.updatePosition(),r.paint(e)}),this.rotator.updatePosition(),this.rotator.paint(e)),e.restore()}}paintRoot(e){}getControlAt(e){if(this.selection.length===0)return;const n=this.getRenderRect();if(!he(e,n))return;const i=this.resizers.find(o=>o.hitTest(e.x,e.y));if(i)return i;if(this.rotator.hitTest(e.x,e.y))return this.rotator}getActiveControl(){return this.activeControl}setActiveControl(e){e!==this.activeControl&&(this.activeControl=e,this.emit(M.change))}dispose(){this.clear(),this.editor.box.off(ds.removeModels,e=>{e.forEach(n=>{this.isSelected(n)&&this.removeSelection(n)})}),this.resizers.forEach(e=>e.dispose()),this.rotator.dispose()}};p(Ae,"SELECTION_STROKE_COLOR","#0f8eff"),p(Ae,"SELECTION_LINE_DASH",[5,5]);let _i=Ae;class Cu extends Kt{constructor(e){super();p(this,"gap",20);p(this,"dirty",!0);p(this,"repaint",()=>{this.emit(M.REPAINT)});this.editor=e,e.viewportManager.on(M.change,this.repaint)}paintRoot(e){if(!this.dirty)return;const n=this.gap,{x:i,y:o,width:r,height:a}=this.editor.viewportManager.getViewRect(),l=Math.ceil(i/n)*n;for(let h=l;h<=i+r;h+=n)e.beginPath(),e.moveTo(h,o),e.lineTo(h,o+a),e.lineWidth=1,e.strokeStyle=h%(n*5)===0?"#ddd":"#eee",e.stroke();const c=Math.ceil(o/n)*n;for(let h=c;h<=o+a;h+=n)e.beginPath(),e.moveTo(i,h),e.lineTo(i+r,h),e.lineWidth=1,e.strokeStyle=h%(n*5)===0?"#ddd":"#eee",e.stroke()}paintTop(e){}dispose(){this.clear(),this.editor.viewportManager.off(M.change,this.repaint)}}class Tu{constructor(s){this.editor=s}show(s,e,n){}}var vs=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.VERTICAL_CENTER="verticalCenter",t.HORIZONTAL_CENTER="horizontalCenter",t))(vs||{});class xu{constructor(s){this.editor=s}align(s,e){const n=s.map(a=>a.getBoundingBox()),i=s.map(a=>a.getWorldTransform()),o=Ea(n);let r=!1;switch(e){case"top":r=this.alignTop(s,o,n,i);break;case"right":r=this.alignRight(s,o,n,i);break;case"bottom":r=this.alignBottom(s,o,n,i);break;case"left":r=this.alignLeft(s,o,n,i)}if(r){const a=s.map(c=>c.getWorldTransform()),l={undo:()=>{s.forEach((c,h)=>{c.setWorldTransform(i[h])})},redo:()=>{s.forEach((c,h)=>{c.setWorldTransform(a[h])})}};this.editor.actionManager.push(l)}}alignTop(s,e,n,i){let o=!1;return s.forEach((r,a)=>{const l=e.minY-n[a].minY;l!==0&&(o=!0,this.updateModel(r,i[a],0,l))}),o}alignBottom(s,e,n,i){let o=!1;return s.forEach((r,a)=>{const l=e.maxY-n[a].maxY;l!==0&&(o=!0,this.updateModel(r,i[a],0,l))}),o}alignLeft(s,e,n,i){let o=!1;return s.forEach((r,a)=>{const l=e.minX-n[a].minX;l!==0&&(o=!0,this.updateModel(r,i[a],l,0))}),o}alignRight(s,e,n,i){let o=!1;return s.forEach((r,a)=>{const l=e.maxX-n[a].maxX;l!==0&&(o=!0,this.updateModel(r,i[a],l,0))}),o}updateModel(s,e,n,i){const o=io(e);o[4]+=n,o[5]+=i,s.setWorldTransform(o)}}class Mu{constructor(s){p(this,"rootCanvas");p(this,"rootCtx");p(this,"mainCanvas");p(this,"mainCtx");p(this,"topCanvas");p(this,"topCtx");p(this,"eventManager");p(this,"viewportManager");p(this,"actionManager");p(this,"selectionManager");p(this,"grid");p(this,"dirtyList",new Set);p(this,"paintAll",!0);p(this,"frameRects",new Map);p(this,"plugins",[]);p(this,"pluginsDirty",!0);p(this,"showPerformance",!0);p(this,"box",new yu);p(this,"textInput",new Tu(this));p(this,"alignManager",new xu(this));p(this,"resize",()=>{const{width:s,height:e}=this.container.getBoundingClientRect();zn(this.rootCanvas,s,e),zn(this.mainCanvas,s,e),zn(this.topCanvas,s,e),this.paintAll=!0,this.pluginsDirty=!0});p(this,"repaintPlugin",()=>{this.pluginsDirty=!0});p(this,"repaint",()=>{const s=Date.now();this.paintAll?this.fullRepaint():this.dirtyList.size&&this.partRepaint(),this.pluginsDirty&&(this.paintTop(),this.paintRoot());const e=Date.now()-s;this.showPerformance&&this.paintPerformance(e),this.pluginsDirty=!1,this.paintAll=!1,this.dirtyList.clear(),requestAnimationFrame(this.repaint)});this.container=s,s.style.position="relative",[this.rootCanvas,this.rootCtx]=this.createCanvas(),[this.mainCanvas,this.mainCtx]=this.createCanvas(),[this.topCanvas,this.topCtx]=this.createCanvas(),this.resize(),this.actionManager=new Mi,this.eventManager=new xi(this),this.installPlugin(this.eventManager),this.selectionManager=new _i(this),this.installPlugin(this.selectionManager),this.viewportManager=new ms(this),this.installPlugin(this.viewportManager),this.viewportManager.on(M.change,()=>{this.paintAll=!0,this.pluginsDirty=!0}),this.grid=new Cu(this),this.installPlugin(this.grid),this.box.on(ds.modelsChange,e=>{e.forEach(n=>this.dirtyList.add(n))}),this.box.on(ds.removeModels,e=>{e.forEach(n=>this.frameRects.delete(n.id))}),requestAnimationFrame(this.repaint)}createCanvas(){const s=document.createElement("canvas");s.setAttribute("tabindex","-1");const e=s.getContext("2d");return Object.assign(s.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}),this.container.appendChild(s),window.addEventListener("resize",this.resize),[s,e]}installPlugin(s){s.on(M.REPAINT,this.repaintPlugin),this.plugins.push(s)}paintPerformance(s){let e=60;s>17&&(e=1e3/s);const n=`FPS:${parseInt(e+"")}`,i=this.topCtx;i.save(),i.setTransform(1,0,0,1,0,0),i.font="30px Arial",i.fillStyle="#f00";const o=i.measureText(n).width,r=this.topCanvas.width;i.fillText(n,r-10-o,40),i.restore()}getElementsAt(s){const{x:e,y:n}=this.viewportManager.getCursorScenePoint(s),i=[];return this.box.reverseEach(o=>{o.hitTest(e,n)&&i.push(o)}),i}getElementAt(s){const{x:e,y:n}=this.viewportManager.getCursorScenePoint(s);let i=null,o=null;return this.box.reverseEach(r=>{const a=r.hitTest(e,n);if(a)return i=r,typeof a!="boolean"&&(o=a),!0}),i?{model:i,control:o}:null}fullRepaint(){const s=this.mainCtx;s.save(),s.setTransform(1,0,0,1,0,0);const e=this.viewportManager.getViewport();s.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const n=Qe(),i=this.viewportManager.getZoom(),o=-e.x,r=-e.y;s.scale(n*i,n*i),s.translate(o,r),this.box.each(a=>{this.paintModel(a,s)}),s.restore()}findDirtyRect(){if(this.dirtyList.size===0)return{rect:{x:0,y:0,width:0,height:0},models:new Set};const s=this.viewportManager.getViewRect(),e=new Set(this.dirtyList),n=this.box.getModelList(),i=[...e].reduce((r,a)=>{r.push(a.getRenderRect());const l=this.frameRects.get(a.id);return l&&r.push(l),r},[]);let o=fr(...i);for(let r=0;r<n.length;r++){const a=n[r];if(e.has(a))continue;const l=a.getRenderRect();hi(l,s)&&hi(l,o)&&(e.add(a),o=fr(l,o),r=-1)}return{rect:o,models:e}}partRepaint(){const{rect:s,models:e}=this.findDirtyRect();if(!e.size)return;const n=this.mainCtx;n.save(),n.setTransform(1,0,0,1,0,0);const i=this.viewportManager.getViewport(),o=Qe(),r=this.viewportManager.getZoom(),a=-i.x,l=-i.y;n.scale(o*r,o*r),n.translate(a,l),n.clearRect(s.x,s.y,s.width,s.height),this.box.each(c=>{e.has(c)&&this.paintModel(c,n)}),n.restore()}paintModel(s,e){if(this.box.has(s)){const n=s.getRenderRect();this.frameRects.set(s.id,{...n}),Nn(e),s.beforePaint(e,this),s.paint(e),s.afterPaint(e,this)}else this.frameRects.delete(s.id)}paintTop(){const s=this.topCtx;s.save(),s.setTransform(1,0,0,1,0,0);const e=this.viewportManager.getViewport();s.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const n=Qe(),i=this.viewportManager.getZoom(),o=-e.x,r=-e.y;s.scale(n*i,n*i),s.translate(o,r),this.plugins.forEach(a=>{Nn(s),a.paintTop(s)}),s.restore()}paintRoot(){const s=this.rootCtx;s.save(),s.setTransform(1,0,0,1,0,0);const e=this.viewportManager.getViewport();s.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const n=Qe(),i=this.viewportManager.getZoom(),o=-e.x,r=-e.y;s.scale(n*i,n*i),s.translate(o,r),this.plugins.forEach(a=>{Nn(s),a.paintRoot(s)}),s.restore()}addModel(s){this.box.addModel(s);const e={undo:()=>{this.box.removeModel(s)},redo:()=>{this.box.addModel(s),s.reset()}};this.actionManager.push(e)}removeModel(s){const e=new Set;e.add(s),this.box.each(o=>{if(o instanceof St){const r=o.getStartHost(),a=o.getEndHost();(r===s||a===s)&&e.add(o)}});const n=[...e];this.box.removeModels(n);const i={undo:()=>{this.box.addModels(n),n.forEach(o=>o.reset())},redo:()=>{this.box.removeModels(n)}};this.actionManager.push(i)}removeModels(s){const e=new Set(s);this.box.each(o=>{if(o instanceof St){const r=o.getStartHost(),a=o.getEndHost();(e.has(r)||a&&e.has(a))&&e.add(o)}});const n=[...e];this.box.removeModels(n);const i={undo:()=>{this.box.addModels(n),n.forEach(o=>o.reset())},redo:()=>{this.box.removeModels(n)}};this.actionManager.push(i)}removeSelection(){const s=this.selectionManager.getSelectionList();s.length>0&&(this.removeModels(s),this.selectionManager.clearSelection())}getShowPerformance(){return this.showPerformance}setShowPerformance(s){this.showPerformance=s}dispose(){this.box.dispose(),this.eventManager.dispose(),this.viewportManager.dispose(),this.actionManager.dispose(),this.selectionManager.dispose(),this.grid.dispose()}getSceneData(){const s=[];this.box.each(o=>{const r=o.toJson();s.push(r)});const e=this.viewportManager.getViewport(),n=e.x,i=e.y;return{models:s,viewport:{x:n,y:i,zoom:this.viewportManager.getZoom()}}}parseSceneData(s,e){this.box.removeAll();const n=[];s.models.forEach(i=>{const o=e.parseJson(i,n);n.push(o)}),this.box.addModels(n)}}var Vn;let Zt=(Vn=class extends Kt{constructor(e){super();p(this,"statusChange",()=>{this.emit(M.change)});this.editor=e}isActive(){return!1}dispose(){this.clear()}},p(Vn,"name"),Vn);const Zs=class Zs extends Zt{constructor(s){super(s),s.selectionManager.on(M.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const s=this.getTargetList();this.editor.alignManager.align(s,vs.BOTTOM)}getName(){return Zs.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(s=>!(s instanceof St))}};p(Zs,"name","alignBottom");let Ei=Zs;const qs=class qs extends Zt{constructor(s){super(s),s.selectionManager.on(M.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const s=this.getTargetList();this.editor.alignManager.align(s,vs.LEFT)}getName(){return qs.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(s=>!(s instanceof St))}};p(qs,"name","alignLeft");let Pi=qs;const js=class js extends Zt{constructor(s){super(s),s.selectionManager.on(M.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const s=this.getTargetList();this.editor.alignManager.align(s,vs.RIGHT)}getName(){return js.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(s=>!(s instanceof St))}};p(js,"name","alignRight");let Oi=js;const Js=class Js extends Zt{constructor(s){super(s),s.selectionManager.on(M.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const s=this.getTargetList();this.editor.alignManager.align(s,vs.TOP)}getName(){return Js.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(s=>!(s instanceof St))}};p(Js,"name","alignTop");let Ri=Js;const Qs=class Qs extends Zt{constructor(s){super(s),s.actionManager.on(M.change,this.statusChange)}isEnable(){return this.editor.actionManager.undoable()}execute(){this.editor.actionManager.undo()}getName(){return Qs.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}};p(Qs,"name","undo");let Ii=Qs;const tn=class tn extends Zt{constructor(s){super(s),s.actionManager.on(M.change,this.statusChange)}isEnable(){return this.editor.actionManager.redoable()}execute(){this.editor.actionManager.redo()}getName(){return tn.name}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}};p(tn,"name","redo");let Li=tn;const en=class en extends Zt{constructor(s){super(s),s.viewportManager.on(ps.ZOOM_CHANGE,this.statusChange)}execute(){const s=this.editor.viewportManager.getViewRect(),e={x:s.x+s.width/2,y:s.y+s.height/2};this.editor.viewportManager.zoomIn(e)}isEnable(){return this.editor.viewportManager.getZoom()>ms.MIN_ZOOM}dispose(){super.dispose(),this.editor.viewportManager.off(ps.ZOOM_CHANGE,this.statusChange)}getLabel(){return""}getName(){return en.name}};p(en,"name","zoomIn");let Si=en;const sn=class sn extends Zt{constructor(s){super(s),s.viewportManager.on(ps.ZOOM_CHANGE,this.statusChange)}execute(){const s=this.editor.viewportManager.getViewRect(),e={x:s.x+s.width/2,y:s.y+s.height/2};this.editor.viewportManager.zoomOut(e)}isEnable(){return this.editor.viewportManager.getZoom()<ms.MAX_ZOOM}dispose(){super.dispose(),this.editor.viewportManager.off(ps.ZOOM_CHANGE,this.statusChange)}getLabel(){return""}getName(){return sn.name}};p(sn,"name","zoomOut");let Ai=sn;const nn=class nn extends Zt{constructor(s){super(s),s.selectionManager.on(M.change,this.statusChange)}execute(){this.editor.removeSelection()}isEnable(){return this.editor.selectionManager.getSelectionList().length>0}dispose(){super.dispose(),this.editor.selectionManager.off(M.change,this.statusChange)}getName(){return nn.name}getLabel(){return""}};p(nn,"name","delete");let $i=nn;const on=class on extends Zt{constructor(s){super(s)}isEnable(){return!0}execute(){this.editor.setShowPerformance(!this.editor.getShowPerformance()),this.emit(M.change)}getName(){return on.name}isActive(){return this.editor.getShowPerformance()}dispose(){super.dispose(),this.editor.actionManager.off(M.change,this.statusChange)}getLabel(){return""}};p(on,"name","performance");let Hi=on;var Ia=_e({name:"Editor",__name:"Editor",emits:["ready"],setup(t,{expose:s,emit:e}){const n=e,i=Ue("container"),o=ls(),r=ls();return qi(()=>{r.value=dn(new Mu(o.value)),n("ready",r.value)}),s({getEditor:()=>r.value}),(l,c)=>(X(),Q("div",{ref_key:"editorRef",ref:o,class:yt([lt(i).b()])},null,2))}});Ia.__file="src/frameworks/vue/editor/Editor.vue";var oo={name:"AlignBottom"};const _u={style:{transform:"rotateX(180deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Eu=G("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Pu=[Eu];function Ou(t,s,e,n,i,o){return X(),Q("svg",_u,[...Pu])}oo.render=Ou;oo.__file="src/frameworks/vue/icons/align-bottom.vue";var ro={name:"AlignLeft"};const Ru={style:{transform:"rotate(-90deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Iu=G("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Lu=[Iu];function Su(t,s,e,n,i,o){return X(),Q("svg",Ru,[...Lu])}ro.render=Su;ro.__file="src/frameworks/vue/icons/align-left.vue";var ao={name:"AlignRight"};const Au={style:{transform:"rotate(90deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},$u=G("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Hu=[$u];function Bu(t,s,e,n,i,o){return X(),Q("svg",Au,[...Hu])}ao.render=Bu;ao.__file="src/frameworks/vue/icons/align-right.vue";var lo={name:"AlignTop"};const Du={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Fu=G("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),ku=[Fu];function zu(t,s,e,n,i,o){return X(),Q("svg",Du,[...ku])}lo.render=zu;lo.__file="src/frameworks/vue/icons/align-top.vue";var co={name:"Delete"};const Nu={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"3095","xmlns:xlink":"http://www.w3.org/1999/xlink"},Wu=G("path",{d:"M847.743 223.953H640.639c-3.132-68.921-60.177-124.029-129.858-124.029s-126.726 55.108-129.858 124.029H173.256c-17.673 0-32 14.327-32 32s14.327 32 32 32h674.487c17.673 0 32-14.327 32-32s-14.327-32-32-32z m-336.962-60.03c34.379 0 62.689 26.426 65.718 60.029H445.064c3.029-33.603 31.338-60.029 65.717-60.029zM767.743 351.79c-17.673 0-32 14.327-32 32v478.173H288.256V383.79c0-17.673-14.327-32-32-32s-32 14.327-32 32v510.173c0 17.673 14.327 32 32 32h511.487c17.673 0 32-14.327 32-32V383.79c0-17.673-14.327-32-32-32z","p-id":"3096"},null,-1),Uu=G("path",{d:"M449.306 732.802V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999z m191.534 0V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999z","p-id":"3097"},null,-1),Yu=[Wu,Uu];function Vu(t,s,e,n,i,o){return X(),Q("svg",Nu,[...Yu])}co.render=Vu;co.__file="src/frameworks/vue/icons/delete.vue";var ho={name:"Diamond"};const Xu={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"9700","xmlns:xlink":"http://www.w3.org/1999/xlink"},Gu=G("path",{d:"M512 0l512 512-512 512-512-512 512-512z m0 80.497778L80.497778 512 512 943.502222 943.502222 512 512 80.497778z",fill:"currentColor"},null,-1),Ku=[Gu];function Zu(t,s,e,n,i,o){return X(),Q("svg",Xu,[...Ku])}ho.render=Zu;ho.__file="src/frameworks/vue/icons/diamond.vue";var uo={name:"Ellipse"};const qu={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"6138","xmlns:xlink":"http://www.w3.org/1999/xlink"},ju=G("path",{d:"M512 998.4C243.776 998.4 25.6 780.224 25.6 512S243.776 25.6 512 25.6s486.4 218.176 486.4 486.4-218.176 486.4-486.4 486.4zM512 76.8C272 76.8 76.8 272 76.8 512s195.2 435.2 435.2 435.2 435.2-195.2 435.2-435.2S752 76.8 512 76.8z","p-id":"6139",fill:"currentColor"},null,-1),Ju=[ju];function Qu(t,s,e,n,i,o){return X(),Q("svg",qu,[...Ju])}uo.render=Qu;uo.__file="src/frameworks/vue/icons/ellipse.vue";var fo={name:"Github"};const tf={t:"1721741479435",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7731","xmlns:xlink":"http://www.w3.org/1999/xlink"},ef=G("path",{d:"M64 512c0 195.2 124.8 361.6 300.8 422.4 22.4 6.4 19.2-9.6 19.2-22.4v-76.8c-134.4 16-140.8-73.6-150.4-89.6-19.2-32-60.8-38.4-48-54.4 32-16 64 3.2 99.2 57.6 25.6 38.4 76.8 32 105.6 25.6 6.4-22.4 19.2-44.8 35.2-60.8-144-22.4-201.6-108.8-201.6-211.2 0-48 16-96 48-131.2-22.4-60.8 0-115.2 3.2-121.6 57.6-6.4 118.4 41.6 124.8 44.8 32-9.6 70.4-12.8 112-12.8 41.6 0 80 6.4 112 12.8 12.8-9.6 67.2-48 121.6-44.8 3.2 6.4 25.6 57.6 6.4 118.4 32 38.4 48 83.2 48 131.2 0 102.4-57.6 188.8-201.6 214.4 22.4 22.4 38.4 54.4 38.4 92.8v112c0 9.6 0 19.2 16 19.2C832 876.8 960 710.4 960 512c0-246.4-201.6-448-448-448S64 265.6 64 512z",fill:"currentColor","p-id":"7732"},null,-1),sf=[ef];function nf(t,s,e,n,i,o){return X(),Q("svg",tf,[...sf])}fo.render=nf;fo.__file="src/frameworks/vue/icons/github.vue";var go={name:"Performance"};const of={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"5163","xmlns:xlink":"http://www.w3.org/1999/xlink"},rf=G("path",{d:"M461.223546 894.876154c-1.062192 0-2.099824-0.048095-3.162016-0.193405-11.732206-1.497097-20.736277-11.103896-21.532409-22.884197l-40.336684-605.249801L287.129486 630.065999c-3.186576 10.670014-14.097066 17.911952-24.260543 17.621333-11.128455-0.2415-20.711717-7.91732-23.390733-18.732643l-38.864146-155.385976-68.000743 68.000743c-4.634554 4.634554-10.911514 7.241938-17.477047 7.241938L65.698305 548.811394l0-49.437969 39.20286 0 91.634-91.634c6.300496-6.300496 15.425318-8.810666 24.067138-6.348592 8.593725 2.38942 15.231913 9.197476 17.380856 17.839297l27.6395 110.48637 122.460076-408.222425c3.451612-11.466146 14.677281-18.732643 26.456558-17.477047 11.876492 1.351787 21.097504 11.007705 21.894659 22.932292l41.061185 616.136755 108.555391-325.68971c3.186576-9.487072 11.732206-16.125259 21.725814-16.825201 10.041704-0.627287 19.408025 4.634554 23.850198 13.59053l76.763314 153.526629 27.326369-54.651714c4.200672-8.376785 12.745279-13.663184 22.1116-13.663184l197.750853 0 0 49.437969L773.08225 548.811394l-42.581818 85.212754c-8.400321 16.70445-35.82288 16.70445-44.223201 0l-72.176856-144.378272L484.638839 877.978299C481.259882 888.165312 471.724715 894.876154 461.223546 894.876154z",fill:"currentColor","p-id":"5164"},null,-1),af=[rf];function lf(t,s,e,n,i,o){return X(),Q("svg",of,[...af])}go.render=lf;go.__file="src/frameworks/vue/icons/performance.vue";var po={name:"Rect"};const cf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},hf=G("path",{d:"M898.8 199.6v624.8H125.2V199.6h773.6m59.5-59.5H65.7v743.8h892.5V140.1h0.1z","p-id":"905"},null,-1),uf=[hf];function ff(t,s,e,n,i,o){return X(),Q("svg",cf,[...uf])}po.render=ff;po.__file="src/frameworks/vue/icons/rect.vue";var mo={name:"Redo"};const df={style:{transform:"rotateY(180deg)"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},gf=G("path",{d:"M596.16 284.064H258.56l101.376-101.44a31.968 31.968 0 1 0-45.248-45.216L178.56 273.504c-11.904 11.872-18.496 27.84-18.56 44.8a63.04 63.04 0 0 0 18.56 45.28l136.128 136.16a31.904 31.904 0 0 0 45.248 0 31.968 31.968 0 0 0 0-45.248l-106.752-106.496H596.16c114.88 0 208.32 93.312 208.32 208s-93.44 208-208.32 208h-223.36a32 32 0 0 0 0 64h223.36c150.144 0 272.32-122.016 272.32-272 0-149.984-122.176-272-272.32-272",fill:"currentColor","p-id":"1124"},null,-1),pf=[gf];function mf(t,s,e,n,i,o){return X(),Q("svg",df,[...pf])}mo.render=mf;mo.__file="src/frameworks/vue/icons/redo.vue";var vo={name:"Save"};const vf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"8002","xmlns:xlink":"http://www.w3.org/1999/xlink"},wf=G("path",{d:"M814.805 128a51.179 51.179 0 0 1 51.179 51.179V844.01a51.179 51.179 0 0 1-51.179 51.157H201.173a51.179 51.179 0 0 1-51.178-51.157V179.179A51.179 51.179 0 0 1 201.173 128h613.654zM329.024 434.837a51.093 51.093 0 0 1-51.179-51.093V179.157h-76.672v664.854h613.76V179.179H738.22v204.48a51.179 51.179 0 0 1-51.179 51.178H329.024z m0-51.093h357.995V179.157H329.024v204.587z m357.91 204.501a25.557 25.557 0 1 1 0.085 51.072H329.024a25.536 25.536 0 1 1 0-51.072h357.91z",fill:"currentColor","p-id":"8003"},null,-1),yf=[wf];function bf(t,s,e,n,i,o){return X(),Q("svg",vf,[...yf])}vo.render=bf;vo.__file="src/frameworks/vue/icons/save.vue";var wo={name:"Terminator"};const Cf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Tf=G("path",{d:"M717 256q52.5 0 99.5 20.5 46.5 20 81.5 55 34.5 34.5 55 81 20 46.5 20 99.5t-20 99.5q-20.5 46.5-55 81.5-35 34.5-81.5 55-47 20-99.5 20H307q-52.5 0-99-20-47-20.5-81.5-55-35-35-55-81.5-20.5-46.5-20.5-99.5t20.5-99.5q20-46.5 55-81 34.5-35 81.5-55 46.5-20.5 99-20.5m410 461q42 0 79.5-16 37-16.5 65-44 27.5-28 44-65 16-37.5 16-80t-16-79.5q-16.5-37.5-44-65-28-28-65-44-37.5-16.5-79.5-16.5H307q-42 0-79 16.5-37.5 16-65 44-28 27.5-44 65-16.5 37-16.5 79.5t16.5 80q16 37 44 65 27.5 27.5 65 44 37 16 79 16z",fill:"currentColor","p-id":"5170"},null,-1),xf=G("path",{d:"M307 742.5q-47.5 0-89.5-18-42-18.5-73-49.5-31.5-31.5-49.5-73.5t-18-89.5q0-47.5 18-89.5t49.5-73q31-31.5 73-49.5 42-18.5 89.5-18.5h410q47.5 0 89.5 18.5 42 18 73.5 49.5 31 31 49 73t18 89.5q0 47.5-18 89.5t-49 73.5q-31.5 31-73.5 49.5-42 18-89.5 18z",fill:"#FAFAFA","p-id":"5171"},null,-1),Mf=G("path",{d:"M717 256q52.5 0 99.5 20.5 46.5 20 81.5 55 34.5 34.5 55 81 20 46.5 20 99.5t-20 99.5q-20.5 46.5-55 81.5-35 34.5-81.5 55-47 20-99.5 20H307q-52.5 0-99-20-47-20.5-81.5-55-35-35-55-81.5-20.5-46.5-20.5-99.5t20.5-99.5q20-46.5 55-81 34.5-35 81.5-55 46.5-20.5 99-20.5m410 461q42 0 79.5-16 37-16.5 65-44 27.5-28 44-65 16-37.5 16-80t-16-79.5q-16.5-37.5-44-65-28-28-65-44-37.5-16.5-79.5-16.5H307q-42 0-79 16.5-37.5 16-65 44-28 27.5-44 65-16.5 37-16.5 79.5t16.5 80q16 37 44 65 27.5 27.5 65 44 37 16 79 16z",fill:"currentColor","p-id":"5172"},null,-1),_f=[Tf,xf,Mf];function Ef(t,s,e,n,i,o){return X(),Q("svg",Cf,[..._f])}wo.render=Ef;wo.__file="src/frameworks/vue/icons/terminator.vue";var yo={name:"Undo"};const Pf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"1123","xmlns:xlink":"http://www.w3.org/1999/xlink"},Of=G("path",{d:"M596.16 284.064H258.56l101.376-101.44a31.968 31.968 0 1 0-45.248-45.216L178.56 273.504c-11.904 11.872-18.496 27.84-18.56 44.8a63.04 63.04 0 0 0 18.56 45.28l136.128 136.16a31.904 31.904 0 0 0 45.248 0 31.968 31.968 0 0 0 0-45.248l-106.752-106.496H596.16c114.88 0 208.32 93.312 208.32 208s-93.44 208-208.32 208h-223.36a32 32 0 0 0 0 64h223.36c150.144 0 272.32-122.016 272.32-272 0-149.984-122.176-272-272.32-272",fill:"currentColor","p-id":"1124"},null,-1),Rf=[Of];function If(t,s,e,n,i,o){return X(),Q("svg",Pf,[...Rf])}yo.render=If;yo.__file="src/frameworks/vue/icons/undo.vue";var bo={name:"ZoomIn"};const Lf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Sf=G("path",{d:"M598.646154 401.723077H279.630769c-15.753846 0-27.569231 11.815385-27.569231 31.507692 0 15.753846 11.815385 27.569231 31.507693 27.569231h319.015384c15.753846 0 27.569231-11.815385 27.569231-31.507692 0-15.753846-15.753846-27.569231-31.507692-27.569231z",fill:"currentColor","p-id":"967"},null,-1),Af=G("path",{d:"M921.6 850.707692l-204.8-196.923077c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l204.8 196.923077c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-15.753846 11.815385-35.446154 0-43.323077z m-484.430769-126.030769c-161.476923 0-295.384615-133.907692-295.384616-295.384615S275.692308 133.907692 437.169231 133.907692s295.384615 133.907692 295.384615 295.384616-129.969231 295.384615-295.384615 295.384615z",fill:"currentColor"},null,-1),$f=[Sf,Af];function Hf(t,s,e,n,i,o){return X(),Q("svg",Lf,[...$f])}bo.render=Hf;bo.__file="src/frameworks/vue/icons/zoom-in.vue";var Co={name:"ZoomOut"};const Bf={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Df=G("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z",fill:"currentColor","p-id":"1129"},null,-1),Ff=G("path",{d:"M652.672 431.829333h-147.84V292.010667a35.968 35.968 0 1 0-71.978667 0v139.818666H292.010667a35.968 35.968 0 1 0 0 72.021334h140.8v140.8a35.968 35.968 0 1 0 72.021333 0v-140.8h147.84a35.968 35.968 0 1 0 0-72.021334z",fill:"currentColor"},null,-1),kf=[Df,Ff];function zf(t,s,e,n,i,o){return X(),Q("svg",Bf,[...kf])}Co.render=zf;Co.__file="src/frameworks/vue/icons/zoom-out.vue";var La=_e({__name:"Icon",setup(t){const s=Ue("icon");return(e,n)=>(X(),Q("div",{class:yt([lt(s).b()])},[ra(e.$slots,"default")],2))}});La.__file="src/frameworks/vue/components/icon/Icon.vue";const Nf=["title"];var Sa=_e({__name:"ToolbarButton",props:{command:{type:Object,required:!0},getIcon:{type:Function}},setup(t){var h;const s=Ue("toolbar"),e=t,n={undo:yo,redo:mo,zoomOut:Co,zoomIn:bo,delete:co,performance:go,save:vo,alignTop:lo,alignBottom:oo,alignLeft:ro,alignRight:ao},i=((h=e.getIcon)==null?void 0:h.call(e,e.command.getName()))||n[e.command.getName()],o=ls(e.command.isEnable()),r=ls(e.command.isActive()),a=e.command.getLabel(),l=()=>{o.value&&e.command.execute()},c=()=>{o.value=e.command.isEnable(),r.value=e.command.isActive()};return e.command.on(M.change,c),ji(()=>{e.command.off(M.change,c)}),(d,f)=>(X(),Q("div",{title:lt(a),class:yt([lt(s).e("button"),lt(s).is("disabled",!o.value),lt(s).is("active",r.value)]),onClick:l},[ft(La,null,{default:mn(()=>[(X(),oe(ti(lt(i))))]),_:1})],10,Nf))}});Sa.__file="src/frameworks/vue/toolbar/ToolbarButton.vue";var Aa=_e({name:"Toolbar",__name:"Toolbar",props:{commands:{type:Array,required:!0},getIcon:{type:Function}},setup(t){const s=Ue("toolbar");return(e,n)=>(X(),Q("div",{class:yt([lt(s).b()])},[(X(!0),Q(xt,null,ei(t.commands,i=>(X(),oe(Sa,{"get-icon":t.getIcon,command:i,key:i.getName()},null,8,["get-icon","command"]))),128))],2))}});Aa.__file="src/frameworks/vue/toolbar/Toolbar.vue";function Wf(t){return[new Ii(t),new Li(t),new Ai(t),new Si(t),new $i(t),new Hi(t),new Ri(t),new Ei(t),new Pi(t),new Oi(t)]}var $a=_e({__name:"LibraryCollapse",props:{title:{type:String,required:!0}},setup(t){const s=Ue("library-collapse"),e={beforeEnter(o){o.style.maxHeight=0},enter(o){o.style.maxHeight=`${o.scrollHeight}px`},afterEnter(o){o.style.maxHeight=""},beforeLeave(o){o.style.maxHeight=`${o.scrollHeight}px`},leave(o){o.style.maxHeight=0},afterLeave(o){o.style.maxHeight=""}},n=ls(!1),i=()=>{n.value=!n.value};return(o,r)=>(X(),Q("div",{class:yt([lt(s).b(),lt(s).is("collapsed",n.value)])},[G("div",{onClick:i,class:yt(lt(s).e("header"))},[G("div",{class:yt(lt(s).e("arrow"))},null,2),G("div",{class:yt(lt(s).e("title"))},sl(t.title),3)],2),ft(no,ya(fc(e),{persisted:""}),{default:mn(()=>[jl(G("div",{class:yt(lt(s).e("content"))},[ra(o.$slots,"default")],2),[[Ch,!n.value]])]),_:3},16)],2))}});$a.__file="src/frameworks/vue/library/LibraryCollapse.vue";var Uf=[];for(var Un=0;Un<256;++Un)Uf.push((Un+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Yf=(t,s)=>{let e=!1,n=s.pageX,i=s.pageY;const o=a=>{var h,d;const l=a.pageX-n,c=a.pageY-i;e||(e=!0,(h=t.onDragStart)==null||h.call(t,a)),(d=t.onDragMove)==null||d.call(t,a,[l,c])},r=a=>{var l;e&&((l=t.onDragEnd)==null||l.call(t,a)),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r),window.removeEventListener("mouseleave",r)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",r),window.addEventListener("mouseleave",r)},Ha=Symbol();function Vf(){const t=[],s={editor:null,modelManager:new bu},e={setEditor(n){s.editor=n,t.forEach(i=>{i(n)}),t.length=0},getEditor(){if(!s.editor)throw new Error("editor is not init");return s.editor},getModelManager(){return s.modelManager},register(n){n.forEach(i=>{i.models.forEach(o=>{s.modelManager.register(o)})})},ready(){return new Promise(n=>{s.editor?n(s.editor):t.push(n)})}};return ha(Ha,e),e}function Xf(){const t=ss(Ha,void 0);if(!t)throw new Error("store is not init");return t}const Gf=["onMousedown"],Rs=20;var Ba=_e({name:"Library",__name:"Library",props:{groupList:{type:Array,required:!0}},setup(t){const s=Xf(),e=Ue("library"),n={rect:po,terminator:wo,diamond:ho,ellipse:uo},i=a=>{if(a in n)return n[a]},o=fn({visible:!1,currentCategory:"",left:0,top:0}),r=async(a,l)=>{o.visible=!0,o.currentCategory=l,o.left=a.pageX-Rs,o.top=a.pageY-Rs,Yf({onDragMove(c){o.left=c.pageX-Rs,o.top=c.pageY-Rs},onDragEnd(c){o.visible=!1;const h=s.getEditor(),{x:d,y:f,width:m,height:y}=h.container.getBoundingClientRect();if(c.pageX>=d&&c.pageY>=f&&c.pageX<=d+m&&c.pageY<=f+y){const w=s.getModelManager().getInstance(l),L=h.viewportManager.getScenePoint({x:c.pageX-d,y:c.pageY-f});w.setCenterPosition(L.x,L.y),h.addModel(w)}}},a)};return(a,l)=>(X(),Q("div",{class:yt([lt(e).b()])},[(X(!0),Q(xt,null,ei(t.groupList,c=>(X(),oe($a,{title:c.groupName},{default:mn(()=>[G("div",{class:yt(lt(e).e("list"))},[(X(!0),Q(xt,null,ei(c.models,h=>(X(),Q("div",{onMousedown:d=>r(d,h.CATEGORY),class:yt([lt(e).e("item")])},[(X(),oe(ti(i(h.CATEGORY))))],42,Gf))),256))],2)]),_:2},1032,["title"]))),256)),(X(),oe(Sc,{to:"body"},[o.visible?(X(),Q("div",{key:0,class:yt([lt(e).e("move")]),style:hn({left:`${o.left}px`,top:`${o.top}px`})},[(X(),oe(ti(i(o.currentCategory))))],6)):Dc("v-if",!0)]))],2))}});Ba.__file="src/frameworks/vue/library/Library.vue";const Kf=()=>[{groupId:"base",groupName:"",models:[bi,Ti,wi,yi]}];var Ot=(t=>(t.TOP="top",t.LEFT="left",t.RIGHT="right",t.BOTTOM="bottom",t))(Ot||{});Ot.LEFT+"",Ot.RIGHT+"",Ot.TOP+"",Ot.BOTTOM+"";Ot.LEFT+"",Ot.RIGHT,Ot.TOP+"",Ot.BOTTOM,Ot.BOTTOM+"",Ot.TOP,Ot.RIGHT+"",Ot.LEFT;class Zf{constructor(){p(this,"eventMap",new Map);p(this,"eventMapCache",new Map)}on(s,e){return this.eventMap.has(s)||this.eventMap.set(s,[]),this.eventMap.get(s).push(e),this}emit(s,...e){const n=this.eventMap.get(s);return!n||n.length===0?!1:(n.forEach(i=>{i(...e)}),!0)}off(s,e){if(this.eventMap.has(s)){const n=this.eventMap.get(s).filter(i=>i!==e);n.length?this.eventMap.set(s,n):this.eventMap.delete(s)}return this}clear(){this.eventMapCache.clear();const s=this.eventMap.entries();for(const[e,n]of s)this.eventMapCache.set(e,n);this.eventMap.clear()}reset(){this.eventMap.clear();const s=this.eventMapCache.entries();for(const[e,n]of s)this.eventMap.set(e,n)}}var qf=[];for(var Yn=0;Yn<256;++Yn)qf.push((Yn+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Us=(t=>(t.rectChange="rectChange",t.change="change",t.mouseIn="mouseIn",t.mouseOut="mouseOut",t.mouseDown="mouseDown",t.mouseUp="mouseUp",t.REPAINT="repaint",t))(Us||{});class Da extends Zf{constructor(e){super();p(this,"statusChange",()=>{this.emit(Us.change)});this.editor=e}isActive(){return!1}dispose(){this.clear()}}p(Da,"name");function jf(t){localStorage.setItem("scene-json",JSON.stringify(t))}function Jf(){const t=localStorage.getItem("scene-json");return t?JSON.parse(t):null}class Qf extends Da{constructor(e,n){super(e);p(this,"lastSaveCursor",-1);this.modelManager=n,e.actionManager.on(Us.change,this.statusChange)}isEnable(){return this.editor.actionManager.cursor!==this.lastSaveCursor}execute(){const e=this.editor.getSceneData();jf(e),this.lastSaveCursor=this.editor.actionManager.cursor,this.statusChange()}dispose(){super.dispose(),this.editor.actionManager.off(Us.change,this.statusChange)}getName(){return"save"}getLabel(){return""}}const td={class:"editor-page"},ed={class:"editor-header"},sd={class:"header-toolbar"},nd=G("span",null,"stom",-1),id={class:"editor-content"},od={class:"editor-box"},rd=_e({__name:"App",setup(t){const s=Ho([]),e=Vf(),n=Ho(Kf());e.register(n.value);const i=r=>{e.setEditor(r);const a=e.getModelManager(),l=Jf();l&&r.parseSceneData(l,a);const c=Wf(r);c.push(new Qf(r,a)),s.value=dn(c)},o=()=>{window.open("https://github.com/kkagura/stom")};return(r,a)=>(X(),Q("div",td,[G("div",ed,[G("div",sd,[ft(lt(Aa),{commands:s.value},null,8,["commands"])]),G("div",{onClick:o,class:"header-logo"},[ft(lt(fo),{class:"header-icon"}),nd])]),G("div",id,[ft(lt(Ba),{"group-list":n.value},null,8,["group-list"]),G("div",od,[ft(lt(Ia),{onReady:i})])])]))}});Mh(rd).mount("#app");
