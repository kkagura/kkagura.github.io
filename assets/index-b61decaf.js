var Kc=Object.defineProperty;var Zc=(e,n,t)=>n in e?Kc(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var m=(e,n,t)=>(Zc(e,typeof n!="symbol"?n+"":n,t),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function qr(e,n){const t=Object.create(null),s=e.split(",");for(let i=0;i<s.length;i++)t[s[i]]=!0;return n?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const dt={},mn=[],se=()=>{},Jc=()=>!1,Qc=/^on[^a-z]/,ci=e=>Qc.test(e),Kr=e=>e.startsWith("onUpdate:"),wt=Object.assign,Zr=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},tu=Object.prototype.hasOwnProperty,st=(e,n)=>tu.call(e,n),q=Array.isArray,vn=e=>ui(e)==="[object Map]",cl=e=>ui(e)==="[object Set]",Q=e=>typeof e=="function",mt=e=>typeof e=="string",Jr=e=>typeof e=="symbol",pt=e=>e!==null&&typeof e=="object",ul=e=>pt(e)&&Q(e.then)&&Q(e.catch),hl=Object.prototype.toString,ui=e=>hl.call(e),eu=e=>ui(e).slice(8,-1),fl=e=>ui(e)==="[object Object]",Qr=e=>mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Os=qr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hi=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},nu=/-(\w)/g,ve=hi(e=>e.replace(nu,(n,t)=>t?t.toUpperCase():"")),su=/\B([A-Z])/g,Sn=hi(e=>e.replace(su,"-$1").toLowerCase()),fi=hi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ss=hi(e=>e?`on${fi(e)}`:""),Zn=(e,n)=>!Object.is(e,n),Ri=(e,n)=>{for(let t=0;t<e.length;t++)e[t](n)},Is=(e,n,t)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:t})},iu=e=>{const n=parseFloat(e);return isNaN(n)?e:n},ru=e=>{const n=mt(e)?Number(e):NaN;return isNaN(n)?e:n};let Jo;const qi=()=>Jo||(Jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nt(e){if(q(e)){const n={};for(let t=0;t<e.length;t++){const s=e[t],i=mt(s)?cu(s):Nt(s);if(i)for(const r in i)n[r]=i[r]}return n}else{if(mt(e))return e;if(pt(e))return e}}const ou=/;(?![^(]*\))/g,au=/:([^]+)/,lu=/\/\*[^]*?\*\//g;function cu(e){const n={};return e.replace(lu,"").split(ou).forEach(t=>{if(t){const s=t.split(au);s.length>1&&(n[s[0].trim()]=s[1].trim())}}),n}function z(e){let n="";if(mt(e))n=e;else if(q(e))for(let t=0;t<e.length;t++){const s=z(e[t]);s&&(n+=s+" ")}else if(pt(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}const uu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hu=qr(uu);function dl(e){return!!e||e===""}const bn=e=>mt(e)?e:e==null?"":q(e)||pt(e)&&(e.toString===hl||!Q(e.toString))?JSON.stringify(e,pl,2):String(e),pl=(e,n)=>n&&n.__v_isRef?pl(e,n.value):vn(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[s,i])=>(t[`${s} =>`]=i,t),{})}:cl(n)?{[`Set(${n.size})`]:[...n.values()]}:pt(n)&&!q(n)&&!fl(n)?String(n):n;let Vt;class fu{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vt,!n&&Vt&&(this.index=(Vt.scopes||(Vt.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const t=Vt;try{return Vt=this,n()}finally{Vt=t}}}on(){Vt=this}off(){Vt=this.parent}stop(n){if(this._active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function du(e,n=Vt){n&&n.active&&n.effects.push(e)}function gl(){return Vt}function pu(e){Vt&&Vt.cleanups.push(e)}const to=e=>{const n=new Set(e);return n.w=0,n.n=0,n},ml=e=>(e.w&Be)>0,vl=e=>(e.n&Be)>0,gu=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=Be},mu=e=>{const{deps:n}=e;if(n.length){let t=0;for(let s=0;s<n.length;s++){const i=n[s];ml(i)&&!vl(i)?i.delete(e):n[t++]=i,i.w&=~Be,i.n&=~Be}n.length=t}},Ki=new WeakMap;let zn=0,Be=1;const Zi=30;let te;const tn=Symbol(""),Ji=Symbol("");class eo{constructor(n,t=null,s){this.fn=n,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,du(this,s)}run(){if(!this.active)return this.fn();let n=te,t=Ae;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=te,te=this,Ae=!0,Be=1<<++zn,zn<=Zi?gu(this):Qo(this),this.fn()}finally{zn<=Zi&&mu(this),Be=1<<--zn,te=this.parent,Ae=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){te===this?this.deferStop=!0:this.active&&(Qo(this),this.onStop&&this.onStop(),this.active=!1)}}function Qo(e){const{deps:n}=e;if(n.length){for(let t=0;t<n.length;t++)n[t].delete(e);n.length=0}}let Ae=!0;const yl=[];function Rn(){yl.push(Ae),Ae=!1}function Ln(){const e=yl.pop();Ae=e===void 0?!0:e}function Dt(e,n,t){if(Ae&&te){let s=Ki.get(e);s||Ki.set(e,s=new Map);let i=s.get(t);i||s.set(t,i=to()),wl(i)}}function wl(e,n){let t=!1;zn<=Zi?vl(e)||(e.n|=Be,t=!ml(e)):t=!e.has(te),t&&(e.add(te),te.deps.push(e))}function Me(e,n,t,s,i,r){const o=Ki.get(e);if(!o)return;let a=[];if(n==="clear")a=[...o.values()];else if(t==="length"&&q(e)){const l=Number(s);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),n){case"add":q(e)?Qr(t)&&a.push(o.get("length")):(a.push(o.get(tn)),vn(e)&&a.push(o.get(Ji)));break;case"delete":q(e)||(a.push(o.get(tn)),vn(e)&&a.push(o.get(Ji)));break;case"set":vn(e)&&a.push(o.get(tn));break}if(a.length===1)a[0]&&Qi(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Qi(to(l))}}function Qi(e,n){const t=q(e)?e:[...e];for(const s of t)s.computed&&ta(s);for(const s of t)s.computed||ta(s)}function ta(e,n){(e!==te||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const vu=qr("__proto__,__v_isRef,__isVue"),bl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jr)),yu=no(),wu=no(!1,!0),bu=no(!0),ea=xu();function xu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...t){const s=rt(this);for(let r=0,o=this.length;r<o;r++)Dt(s,"get",r+"");const i=s[n](...t);return i===-1||i===!1?s[n](...t.map(rt)):i}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...t){Rn();const s=rt(this)[n].apply(this,t);return Ln(),s}}),e}function Cu(e){const n=rt(this);return Dt(n,"has",e),n.hasOwnProperty(e)}function no(e=!1,n=!1){return function(s,i,r){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return n;if(i==="__v_raw"&&r===(e?n?Hu:El:n?Ml:Tl).get(s))return s;const o=q(s);if(!e){if(o&&st(ea,i))return Reflect.get(ea,i,r);if(i==="hasOwnProperty")return Cu}const a=Reflect.get(s,i,r);return(Jr(i)?bl.has(i):vu(i))||(e||Dt(s,"get",i),n)?a:_t(a)?o&&Qr(i)?a:a.value:pt(a)?e?ro(a):hs(a):a}}const Tu=xl(),Mu=xl(!0);function xl(e=!1){return function(t,s,i,r){let o=t[s];if(xn(o)&&_t(o)&&!_t(i))return!1;if(!e&&(!$s(i)&&!xn(i)&&(o=rt(o),i=rt(i)),!q(t)&&_t(o)&&!_t(i)))return o.value=i,!0;const a=q(t)&&Qr(s)?Number(s)<t.length:st(t,s),l=Reflect.set(t,s,i,r);return t===rt(r)&&(a?Zn(i,o)&&Me(t,"set",s,i):Me(t,"add",s,i)),l}}function Eu(e,n){const t=st(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&t&&Me(e,"delete",n,void 0),s}function _u(e,n){const t=Reflect.has(e,n);return(!Jr(n)||!bl.has(n))&&Dt(e,"has",n),t}function Pu(e){return Dt(e,"iterate",q(e)?"length":tn),Reflect.ownKeys(e)}const Cl={get:yu,set:Tu,deleteProperty:Eu,has:_u,ownKeys:Pu},Ou={get:bu,set(e,n){return!0},deleteProperty(e,n){return!0}},Su=wt({},Cl,{get:wu,set:Mu}),so=e=>e,di=e=>Reflect.getPrototypeOf(e);function ms(e,n,t=!1,s=!1){e=e.__v_raw;const i=rt(e),r=rt(n);t||(n!==r&&Dt(i,"get",n),Dt(i,"get",r));const{has:o}=di(i),a=s?so:t?ao:Jn;if(o.call(i,n))return a(e.get(n));if(o.call(i,r))return a(e.get(r));e!==i&&e.get(n)}function vs(e,n=!1){const t=this.__v_raw,s=rt(t),i=rt(e);return n||(e!==i&&Dt(s,"has",e),Dt(s,"has",i)),e===i?t.has(e):t.has(e)||t.has(i)}function ys(e,n=!1){return e=e.__v_raw,!n&&Dt(rt(e),"iterate",tn),Reflect.get(e,"size",e)}function na(e){e=rt(e);const n=rt(this);return di(n).has.call(n,e)||(n.add(e),Me(n,"add",e,e)),this}function sa(e,n){n=rt(n);const t=rt(this),{has:s,get:i}=di(t);let r=s.call(t,e);r||(e=rt(e),r=s.call(t,e));const o=i.call(t,e);return t.set(e,n),r?Zn(n,o)&&Me(t,"set",e,n):Me(t,"add",e,n),this}function ia(e){const n=rt(this),{has:t,get:s}=di(n);let i=t.call(n,e);i||(e=rt(e),i=t.call(n,e)),s&&s.call(n,e);const r=n.delete(e);return i&&Me(n,"delete",e,void 0),r}function ra(){const e=rt(this),n=e.size!==0,t=e.clear();return n&&Me(e,"clear",void 0,void 0),t}function ws(e,n){return function(s,i){const r=this,o=r.__v_raw,a=rt(o),l=n?so:e?ao:Jn;return!e&&Dt(a,"iterate",tn),o.forEach((c,u)=>s.call(i,l(c),l(u),r))}}function bs(e,n,t){return function(...s){const i=this.__v_raw,r=rt(i),o=vn(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=i[e](...s),u=t?so:n?ao:Jn;return!n&&Dt(r,"iterate",l?Ji:tn),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Oe(e){return function(...n){return e==="delete"?!1:this}}function Ru(){const e={get(r){return ms(this,r)},get size(){return ys(this)},has:vs,add:na,set:sa,delete:ia,clear:ra,forEach:ws(!1,!1)},n={get(r){return ms(this,r,!1,!0)},get size(){return ys(this)},has:vs,add:na,set:sa,delete:ia,clear:ra,forEach:ws(!1,!0)},t={get(r){return ms(this,r,!0)},get size(){return ys(this,!0)},has(r){return vs.call(this,r,!0)},add:Oe("add"),set:Oe("set"),delete:Oe("delete"),clear:Oe("clear"),forEach:ws(!0,!1)},s={get(r){return ms(this,r,!0,!0)},get size(){return ys(this,!0)},has(r){return vs.call(this,r,!0)},add:Oe("add"),set:Oe("set"),delete:Oe("delete"),clear:Oe("clear"),forEach:ws(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=bs(r,!1,!1),t[r]=bs(r,!0,!1),n[r]=bs(r,!1,!0),s[r]=bs(r,!0,!0)}),[e,t,n,s]}const[Lu,Au,Iu,$u]=Ru();function io(e,n){const t=n?e?$u:Iu:e?Au:Lu;return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(st(t,i)&&i in s?t:s,i,r)}const ku={get:io(!1,!1)},Bu={get:io(!1,!0)},Du={get:io(!0,!1)},Tl=new WeakMap,Ml=new WeakMap,El=new WeakMap,Hu=new WeakMap;function Fu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vu(e){return e.__v_skip||!Object.isExtensible(e)?0:Fu(eu(e))}function hs(e){return xn(e)?e:oo(e,!1,Cl,ku,Tl)}function zu(e){return oo(e,!1,Su,Bu,Ml)}function ro(e){return oo(e,!0,Ou,Du,El)}function oo(e,n,t,s,i){if(!pt(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const o=Vu(e);if(o===0)return e;const a=new Proxy(e,o===2?s:t);return i.set(e,a),a}function yn(e){return xn(e)?yn(e.__v_raw):!!(e&&e.__v_isReactive)}function xn(e){return!!(e&&e.__v_isReadonly)}function $s(e){return!!(e&&e.__v_isShallow)}function _l(e){return yn(e)||xn(e)}function rt(e){const n=e&&e.__v_raw;return n?rt(n):e}function Cn(e){return Is(e,"__v_skip",!0),e}const Jn=e=>pt(e)?hs(e):e,ao=e=>pt(e)?ro(e):e;function Pl(e){Ae&&te&&(e=rt(e),wl(e.dep||(e.dep=to())))}function Ol(e,n){e=rt(e);const t=e.dep;t&&Qi(t)}function _t(e){return!!(e&&e.__v_isRef===!0)}function ct(e){return Sl(e,!1)}function oa(e){return Sl(e,!0)}function Sl(e,n){return _t(e)?e:new Nu(e,n)}class Nu{constructor(n,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?n:rt(n),this._value=t?n:Jn(n)}get value(){return Pl(this),this._value}set value(n){const t=this.__v_isShallow||$s(n)||xn(n);n=t?n:rt(n),Zn(n,this._rawValue)&&(this._rawValue=n,this._value=t?n:Jn(n),Ol(this))}}function $(e){return _t(e)?e.value:e}const Wu={get:(e,n,t)=>$(Reflect.get(e,n,t)),set:(e,n,t,s)=>{const i=e[n];return _t(i)&&!_t(t)?(i.value=t,!0):Reflect.set(e,n,t,s)}};function Rl(e){return yn(e)?e:new Proxy(e,Wu)}class Uu{constructor(n,t,s,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new eo(n,()=>{this._dirty||(this._dirty=!0,Ol(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const n=rt(this);return Pl(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function ju(e,n,t=!1){let s,i;const r=Q(e);return r?(s=e,i=se):(s=e.get,i=e.set),new Uu(s,i,r||!i,t)}function Ie(e,n,t,s){let i;try{i=s?e(...s):e()}catch(r){pi(r,n,t)}return i}function Yt(e,n,t,s){if(Q(e)){const r=Ie(e,n,t,s);return r&&ul(r)&&r.catch(o=>{pi(o,n,t)}),r}const i=[];for(let r=0;r<e.length;r++)i.push(Yt(e[r],n,t,s));return i}function pi(e,n,t,s=!0){const i=n?n.vnode:null;if(n){let r=n.parent;const o=n.proxy,a=t;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}r=r.parent}const l=n.appContext.config.errorHandler;if(l){Ie(l,null,10,[e,o,a]);return}}Yu(e,t,i,s)}function Yu(e,n,t,s=!0){console.error(e)}let Qn=!1,tr=!1;const Et=[];let ge=0;const wn=[];let xe=null,Ke=0;const Ll=Promise.resolve();let lo=null;function Al(e){const n=lo||Ll;return e?n.then(this?e.bind(this):e):n}function Gu(e){let n=ge+1,t=Et.length;for(;n<t;){const s=n+t>>>1;ts(Et[s])<e?n=s+1:t=s}return n}function co(e){(!Et.length||!Et.includes(e,Qn&&e.allowRecurse?ge+1:ge))&&(e.id==null?Et.push(e):Et.splice(Gu(e.id),0,e),Il())}function Il(){!Qn&&!tr&&(tr=!0,lo=Ll.then(kl))}function Xu(e){const n=Et.indexOf(e);n>ge&&Et.splice(n,1)}function qu(e){q(e)?wn.push(...e):(!xe||!xe.includes(e,e.allowRecurse?Ke+1:Ke))&&wn.push(e),Il()}function aa(e,n=Qn?ge+1:0){for(;n<Et.length;n++){const t=Et[n];t&&t.pre&&(Et.splice(n,1),n--,t())}}function $l(e){if(wn.length){const n=[...new Set(wn)];if(wn.length=0,xe){xe.push(...n);return}for(xe=n,xe.sort((t,s)=>ts(t)-ts(s)),Ke=0;Ke<xe.length;Ke++)xe[Ke]();xe=null,Ke=0}}const ts=e=>e.id==null?1/0:e.id,Ku=(e,n)=>{const t=ts(e)-ts(n);if(t===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return t};function kl(e){tr=!1,Qn=!0,Et.sort(Ku);const n=se;try{for(ge=0;ge<Et.length;ge++){const t=Et[ge];t&&t.active!==!1&&Ie(t,null,14)}}finally{ge=0,Et.length=0,$l(),Qn=!1,lo=null,(Et.length||wn.length)&&kl()}}function Zu(e,n,...t){if(e.isUnmounted)return;const s=e.vnode.props||dt;let i=t;const r=n.startsWith("update:"),o=r&&n.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=s[u]||dt;h&&(i=t.map(d=>mt(d)?d.trim():d)),f&&(i=t.map(iu))}let a,l=s[a=Ss(n)]||s[a=Ss(ve(n))];!l&&r&&(l=s[a=Ss(Sn(n))]),l&&Yt(l,e,6,i);const c=s[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Yt(c,e,6,i)}}function Bl(e,n,t=!1){const s=n.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!Q(e)){const l=c=>{const u=Bl(c,n,!0);u&&(a=!0,wt(o,u))};!t&&n.mixins.length&&n.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(pt(e)&&s.set(e,null),null):(q(r)?r.forEach(l=>o[l]=null):wt(o,r),pt(e)&&s.set(e,o),o)}function gi(e,n){return!e||!ci(n)?!1:(n=n.slice(2).replace(/Once$/,""),st(e,n[0].toLowerCase()+n.slice(1))||st(e,Sn(n))||st(e,n))}let Tt=null,Dl=null;function ks(e){const n=Tt;return Tt=e,Dl=e&&e.type.__scopeId||null,n}function ee(e,n=Tt,t){if(!n||e._n)return e;const s=(...i)=>{s._d&&ba(-1);const r=ks(n);let o;try{o=e(...i)}finally{ks(r),s._d&&ba(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Li(e){const{type:n,vnode:t,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:y}=e;let b,x;const T=ks(e);try{if(t.shapeFlag&4){const w=i||s;b=pe(u.call(w,w,f,r,d,h,g)),x=l}else{const w=n;b=pe(w.length>1?w(r,{attrs:l,slots:a,emit:c}):w(r,null)),x=n.props?l:Ju(l)}}catch(w){Gn.length=0,pi(w,e,1),b=et(Gt)}let S=b;if(x&&y!==!1){const w=Object.keys(x),{shapeFlag:_}=S;w.length&&_&7&&(o&&w.some(Kr)&&(x=Qu(x,o)),S=De(S,x))}return t.dirs&&(S=De(S),S.dirs=S.dirs?S.dirs.concat(t.dirs):t.dirs),t.transition&&(S.transition=t.transition),b=S,ks(T),b}const Ju=e=>{let n;for(const t in e)(t==="class"||t==="style"||ci(t))&&((n||(n={}))[t]=e[t]);return n},Qu=(e,n)=>{const t={};for(const s in e)(!Kr(s)||!(s.slice(9)in n))&&(t[s]=e[s]);return t};function th(e,n,t){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=n,c=r.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return s?la(s,o,c):!!o;if(l&8){const u=n.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==s[h]&&!gi(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?la(s,o,c):!0:!!o;return!1}function la(e,n,t){const s=Object.keys(n);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(n[r]!==e[r]&&!gi(t,r))return!0}return!1}function eh({vnode:e,parent:n},t){for(;n&&n.subTree===e;)(e=n.vnode).el=t,n=n.parent}const nh=e=>e.__isSuspense;function sh(e,n){n&&n.pendingBranch?q(e)?n.effects.push(...e):n.effects.push(e):qu(e)}const xs={};function Wt(e,n,t){return Hl(e,n,t)}function Hl(e,n,{immediate:t,deep:s,flush:i,onTrack:r,onTrigger:o}=dt){var a;const l=gl()===((a=xt)==null?void 0:a.scope)?xt:null;let c,u=!1,f=!1;if(_t(e)?(c=()=>e.value,u=$s(e)):yn(e)?(c=()=>e,s=!0):q(e)?(f=!0,u=e.some(w=>yn(w)||$s(w)),c=()=>e.map(w=>{if(_t(w))return w.value;if(yn(w))return Qe(w);if(Q(w))return Ie(w,l,2)})):Q(e)?n?c=()=>Ie(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),Yt(e,l,3,[d])}:c=se,n&&s){const w=c;c=()=>Qe(w())}let h,d=w=>{h=T.onStop=()=>{Ie(w,l,4)}},g;if(ns)if(d=se,n?t&&Yt(n,l,3,[c(),f?[]:void 0,d]):c(),i==="sync"){const w=ef();g=w.__watcherHandles||(w.__watcherHandles=[])}else return se;let y=f?new Array(e.length).fill(xs):xs;const b=()=>{if(T.active)if(n){const w=T.run();(s||u||(f?w.some((_,W)=>Zn(_,y[W])):Zn(w,y)))&&(h&&h(),Yt(n,l,3,[w,y===xs?void 0:f&&y[0]===xs?[]:y,d]),y=w)}else T.run()};b.allowRecurse=!!n;let x;i==="sync"?x=b:i==="post"?x=()=>$t(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),x=()=>co(b));const T=new eo(c,x);n?t?b():y=T.run():i==="post"?$t(T.run.bind(T),l&&l.suspense):T.run();const S=()=>{T.stop(),l&&l.scope&&Zr(l.scope.effects,T)};return g&&g.push(S),S}function ih(e,n,t){const s=this.proxy,i=mt(e)?e.includes(".")?Fl(s,e):()=>s[e]:e.bind(s,s);let r;Q(n)?r=n:(r=n.handler,t=n);const o=xt;Mn(this);const a=Hl(i,r.bind(s),t);return o?Mn(o):nn(),a}function Fl(e,n){const t=n.split(".");return()=>{let s=e;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s}}function Qe(e,n){if(!pt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),_t(e))Qe(e.value,n);else if(q(e))for(let t=0;t<e.length;t++)Qe(e[t],n);else if(cl(e)||vn(e))e.forEach(t=>{Qe(t,n)});else if(fl(e))for(const t in e)Qe(e[t],n);return e}function rh(e,n){const t=Tt;if(t===null)return e;const s=xi(t)||t.proxy,i=e.dirs||(e.dirs=[]);for(let r=0;r<n.length;r++){let[o,a,l,c=dt]=n[r];o&&(Q(o)&&(o={mounted:o,updated:o}),o.deep&&Qe(a),i.push({dir:o,instance:s,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function We(e,n,t,s){const i=e.dirs,r=n&&n.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Rn(),Yt(l,t,8,[e.el,a,e,n]),Ln())}}function oh(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return uo(()=>{e.isMounted=!0}),An(()=>{e.isUnmounting=!0}),e}const jt=[Function,Array],Vl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:jt,onEnter:jt,onAfterEnter:jt,onEnterCancelled:jt,onBeforeLeave:jt,onLeave:jt,onAfterLeave:jt,onLeaveCancelled:jt,onBeforeAppear:jt,onAppear:jt,onAfterAppear:jt,onAppearCancelled:jt},ah={name:"BaseTransition",props:Vl,setup(e,{slots:n}){const t=fs(),s=oh();let i;return()=>{const r=n.default&&Nl(n.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const y of r)if(y.type!==Gt){o=y;break}}const a=rt(e),{mode:l}=a;if(s.isLeaving)return Ai(o);const c=ca(o);if(!c)return Ai(o);const u=er(c,a,s,t);nr(c,u);const f=t.subTree,h=f&&ca(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const y=g();i===void 0?i=y:y!==i&&(i=y,d=!0)}if(h&&h.type!==Gt&&(!Ze(c,h)||d)){const y=er(h,a,s,t);if(nr(h,y),l==="out-in")return s.isLeaving=!0,y.afterLeave=()=>{s.isLeaving=!1,t.update.active!==!1&&t.update()},Ai(o);l==="in-out"&&c.type!==Gt&&(y.delayLeave=(b,x,T)=>{const S=zl(s,h);S[String(h.key)]=h,b._leaveCb=()=>{x(),b._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=T})}return o}}},lh=ah;function zl(e,n){const{leavingVNodes:t}=e;let s=t.get(n.type);return s||(s=Object.create(null),t.set(n.type,s)),s}function er(e,n,t,s){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:y,onAppear:b,onAfterAppear:x,onAppearCancelled:T}=n,S=String(e.key),w=zl(t,e),_=(k,Y)=>{k&&Yt(k,s,9,Y)},W=(k,Y)=>{const N=Y[1];_(k,Y),q(k)?k.every(Z=>Z.length<=1)&&N():k.length<=1&&N()},X={mode:r,persisted:o,beforeEnter(k){let Y=a;if(!t.isMounted)if(i)Y=y||a;else return;k._leaveCb&&k._leaveCb(!0);const N=w[S];N&&Ze(e,N)&&N.el._leaveCb&&N.el._leaveCb(),_(Y,[k])},enter(k){let Y=l,N=c,Z=u;if(!t.isMounted)if(i)Y=b||l,N=x||c,Z=T||u;else return;let D=!1;const J=k._enterCb=ft=>{D||(D=!0,ft?_(Z,[k]):_(N,[k]),X.delayedLeave&&X.delayedLeave(),k._enterCb=void 0)};Y?W(Y,[k,J]):J()},leave(k,Y){const N=String(e.key);if(k._enterCb&&k._enterCb(!0),t.isUnmounting)return Y();_(f,[k]);let Z=!1;const D=k._leaveCb=J=>{Z||(Z=!0,Y(),J?_(g,[k]):_(d,[k]),k._leaveCb=void 0,w[N]===e&&delete w[N])};w[N]=e,h?W(h,[k,D]):D()},clone(k){return er(k,n,t,s)}};return X}function Ai(e){if(mi(e))return e=De(e),e.children=null,e}function ca(e){return mi(e)?e.children?e.children[0]:void 0:e}function nr(e,n){e.shapeFlag&6&&e.component?nr(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function Nl(e,n=!1,t){let s=[],i=0;for(let r=0;r<e.length;r++){let o=e[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===bt?(o.patchFlag&128&&i++,s=s.concat(Nl(o.children,n,a))):(n||o.type!==Gt)&&s.push(a!=null?De(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function gt(e,n){return Q(e)?(()=>wt({name:e.name},n,{setup:e}))():e}const Un=e=>!!e.type.__asyncLoader,mi=e=>e.type.__isKeepAlive;function ch(e,n){Wl(e,"a",n)}function uh(e,n){Wl(e,"da",n)}function Wl(e,n,t=xt){const s=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(vi(n,s,t),t){let i=t.parent;for(;i&&i.parent;)mi(i.parent.vnode)&&hh(s,n,t,i),i=i.parent}}function hh(e,n,t,s){const i=vi(n,e,s,!0);Ul(()=>{Zr(s[n],i)},t)}function vi(e,n,t=xt,s=!1){if(t){const i=t[e]||(t[e]=[]),r=n.__weh||(n.__weh=(...o)=>{if(t.isUnmounted)return;Rn(),Mn(t);const a=Yt(n,t,e,o);return nn(),Ln(),a});return s?i.unshift(r):i.push(r),r}}const _e=e=>(n,t=xt)=>(!ns||e==="sp")&&vi(e,(...s)=>n(...s),t),fh=_e("bm"),uo=_e("m"),dh=_e("bu"),ph=_e("u"),An=_e("bum"),Ul=_e("um"),gh=_e("sp"),mh=_e("rtg"),vh=_e("rtc");function yh(e,n=xt){vi("ec",e,n)}const jl="components",Yl=Symbol.for("v-ndc");function Bs(e){return mt(e)?wh(jl,e,!1)||e:e||Yl}function wh(e,n,t=!0,s=!1){const i=Tt||xt;if(i){const r=i.type;if(e===jl){const a=Zh(r,!1);if(a&&(a===n||a===ve(n)||a===fi(ve(n))))return r}const o=ua(i[e]||r[e],n)||ua(i.appContext[e],n);return!o&&s?r:o}}function ua(e,n){return e&&(e[n]||e[ve(n)]||e[fi(ve(n))])}function Tn(e,n,t,s){let i;const r=t&&t[s];if(q(e)||mt(e)){i=new Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=n(e[o],o,void 0,r&&r[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=n(o+1,o,void 0,r&&r[o])}else if(pt(e))if(e[Symbol.iterator])i=Array.from(e,(o,a)=>n(o,a,void 0,r&&r[a]));else{const o=Object.keys(e);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=n(e[c],c,a,r&&r[a])}}else i=[];return t&&(t[s]=i),i}function Te(e,n,t={},s,i){if(Tt.isCE||Tt.parent&&Un(Tt.parent)&&Tt.parent.isCE)return n!=="default"&&(t.name=n),et("slot",t,s&&s());let r=e[n];r&&r._c&&(r._d=!1),H();const o=r&&Gl(r(t)),a=Lt(bt,{key:t.key||o&&o.key||`_${n}`},o||(s?s():[]),o&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Gl(e){return e.some(n=>Fs(n)?!(n.type===Gt||n.type===bt&&!Gl(n.children)):!0)?e:null}function bh(e,n){const t={};for(const s in e)t[n&&/[A-Z]/.test(s)?`on:${s}`:Ss(s)]=e[s];return t}const sr=e=>e?rc(e)?xi(e)||e.proxy:sr(e.parent):null,jn=wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>sr(e.parent),$root:e=>sr(e.root),$emit:e=>e.emit,$options:e=>ho(e),$forceUpdate:e=>e.f||(e.f=()=>co(e.update)),$nextTick:e=>e.n||(e.n=Al.bind(e.proxy)),$watch:e=>ih.bind(e)}),Ii=(e,n)=>e!==dt&&!e.__isScriptSetup&&st(e,n),xh={get({_:e},n){const{ctx:t,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let c;if(n[0]!=="$"){const d=o[n];if(d!==void 0)switch(d){case 1:return s[n];case 2:return i[n];case 4:return t[n];case 3:return r[n]}else{if(Ii(s,n))return o[n]=1,s[n];if(i!==dt&&st(i,n))return o[n]=2,i[n];if((c=e.propsOptions[0])&&st(c,n))return o[n]=3,r[n];if(t!==dt&&st(t,n))return o[n]=4,t[n];ir&&(o[n]=0)}}const u=jn[n];let f,h;if(u)return n==="$attrs"&&Dt(e,"get",n),u(e);if((f=a.__cssModules)&&(f=f[n]))return f;if(t!==dt&&st(t,n))return o[n]=4,t[n];if(h=l.config.globalProperties,st(h,n))return h[n]},set({_:e},n,t){const{data:s,setupState:i,ctx:r}=e;return Ii(i,n)?(i[n]=t,!0):s!==dt&&st(s,n)?(s[n]=t,!0):st(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(r[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!t[o]||e!==dt&&st(e,o)||Ii(n,o)||(a=r[0])&&st(a,o)||st(s,o)||st(jn,o)||st(i.config.globalProperties,o)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:st(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}};function Ch(){return Th().slots}function Th(){const e=fs();return e.setupContext||(e.setupContext=ac(e))}function ha(e){return q(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}let ir=!0;function Mh(e){const n=ho(e),t=e.proxy,s=e.ctx;ir=!1,n.beforeCreate&&fa(n.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:y,deactivated:b,beforeDestroy:x,beforeUnmount:T,destroyed:S,unmounted:w,render:_,renderTracked:W,renderTriggered:X,errorCaptured:k,serverPrefetch:Y,expose:N,inheritAttrs:Z,components:D,directives:J,filters:ft}=n;if(c&&Eh(c,s,null),o)for(const nt in o){const ot=o[nt];Q(ot)&&(s[nt]=ot.bind(t))}if(i){const nt=i.call(t,t);pt(nt)&&(e.data=hs(nt))}if(ir=!0,r)for(const nt in r){const ot=r[nt],Ot=Q(ot)?ot.bind(t,t):Q(ot.get)?ot.get.bind(t,t):se,we=!Q(ot)&&Q(ot.set)?ot.set.bind(t):se,Jt=At({get:Ot,set:we});Object.defineProperty(s,nt,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:Mt=>Jt.value=Mt})}if(a)for(const nt in a)Xl(a[nt],s,t,nt);if(l){const nt=Q(l)?l.call(t):l;Reflect.ownKeys(nt).forEach(ot=>{yi(ot,nt[ot])})}u&&fa(u,e,"c");function it(nt,ot){q(ot)?ot.forEach(Ot=>nt(Ot.bind(t))):ot&&nt(ot.bind(t))}if(it(fh,f),it(uo,h),it(dh,d),it(ph,g),it(ch,y),it(uh,b),it(yh,k),it(vh,W),it(mh,X),it(An,T),it(Ul,w),it(gh,Y),q(N))if(N.length){const nt=e.exposed||(e.exposed={});N.forEach(ot=>{Object.defineProperty(nt,ot,{get:()=>t[ot],set:Ot=>t[ot]=Ot})})}else e.exposed||(e.exposed={});_&&e.render===se&&(e.render=_),Z!=null&&(e.inheritAttrs=Z),D&&(e.components=D),J&&(e.directives=J)}function Eh(e,n,t=se){q(e)&&(e=rr(e));for(const s in e){const i=e[s];let r;pt(i)?"default"in i?r=en(i.from||s,i.default,!0):r=en(i.from||s):r=en(i),_t(r)?Object.defineProperty(n,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):n[s]=r}}function fa(e,n,t){Yt(q(e)?e.map(s=>s.bind(n.proxy)):e.bind(n.proxy),n,t)}function Xl(e,n,t,s){const i=s.includes(".")?Fl(t,s):()=>t[s];if(mt(e)){const r=n[e];Q(r)&&Wt(i,r)}else if(Q(e))Wt(i,e.bind(t));else if(pt(e))if(q(e))e.forEach(r=>Xl(r,n,t,s));else{const r=Q(e.handler)?e.handler.bind(t):n[e.handler];Q(r)&&Wt(i,r,e)}}function ho(e){const n=e.type,{mixins:t,extends:s}=n,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(n);let l;return a?l=a:!i.length&&!t&&!s?l=n:(l={},i.length&&i.forEach(c=>Ds(l,c,o,!0)),Ds(l,n,o)),pt(n)&&r.set(n,l),l}function Ds(e,n,t,s=!1){const{mixins:i,extends:r}=n;r&&Ds(e,r,t,!0),i&&i.forEach(o=>Ds(e,o,t,!0));for(const o in n)if(!(s&&o==="expose")){const a=_h[o]||t&&t[o];e[o]=a?a(e[o],n[o]):n[o]}return e}const _h={data:da,props:pa,emits:pa,methods:Nn,computed:Nn,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Nn,directives:Nn,watch:Oh,provide:da,inject:Ph};function da(e,n){return n?e?function(){return wt(Q(e)?e.call(this,this):e,Q(n)?n.call(this,this):n)}:n:e}function Ph(e,n){return Nn(rr(e),rr(n))}function rr(e){if(q(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Rt(e,n){return e?[...new Set([].concat(e,n))]:n}function Nn(e,n){return e?wt(Object.create(null),e,n):n}function pa(e,n){return e?q(e)&&q(n)?[...new Set([...e,...n])]:wt(Object.create(null),ha(e),ha(n??{})):n}function Oh(e,n){if(!e)return n;if(!n)return e;const t=wt(Object.create(null),e);for(const s in n)t[s]=Rt(e[s],n[s]);return t}function ql(){return{app:null,config:{isNativeTag:Jc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sh=0;function Rh(e,n){return function(s,i=null){Q(s)||(s=wt({},s)),i!=null&&!pt(i)&&(i=null);const r=ql(),o=new Set;let a=!1;const l=r.app={_uid:Sh++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:nf,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&Q(c.install)?(o.add(c),c.install(l,...u)):Q(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,f){if(!a){const h=et(s,i);return h.appContext=r,u&&n?n(h,c):e(h,c,f),a=!0,l._container=c,c.__vue_app__=l,xi(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Hs=l;try{return c()}finally{Hs=null}}};return l}}let Hs=null;function yi(e,n){if(xt){let t=xt.provides;const s=xt.parent&&xt.parent.provides;s===t&&(t=xt.provides=Object.create(s)),t[e]=n}}function en(e,n,t=!1){const s=xt||Tt;if(s||Hs){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Hs._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return t&&Q(n)?n.call(s&&s.proxy):n}}function Lh(e,n,t,s=!1){const i={},r={};Is(r,bi,1),e.propsDefaults=Object.create(null),Kl(e,n,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=s?i:zu(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Ah(e,n,t,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=rt(i),[l]=e.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(gi(e.emitsOptions,h))continue;const d=n[h];if(l)if(st(r,h))d!==r[h]&&(r[h]=d,c=!0);else{const g=ve(h);i[g]=or(l,a,g,d,e,!1)}else d!==r[h]&&(r[h]=d,c=!0)}}}else{Kl(e,n,i,r)&&(c=!0);let u;for(const f in a)(!n||!st(n,f)&&((u=Sn(f))===f||!st(n,u)))&&(l?t&&(t[f]!==void 0||t[u]!==void 0)&&(i[f]=or(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!n||!st(n,f))&&(delete r[f],c=!0)}c&&Me(e,"set","$attrs")}function Kl(e,n,t,s){const[i,r]=e.propsOptions;let o=!1,a;if(n)for(let l in n){if(Os(l))continue;const c=n[l];let u;i&&st(i,u=ve(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:gi(e.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=rt(t),c=a||dt;for(let u=0;u<r.length;u++){const f=r[u];t[f]=or(i,l,f,c[f],e,!st(c,f))}}return o}function or(e,n,t,s,i,r){const o=e[t];if(o!=null){const a=st(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Q(l)){const{propsDefaults:c}=i;t in c?s=c[t]:(Mn(i),s=c[t]=l.call(null,n),nn())}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Sn(t))&&(s=!0))}return s}function Zl(e,n,t=!1){const s=n.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!Q(e)){const u=f=>{l=!0;const[h,d]=Zl(f,n,!0);wt(o,h),d&&a.push(...d)};!t&&n.mixins.length&&n.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!l)return pt(e)&&s.set(e,mn),mn;if(q(r))for(let u=0;u<r.length;u++){const f=ve(r[u]);ga(f)&&(o[f]=dt)}else if(r)for(const u in r){const f=ve(u);if(ga(f)){const h=r[u],d=o[f]=q(h)||Q(h)?{type:h}:wt({},h);if(d){const g=ya(Boolean,d.type),y=ya(String,d.type);d[0]=g>-1,d[1]=y<0||g<y,(g>-1||st(d,"default"))&&a.push(f)}}}const c=[o,a];return pt(e)&&s.set(e,c),c}function ga(e){return e[0]!=="$"}function ma(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function va(e,n){return ma(e)===ma(n)}function ya(e,n){return q(n)?n.findIndex(t=>va(t,e)):Q(n)&&va(n,e)?0:-1}const Jl=e=>e[0]==="_"||e==="$stable",fo=e=>q(e)?e.map(pe):[pe(e)],Ih=(e,n,t)=>{if(n._n)return n;const s=ee((...i)=>fo(n(...i)),t);return s._c=!1,s},Ql=(e,n,t)=>{const s=e._ctx;for(const i in e){if(Jl(i))continue;const r=e[i];if(Q(r))n[i]=Ih(i,r,s);else if(r!=null){const o=fo(r);n[i]=()=>o}}},tc=(e,n)=>{const t=fo(n);e.slots.default=()=>t},$h=(e,n)=>{if(e.vnode.shapeFlag&32){const t=n._;t?(e.slots=rt(n),Is(n,"_",t)):Ql(n,e.slots={})}else e.slots={},n&&tc(e,n);Is(e.slots,bi,1)},kh=(e,n,t)=>{const{vnode:s,slots:i}=e;let r=!0,o=dt;if(s.shapeFlag&32){const a=n._;a?t&&a===1?r=!1:(wt(i,n),!t&&a===1&&delete i._):(r=!n.$stable,Ql(n,i)),o=n}else n&&(tc(e,n),o={default:1});if(r)for(const a in i)!Jl(a)&&!(a in o)&&delete i[a]};function ar(e,n,t,s,i=!1){if(q(e)){e.forEach((h,d)=>ar(h,n&&(q(n)?n[d]:n),t,s,i));return}if(Un(s)&&!i)return;const r=s.shapeFlag&4?xi(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:l}=e,c=n&&n.r,u=a.refs===dt?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(mt(c)?(u[c]=null,st(f,c)&&(f[c]=null)):_t(c)&&(c.value=null)),Q(l))Ie(l,a,12,[o,u]);else{const h=mt(l),d=_t(l);if(h||d){const g=()=>{if(e.f){const y=h?st(f,l)?f[l]:u[l]:l.value;i?q(y)&&Zr(y,r):q(y)?y.includes(r)||y.push(r):h?(u[l]=[r],st(f,l)&&(f[l]=u[l])):(l.value=[r],e.k&&(u[e.k]=l.value))}else h?(u[l]=o,st(f,l)&&(f[l]=o)):d&&(l.value=o,e.k&&(u[e.k]=o))};o?(g.id=-1,$t(g,t)):g()}}}const $t=sh;function Bh(e){return Dh(e)}function Dh(e,n){const t=qi();t.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=se,insertStaticContent:g}=e,y=(p,v,C,E=null,M=null,A=null,B=!1,L=null,I=!!v.dynamicChildren)=>{if(p===v)return;p&&!Ze(p,v)&&(E=be(p),Mt(p,M,A,!0),p=null),v.patchFlag===-2&&(I=!1,v.dynamicChildren=null);const{type:P,ref:j,shapeFlag:F}=v;switch(P){case wi:b(p,v,C,E);break;case Gt:x(p,v,C,E);break;case $i:p==null&&T(v,C,E,B);break;case bt:D(p,v,C,E,M,A,B,L,I);break;default:F&1?_(p,v,C,E,M,A,B,L,I):F&6?J(p,v,C,E,M,A,B,L,I):(F&64||F&128)&&P.process(p,v,C,E,M,A,B,L,I,ae)}j!=null&&M&&ar(j,p&&p.ref,A,v||p,!v)},b=(p,v,C,E)=>{if(p==null)s(v.el=a(v.children),C,E);else{const M=v.el=p.el;v.children!==p.children&&c(M,v.children)}},x=(p,v,C,E)=>{p==null?s(v.el=l(v.children||""),C,E):v.el=p.el},T=(p,v,C,E)=>{[p.el,p.anchor]=g(p.children,v,C,E,p.el,p.anchor)},S=({el:p,anchor:v},C,E)=>{let M;for(;p&&p!==v;)M=h(p),s(p,C,E),p=M;s(v,C,E)},w=({el:p,anchor:v})=>{let C;for(;p&&p!==v;)C=h(p),i(p),p=C;i(v)},_=(p,v,C,E,M,A,B,L,I)=>{B=B||v.type==="svg",p==null?W(v,C,E,M,A,B,L,I):Y(p,v,M,A,B,L,I)},W=(p,v,C,E,M,A,B,L)=>{let I,P;const{type:j,props:F,shapeFlag:U,transition:K,dirs:tt}=p;if(I=p.el=o(p.type,A,F&&F.is,F),U&8?u(I,p.children):U&16&&k(p.children,I,null,E,M,A&&j!=="foreignObject",B,L),tt&&We(p,null,E,"created"),X(I,p,p.scopeId,B,E),F){for(const at in F)at!=="value"&&!Os(at)&&r(I,at,null,F[at],A,p.children,E,M,St);"value"in F&&r(I,"value",null,F.value),(P=F.onVnodeBeforeMount)&&ce(P,E,p)}tt&&We(p,null,E,"beforeMount");const ht=(!M||M&&!M.pendingBranch)&&K&&!K.persisted;ht&&K.beforeEnter(I),s(I,v,C),((P=F&&F.onVnodeMounted)||ht||tt)&&$t(()=>{P&&ce(P,E,p),ht&&K.enter(I),tt&&We(p,null,E,"mounted")},M)},X=(p,v,C,E,M)=>{if(C&&d(p,C),E)for(let A=0;A<E.length;A++)d(p,E[A]);if(M){let A=M.subTree;if(v===A){const B=M.vnode;X(p,B,B.scopeId,B.slotScopeIds,M.parent)}}},k=(p,v,C,E,M,A,B,L,I=0)=>{for(let P=I;P<p.length;P++){const j=p[P]=L?Le(p[P]):pe(p[P]);y(null,j,v,C,E,M,A,B,L)}},Y=(p,v,C,E,M,A,B)=>{const L=v.el=p.el;let{patchFlag:I,dynamicChildren:P,dirs:j}=v;I|=p.patchFlag&16;const F=p.props||dt,U=v.props||dt;let K;C&&Ue(C,!1),(K=U.onVnodeBeforeUpdate)&&ce(K,C,v,p),j&&We(v,p,C,"beforeUpdate"),C&&Ue(C,!0);const tt=M&&v.type!=="foreignObject";if(P?N(p.dynamicChildren,P,L,C,E,tt,A):B||ot(p,v,L,null,C,E,tt,A,!1),I>0){if(I&16)Z(L,v,F,U,C,E,M);else if(I&2&&F.class!==U.class&&r(L,"class",null,U.class,M),I&4&&r(L,"style",F.style,U.style,M),I&8){const ht=v.dynamicProps;for(let at=0;at<ht.length;at++){const yt=ht[at],Qt=F[yt],cn=U[yt];(cn!==Qt||yt==="value")&&r(L,yt,Qt,cn,M,p.children,C,E,St)}}I&1&&p.children!==v.children&&u(L,v.children)}else!B&&P==null&&Z(L,v,F,U,C,E,M);((K=U.onVnodeUpdated)||j)&&$t(()=>{K&&ce(K,C,v,p),j&&We(v,p,C,"updated")},E)},N=(p,v,C,E,M,A,B)=>{for(let L=0;L<v.length;L++){const I=p[L],P=v[L],j=I.el&&(I.type===bt||!Ze(I,P)||I.shapeFlag&70)?f(I.el):C;y(I,P,j,null,E,M,A,B,!0)}},Z=(p,v,C,E,M,A,B)=>{if(C!==E){if(C!==dt)for(const L in C)!Os(L)&&!(L in E)&&r(p,L,C[L],null,B,v.children,M,A,St);for(const L in E){if(Os(L))continue;const I=E[L],P=C[L];I!==P&&L!=="value"&&r(p,L,P,I,B,v.children,M,A,St)}"value"in E&&r(p,"value",C.value,E.value)}},D=(p,v,C,E,M,A,B,L,I)=>{const P=v.el=p?p.el:a(""),j=v.anchor=p?p.anchor:a("");let{patchFlag:F,dynamicChildren:U,slotScopeIds:K}=v;K&&(L=L?L.concat(K):K),p==null?(s(P,C,E),s(j,C,E),k(v.children,C,j,M,A,B,L,I)):F>0&&F&64&&U&&p.dynamicChildren?(N(p.dynamicChildren,U,C,M,A,B,L),(v.key!=null||M&&v===M.subTree)&&po(p,v,!0)):ot(p,v,C,j,M,A,B,L,I)},J=(p,v,C,E,M,A,B,L,I)=>{v.slotScopeIds=L,p==null?v.shapeFlag&512?M.ctx.activate(v,C,E,B,I):ft(v,C,E,M,A,B,I):Ht(p,v,I)},ft=(p,v,C,E,M,A,B)=>{const L=p.component=Gh(p,E,M);if(mi(p)&&(L.ctx.renderer=ae),Xh(L),L.asyncDep){if(M&&M.registerDep(L,it),!p.el){const I=L.subTree=et(Gt);x(null,I,v,C)}return}it(L,p,v,C,M,A,B)},Ht=(p,v,C)=>{const E=v.component=p.component;if(th(p,v,C))if(E.asyncDep&&!E.asyncResolved){nt(E,v,C);return}else E.next=v,Xu(E.update),E.update();else v.el=p.el,E.vnode=v},it=(p,v,C,E,M,A,B)=>{const L=()=>{if(p.isMounted){let{next:j,bu:F,u:U,parent:K,vnode:tt}=p,ht=j,at;Ue(p,!1),j?(j.el=tt.el,nt(p,j,B)):j=tt,F&&Ri(F),(at=j.props&&j.props.onVnodeBeforeUpdate)&&ce(at,K,j,tt),Ue(p,!0);const yt=Li(p),Qt=p.subTree;p.subTree=yt,y(Qt,yt,f(Qt.el),be(Qt),p,M,A),j.el=yt.el,ht===null&&eh(p,yt.el),U&&$t(U,M),(at=j.props&&j.props.onVnodeUpdated)&&$t(()=>ce(at,K,j,tt),M)}else{let j;const{el:F,props:U}=v,{bm:K,m:tt,parent:ht}=p,at=Un(v);if(Ue(p,!1),K&&Ri(K),!at&&(j=U&&U.onVnodeBeforeMount)&&ce(j,ht,v),Ue(p,!0),F&&Ne){const yt=()=>{p.subTree=Li(p),Ne(F,p.subTree,p,M,null)};at?v.type.__asyncLoader().then(()=>!p.isUnmounted&&yt()):yt()}else{const yt=p.subTree=Li(p);y(null,yt,C,E,p,M,A),v.el=yt.el}if(tt&&$t(tt,M),!at&&(j=U&&U.onVnodeMounted)){const yt=v;$t(()=>ce(j,ht,yt),M)}(v.shapeFlag&256||ht&&Un(ht.vnode)&&ht.vnode.shapeFlag&256)&&p.a&&$t(p.a,M),p.isMounted=!0,v=C=E=null}},I=p.effect=new eo(L,()=>co(P),p.scope),P=p.update=()=>I.run();P.id=p.uid,Ue(p,!0),P()},nt=(p,v,C)=>{v.component=p;const E=p.vnode.props;p.vnode=v,p.next=null,Ah(p,v.props,E,C),kh(p,v.children,C),Rn(),aa(),Ln()},ot=(p,v,C,E,M,A,B,L,I=!1)=>{const P=p&&p.children,j=p?p.shapeFlag:0,F=v.children,{patchFlag:U,shapeFlag:K}=v;if(U>0){if(U&128){we(P,F,C,E,M,A,B,L,I);return}else if(U&256){Ot(P,F,C,E,M,A,B,L,I);return}}K&8?(j&16&&St(P,M,A),F!==P&&u(C,F)):j&16?K&16?we(P,F,C,E,M,A,B,L,I):St(P,M,A,!0):(j&8&&u(C,""),K&16&&k(F,C,E,M,A,B,L,I))},Ot=(p,v,C,E,M,A,B,L,I)=>{p=p||mn,v=v||mn;const P=p.length,j=v.length,F=Math.min(P,j);let U;for(U=0;U<F;U++){const K=v[U]=I?Le(v[U]):pe(v[U]);y(p[U],K,C,null,M,A,B,L,I)}P>j?St(p,M,A,!0,!1,F):k(v,C,E,M,A,B,L,I,F)},we=(p,v,C,E,M,A,B,L,I)=>{let P=0;const j=v.length;let F=p.length-1,U=j-1;for(;P<=F&&P<=U;){const K=p[P],tt=v[P]=I?Le(v[P]):pe(v[P]);if(Ze(K,tt))y(K,tt,C,null,M,A,B,L,I);else break;P++}for(;P<=F&&P<=U;){const K=p[F],tt=v[U]=I?Le(v[U]):pe(v[U]);if(Ze(K,tt))y(K,tt,C,null,M,A,B,L,I);else break;F--,U--}if(P>F){if(P<=U){const K=U+1,tt=K<j?v[K].el:E;for(;P<=U;)y(null,v[P]=I?Le(v[P]):pe(v[P]),C,tt,M,A,B,L,I),P++}}else if(P>U)for(;P<=F;)Mt(p[P],M,A,!0),P++;else{const K=P,tt=P,ht=new Map;for(P=tt;P<=U;P++){const Ft=v[P]=I?Le(v[P]):pe(v[P]);Ft.key!=null&&ht.set(Ft.key,P)}let at,yt=0;const Qt=U-tt+1;let cn=!1,qo=0;const Bn=new Array(Qt);for(P=0;P<Qt;P++)Bn[P]=0;for(P=K;P<=F;P++){const Ft=p[P];if(yt>=Qt){Mt(Ft,M,A,!0);continue}let le;if(Ft.key!=null)le=ht.get(Ft.key);else for(at=tt;at<=U;at++)if(Bn[at-tt]===0&&Ze(Ft,v[at])){le=at;break}le===void 0?Mt(Ft,M,A,!0):(Bn[le-tt]=P+1,le>=qo?qo=le:cn=!0,y(Ft,v[le],C,null,M,A,B,L,I),yt++)}const Ko=cn?Hh(Bn):mn;for(at=Ko.length-1,P=Qt-1;P>=0;P--){const Ft=tt+P,le=v[Ft],Zo=Ft+1<j?v[Ft+1].el:E;Bn[P]===0?y(null,le,C,Zo,M,A,B,L,I):cn&&(at<0||P!==Ko[at]?Jt(le,C,Zo,2):at--)}}},Jt=(p,v,C,E,M=null)=>{const{el:A,type:B,transition:L,children:I,shapeFlag:P}=p;if(P&6){Jt(p.component.subTree,v,C,E);return}if(P&128){p.suspense.move(v,C,E);return}if(P&64){B.move(p,v,C,ae);return}if(B===bt){s(A,v,C);for(let F=0;F<I.length;F++)Jt(I[F],v,C,E);s(p.anchor,v,C);return}if(B===$i){S(p,v,C);return}if(E!==2&&P&1&&L)if(E===0)L.beforeEnter(A),s(A,v,C),$t(()=>L.enter(A),M);else{const{leave:F,delayLeave:U,afterLeave:K}=L,tt=()=>s(A,v,C),ht=()=>{F(A,()=>{tt(),K&&K()})};U?U(A,tt,ht):ht()}else s(A,v,C)},Mt=(p,v,C,E=!1,M=!1)=>{const{type:A,props:B,ref:L,children:I,dynamicChildren:P,shapeFlag:j,patchFlag:F,dirs:U}=p;if(L!=null&&ar(L,null,C,p,!0),j&256){v.ctx.deactivate(p);return}const K=j&1&&U,tt=!Un(p);let ht;if(tt&&(ht=B&&B.onVnodeBeforeUnmount)&&ce(ht,v,p),j&6)re(p.component,C,E);else{if(j&128){p.suspense.unmount(C,E);return}K&&We(p,null,v,"beforeUnmount"),j&64?p.type.remove(p,v,C,M,ae,E):P&&(A!==bt||F>0&&F&64)?St(P,v,C,!1,!0):(A===bt&&F&384||!M&&j&16)&&St(I,v,C),E&&ze(p)}(tt&&(ht=B&&B.onVnodeUnmounted)||K)&&$t(()=>{ht&&ce(ht,v,p),K&&We(p,null,v,"unmounted")},C)},ze=p=>{const{type:v,el:C,anchor:E,transition:M}=p;if(v===bt){Pe(C,E);return}if(v===$i){w(p);return}const A=()=>{i(C),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(p.shapeFlag&1&&M&&!M.persisted){const{leave:B,delayLeave:L}=M,I=()=>B(C,A);L?L(p.el,A,I):I()}else A()},Pe=(p,v)=>{let C;for(;p!==v;)C=h(p),i(p),p=C;i(v)},re=(p,v,C)=>{const{bum:E,scope:M,update:A,subTree:B,um:L}=p;E&&Ri(E),M.stop(),A&&(A.active=!1,Mt(B,p,v,C)),L&&$t(L,v),$t(()=>{p.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},St=(p,v,C,E=!1,M=!1,A=0)=>{for(let B=A;B<p.length;B++)Mt(p[B],v,C,E,M)},be=p=>p.shapeFlag&6?be(p.component.subTree):p.shapeFlag&128?p.suspense.next():h(p.anchor||p.el),oe=(p,v,C)=>{p==null?v._vnode&&Mt(v._vnode,null,null,!0):y(v._vnode||null,p,v,null,null,null,C),aa(),$l(),v._vnode=p},ae={p:y,um:Mt,m:Jt,r:ze,mt:ft,mc:k,pc:ot,pbc:N,n:be,o:e};let kn,Ne;return n&&([kn,Ne]=n(ae)),{render:oe,hydrate:kn,createApp:Rh(oe,kn)}}function Ue({effect:e,update:n},t){e.allowRecurse=n.allowRecurse=t}function po(e,n,t=!1){const s=e.children,i=n.children;if(q(s)&&q(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Le(i[r]),a.el=o.el),t||po(o,a)),a.type===wi&&(a.el=o.el)}}function Hh(e){const n=e.slice(),t=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const c=e[s];if(c!==0){if(i=t[t.length-1],e[i]<c){n[s]=i,t.push(s);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,e[t[a]]<c?r=a+1:o=a;c<e[t[r]]&&(r>0&&(n[s]=t[r-1]),t[r]=s)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=n[o];return t}const Fh=e=>e.__isTeleport,Yn=e=>e&&(e.disabled||e.disabled===""),wa=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lr=(e,n)=>{const t=e&&e.to;return mt(t)?n?n(t):null:t},Vh={__isTeleport:!0,process(e,n,t,s,i,r,o,a,l,c){const{mc:u,pc:f,pbc:h,o:{insert:d,querySelector:g,createText:y,createComment:b}}=c,x=Yn(n.props);let{shapeFlag:T,children:S,dynamicChildren:w}=n;if(e==null){const _=n.el=y(""),W=n.anchor=y("");d(_,t,s),d(W,t,s);const X=n.target=lr(n.props,g),k=n.targetAnchor=y("");X&&(d(k,X),o=o||wa(X));const Y=(N,Z)=>{T&16&&u(S,N,Z,i,r,o,a,l)};x?Y(t,W):X&&Y(X,k)}else{n.el=e.el;const _=n.anchor=e.anchor,W=n.target=e.target,X=n.targetAnchor=e.targetAnchor,k=Yn(e.props),Y=k?t:W,N=k?_:X;if(o=o||wa(W),w?(h(e.dynamicChildren,w,Y,i,r,o,a),po(e,n,!0)):l||f(e,n,Y,N,i,r,o,a,!1),x)k||Cs(n,t,_,c,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Z=n.target=lr(n.props,g);Z&&Cs(n,Z,null,c,0)}else k&&Cs(n,W,X,c,1)}nc(n)},remove(e,n,t,s,{um:i,o:{remove:r}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:f,props:h}=e;if(f&&r(u),(o||!Yn(h))&&(r(c),a&16))for(let d=0;d<l.length;d++){const g=l[d];i(g,n,t,!0,!!g.dynamicChildren)}},move:Cs,hydrate:zh};function Cs(e,n,t,{o:{insert:s},m:i},r=2){r===0&&s(e.targetAnchor,n,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=e,f=r===2;if(f&&s(o,n,t),(!f||Yn(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],n,t,2);f&&s(a,n,t)}function zh(e,n,t,s,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=n.target=lr(n.props,l);if(u){const f=u._lpa||u.firstChild;if(n.shapeFlag&16)if(Yn(n.props))n.anchor=c(o(e),n,a(e),t,s,i,r),n.targetAnchor=f;else{n.anchor=o(e);let h=f;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){n.targetAnchor=h,u._lpa=n.targetAnchor&&o(n.targetAnchor);break}c(f,n,u,t,s,i,r)}nc(n)}return n.anchor&&o(n.anchor)}const ec=Vh;function nc(e){const n=e.ctx;if(n&&n.ut){let t=e.children[0].el;for(;t!==e.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",n.uid),t=t.nextSibling;n.ut()}}const bt=Symbol.for("v-fgt"),wi=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),$i=Symbol.for("v-stc"),Gn=[];let ne=null;function H(e=!1){Gn.push(ne=e?null:[])}function Nh(){Gn.pop(),ne=Gn[Gn.length-1]||null}let es=1;function ba(e){es+=e}function sc(e){return e.dynamicChildren=es>0?ne||mn:null,Nh(),es>0&&ne&&ne.push(e),e}function G(e,n,t,s,i,r){return sc(V(e,n,t,s,i,r,!0))}function Lt(e,n,t,s,i){return sc(et(e,n,t,s,i,!0))}function Fs(e){return e?e.__v_isVNode===!0:!1}function Ze(e,n){return e.type===n.type&&e.key===n.key}const bi="__vInternal",ic=({key:e})=>e??null,Rs=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?mt(e)||_t(e)||Q(e)?{i:Tt,r:e,k:n,f:!!t}:e:null);function V(e,n=null,t=null,s=0,i=null,r=e===bt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&ic(n),ref:n&&Rs(n),scopeId:Dl,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Tt};return a?(mo(l,t),r&128&&e.normalize(l)):t&&(l.shapeFlag|=mt(t)?8:16),es>0&&!o&&ne&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&ne.push(l),l}const et=Wh;function Wh(e,n=null,t=null,s=0,i=null,r=!1){if((!e||e===Yl)&&(e=Gt),Fs(e)){const a=De(e,n,!0);return t&&mo(a,t),es>0&&!r&&ne&&(a.shapeFlag&6?ne[ne.indexOf(e)]=a:ne.push(a)),a.patchFlag|=-2,a}if(Jh(e)&&(e=e.__vccOpts),n){n=Uh(n);let{class:a,style:l}=n;a&&!mt(a)&&(n.class=z(a)),pt(l)&&(_l(l)&&!q(l)&&(l=wt({},l)),n.style=Nt(l))}const o=mt(e)?1:nh(e)?128:Fh(e)?64:pt(e)?4:Q(e)?2:0;return V(e,n,t,s,i,o,r,!0)}function Uh(e){return e?_l(e)||bi in e?wt({},e):e:null}function De(e,n,t=!1){const{props:s,ref:i,patchFlag:r,children:o}=e,a=n?vo(s||{},n):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ic(a),ref:n&&n.ref?t&&i?q(i)?i.concat(Rs(n)):[i,Rs(n)]:Rs(n):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==bt?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&De(e.ssContent),ssFallback:e.ssFallback&&De(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function go(e=" ",n=0){return et(wi,null,e,n)}function $e(e="",n=!1){return n?(H(),Lt(Gt,null,e)):et(Gt,null,e)}function pe(e){return e==null||typeof e=="boolean"?et(Gt):q(e)?et(bt,null,e.slice()):typeof e=="object"?Le(e):et(wi,null,String(e))}function Le(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:De(e)}function mo(e,n){let t=0;const{shapeFlag:s}=e;if(n==null)n=null;else if(q(n))t=16;else if(typeof n=="object")if(s&65){const i=n.default;i&&(i._c&&(i._d=!1),mo(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!(bi in n)?n._ctx=Tt:i===3&&Tt&&(Tt.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Q(n)?(n={default:n,_ctx:Tt},t=32):(n=String(n),s&64?(t=16,n=[go(n)]):t=8);e.children=n,e.shapeFlag|=t}function vo(...e){const n={};for(let t=0;t<e.length;t++){const s=e[t];for(const i in s)if(i==="class")n.class!==s.class&&(n.class=z([n.class,s.class]));else if(i==="style")n.style=Nt([n.style,s.style]);else if(ci(i)){const r=n[i],o=s[i];o&&r!==o&&!(q(r)&&r.includes(o))&&(n[i]=r?[].concat(r,o):o)}else i!==""&&(n[i]=s[i])}return n}function ce(e,n,t,s=null){Yt(e,n,7,[t,s])}const jh=ql();let Yh=0;function Gh(e,n,t){const s=e.type,i=(n?n.appContext:e.appContext)||jh,r={uid:Yh++,vnode:e,type:s,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new fu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zl(s,i),emitsOptions:Bl(s,i),emit:null,emitted:null,propsDefaults:dt,inheritAttrs:s.inheritAttrs,ctx:dt,data:dt,props:dt,attrs:dt,slots:dt,refs:dt,setupState:dt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=n?n.root:r,r.emit=Zu.bind(null,r),e.ce&&e.ce(r),r}let xt=null;const fs=()=>xt||Tt;let yo,un,xa="__VUE_INSTANCE_SETTERS__";(un=qi()[xa])||(un=qi()[xa]=[]),un.push(e=>xt=e),yo=e=>{un.length>1?un.forEach(n=>n(e)):un[0](e)};const Mn=e=>{yo(e),e.scope.on()},nn=()=>{xt&&xt.scope.off(),yo(null)};function rc(e){return e.vnode.shapeFlag&4}let ns=!1;function Xh(e,n=!1){ns=n;const{props:t,children:s}=e.vnode,i=rc(e);Lh(e,t,i,n),$h(e,s);const r=i?qh(e,n):void 0;return ns=!1,r}function qh(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=Cn(new Proxy(e.ctx,xh));const{setup:s}=t;if(s){const i=e.setupContext=s.length>1?ac(e):null;Mn(e),Rn();const r=Ie(s,e,0,[e.props,i]);if(Ln(),nn(),ul(r)){if(r.then(nn,nn),n)return r.then(o=>{Ca(e,o,n)}).catch(o=>{pi(o,e,0)});e.asyncDep=r}else Ca(e,r,n)}else oc(e,n)}function Ca(e,n,t){Q(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:pt(n)&&(e.setupState=Rl(n)),oc(e,t)}let Ta;function oc(e,n,t){const s=e.type;if(!e.render){if(!n&&Ta&&!s.render){const i=s.template||ho(e).template;if(i){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,c=wt(wt({isCustomElement:r,delimiters:a},o),l);s.render=Ta(i,c)}}e.render=s.render||se}Mn(e),Rn(),Mh(e),Ln(),nn()}function Kh(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,t){return Dt(e,"get","$attrs"),n[t]}}))}function ac(e){const n=t=>{e.exposed=t||{}};return{get attrs(){return Kh(e)},slots:e.slots,emit:e.emit,expose:n}}function xi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Rl(Cn(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in jn)return jn[t](e)},has(n,t){return t in n||t in jn}}))}function Zh(e,n=!0){return Q(e)?e.displayName||e.name:e.name||n&&e.__name}function Jh(e){return Q(e)&&"__vccOpts"in e}const At=(e,n)=>ju(e,n,ns);function Qh(e,n,t){const s=arguments.length;return s===2?pt(n)&&!q(n)?Fs(n)?et(e,null,[n]):et(e,n):et(e,null,n):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Fs(t)&&(t=[t]),et(e,n,t))}const tf=Symbol.for("v-scx"),ef=()=>en(tf),nf="3.3.4",sf="http://www.w3.org/2000/svg",Je=typeof document<"u"?document:null,Ma=Je&&Je.createElement("template"),rf={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,s)=>{const i=n?Je.createElementNS(sf,e):Je.createElement(e,t?{is:t}:void 0);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Je.createTextNode(e),createComment:e=>Je.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Je.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,s,i,r){const o=t?t.previousSibling:n.lastChild;if(i&&(i===r||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Ma.innerHTML=s?`<svg>${e}</svg>`:e;const a=Ma.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}n.insertBefore(a,t)}return[o?o.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}};function of(e,n,t){const s=e._vtc;s&&(n=(n?[n,...s]:[...s]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}function af(e,n,t){const s=e.style,i=mt(t);if(t&&!i){if(n&&!mt(n))for(const r in n)t[r]==null&&cr(s,r,"");for(const r in t)cr(s,r,t[r])}else{const r=s.display;i?n!==t&&(s.cssText=t):n&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const Ea=/\s*!important$/;function cr(e,n,t){if(q(t))t.forEach(s=>cr(e,n,s));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const s=lf(e,n);Ea.test(t)?e.setProperty(Sn(s),t.replace(Ea,""),"important"):e[s]=t}}const _a=["Webkit","Moz","ms"],ki={};function lf(e,n){const t=ki[n];if(t)return t;let s=ve(n);if(s!=="filter"&&s in e)return ki[n]=s;s=fi(s);for(let i=0;i<_a.length;i++){const r=_a[i]+s;if(r in e)return ki[n]=r}return n}const Pa="http://www.w3.org/1999/xlink";function cf(e,n,t,s,i){if(s&&n.startsWith("xlink:"))t==null?e.removeAttributeNS(Pa,n.slice(6,n.length)):e.setAttributeNS(Pa,n,t);else{const r=hu(n);t==null||r&&!dl(t)?e.removeAttribute(n):e.setAttribute(n,r?"":t)}}function uf(e,n,t,s,i,r,o){if(n==="innerHTML"||n==="textContent"){s&&o(s,i,r),e[n]=t??"";return}const a=e.tagName;if(n==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=t;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=t??"";c!==u&&(e.value=u),t==null&&e.removeAttribute(n);return}let l=!1;if(t===""||t==null){const c=typeof e[n];c==="boolean"?t=dl(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{e[n]=t}catch{}l&&e.removeAttribute(n)}function hf(e,n,t,s){e.addEventListener(n,t,s)}function ff(e,n,t,s){e.removeEventListener(n,t,s)}function df(e,n,t,s,i=null){const r=e._vei||(e._vei={}),o=r[n];if(s&&o)o.value=s;else{const[a,l]=pf(n);if(s){const c=r[n]=vf(s,i);hf(e,a,c,l)}else o&&(ff(e,a,o,l),r[n]=void 0)}}const Oa=/(?:Once|Passive|Capture)$/;function pf(e){let n;if(Oa.test(e)){n={};let s;for(;s=e.match(Oa);)e=e.slice(0,e.length-s[0].length),n[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Sn(e.slice(2)),n]}let Bi=0;const gf=Promise.resolve(),mf=()=>Bi||(gf.then(()=>Bi=0),Bi=Date.now());function vf(e,n){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Yt(yf(s,t.value),n,5,[s])};return t.value=e,t.attached=mf(),t}function yf(e,n){if(q(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(s=>i=>!i._stopped&&s&&s(i))}else return n}const Sa=/^on[a-z]/,wf=(e,n,t,s,i=!1,r,o,a,l)=>{n==="class"?of(e,s,i):n==="style"?af(e,t,s):ci(n)?Kr(n)||df(e,n,t,s,o):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):bf(e,n,s,i))?uf(e,n,s,r,o,a,l):(n==="true-value"?e._trueValue=s:n==="false-value"&&(e._falseValue=s),cf(e,n,s,i))};function bf(e,n,t,s){return s?!!(n==="innerHTML"||n==="textContent"||n in e&&Sa.test(n)&&Q(t)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||Sa.test(n)&&mt(t)?!1:n in e}const Se="transition",Dn="animation",wo=(e,{slots:n})=>Qh(lh,xf(e),n);wo.displayName="Transition";const lc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};wo.props=wt({},Vl,lc);const je=(e,n=[])=>{q(e)?e.forEach(t=>t(...n)):e&&e(...n)},Ra=e=>e?q(e)?e.some(n=>n.length>1):e.length>1:!1;function xf(e){const n={};for(const D in e)D in lc||(n[D]=e[D]);if(e.css===!1)return n;const{name:t="v",type:s,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=e,g=Cf(i),y=g&&g[0],b=g&&g[1],{onBeforeEnter:x,onEnter:T,onEnterCancelled:S,onLeave:w,onLeaveCancelled:_,onBeforeAppear:W=x,onAppear:X=T,onAppearCancelled:k=S}=n,Y=(D,J,ft)=>{Ye(D,J?u:a),Ye(D,J?c:o),ft&&ft()},N=(D,J)=>{D._isLeaving=!1,Ye(D,f),Ye(D,d),Ye(D,h),J&&J()},Z=D=>(J,ft)=>{const Ht=D?X:T,it=()=>Y(J,D,ft);je(Ht,[J,it]),La(()=>{Ye(J,D?l:r),Re(J,D?u:a),Ra(Ht)||Aa(J,s,y,it)})};return wt(n,{onBeforeEnter(D){je(x,[D]),Re(D,r),Re(D,o)},onBeforeAppear(D){je(W,[D]),Re(D,l),Re(D,c)},onEnter:Z(!1),onAppear:Z(!0),onLeave(D,J){D._isLeaving=!0;const ft=()=>N(D,J);Re(D,f),Ef(),Re(D,h),La(()=>{D._isLeaving&&(Ye(D,f),Re(D,d),Ra(w)||Aa(D,s,b,ft))}),je(w,[D,ft])},onEnterCancelled(D){Y(D,!1),je(S,[D])},onAppearCancelled(D){Y(D,!0),je(k,[D])},onLeaveCancelled(D){N(D),je(_,[D])}})}function Cf(e){if(e==null)return null;if(pt(e))return[Di(e.enter),Di(e.leave)];{const n=Di(e);return[n,n]}}function Di(e){return ru(e)}function Re(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(n)}function Ye(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:t}=e;t&&(t.delete(n),t.size||(e._vtc=void 0))}function La(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Tf=0;function Aa(e,n,t,s){const i=e._endId=++Tf,r=()=>{i===e._endId&&s()};if(t)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=Mf(e,n);if(!o)return s();const c=o+"end";let u=0;const f=()=>{e.removeEventListener(c,h),r()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),e.addEventListener(c,h)}function Mf(e,n){const t=window.getComputedStyle(e),s=g=>(t[g]||"").split(", "),i=s(`${Se}Delay`),r=s(`${Se}Duration`),o=Ia(i,r),a=s(`${Dn}Delay`),l=s(`${Dn}Duration`),c=Ia(a,l);let u=null,f=0,h=0;n===Se?o>0&&(u=Se,f=o,h=r.length):n===Dn?c>0&&(u=Dn,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?Se:Dn:null,h=u?u===Se?r.length:l.length:0);const d=u===Se&&/\b(transform|all)(,|$)/.test(s(`${Se}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function Ia(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,s)=>$a(t)+$a(e[s])))}function $a(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Ef(){return document.body.offsetHeight}const _f={beforeMount(e,{value:n},{transition:t}){e._vod=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Hn(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:s}){!n!=!t&&(s?n?(s.beforeEnter(e),Hn(e,!0),s.enter(e)):s.leave(e,()=>{Hn(e,!1)}):Hn(e,n))},beforeUnmount(e,{value:n}){Hn(e,n)}};function Hn(e,n){e.style.display=n?e._vod:"none"}const Pf=wt({patchProp:wf},rf);let ka;function Of(){return ka||(ka=Bh(Pf))}const Sf=(...e)=>{const n=Of().createApp(...e),{mount:t}=n;return n.mount=s=>{const i=Rf(s);if(!i)return;const r=n._component;!Q(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},n};function Rf(e){return mt(e)?document.querySelector(e):e}const Lf="st",Af="is-",If="has-",Ge=(e,n,t,s,i)=>{let r=`${e}-${n}`;return t&&(r+=`-${t}`),s&&(r+=`__${s}`),i&&(r+=`--${i}`),r},vt=e=>{const n=Lf;return{namespace:n,b:(f="")=>Ge(n,e,f,"",""),e:f=>f?Ge(n,e,"",f,""):"",m:f=>f?Ge(n,e,"","",f):"",be:(f,h)=>f&&h?Ge(n,e,f,h,""):"",em:(f,h)=>f&&h?Ge(n,e,"",f,h):"",bm:(f,h)=>f&&h?Ge(n,e,f,"",h):"",bem:(f,h,d)=>f&&h&&d?Ge(n,e,f,h,d):"",is:(f,...h)=>{const d=h.length>=1?h[0]:!0;return f&&d?`${Af}${f}`:""},has:(f,...h)=>{const d=h.length>=1?h[0]:!0;return f&&d?`${If}${f}`:""}}};class ut{constructor(n=1,t=0,s=0,i=1,r=0,o=0){m(this,"a");m(this,"b");m(this,"c");m(this,"d");m(this,"tx");m(this,"ty");this.a=n,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=o}set(n,t,s,i,r,o){return this.a=n,this.b=t,this.c=s,this.d=i,this.tx=r,this.ty=o,this}getArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}apply(n){const t=n.x,s=n.y;return{x:this.a*t+this.c*s+this.tx,y:this.b*t+this.d*s+this.ty}}applyInverse(n){const t=this.a,s=this.b,i=this.c,r=this.d,o=this.tx,a=this.ty,l=1/(t*r+i*-s),c=n.x,u=n.y;return{x:r*l*c+-i*l*u+(a*i-o*r)*l,y:t*l*u+-s*l*c+(-a*t+o*s)*l}}translate(n,t){return this.tx+=n,this.ty+=t,this}scale(n,t){return this.a*=n,this.d*=t,this.c*=n,this.b*=t,this.tx*=n,this.ty*=t,this}rotate(n){const t=Math.cos(n),s=Math.sin(n),i=this.a,r=this.c,o=this.tx;return this.a=i*t-this.b*s,this.b=i*s+this.b*t,this.c=r*t-this.d*s,this.d=r*s+this.d*t,this.tx=o*t-this.ty*s,this.ty=o*s+this.ty*t,this}append(n){const t=this.a,s=this.b,i=this.c,r=this.d;return this.a=n.a*t+n.b*i,this.b=n.a*s+n.b*r,this.c=n.c*t+n.d*i,this.d=n.c*s+n.d*r,this.tx=n.tx*t+n.ty*i+this.tx,this.ty=n.tx*s+n.ty*r+this.ty,this}appendFrom(n,t){const s=n.a,i=n.b,r=n.c,o=n.d,a=n.tx,l=n.ty,c=t.a,u=t.b,f=t.c,h=t.d;return this.a=s*c+i*f,this.b=s*u+i*h,this.c=r*c+o*f,this.d=r*u+o*h,this.tx=a*c+l*f+t.tx,this.ty=a*u+l*h+t.ty,this}prepend(n){const t=this.tx;if(n.a!==1||n.b!==0||n.c!==0||n.d!==1){const s=this.a,i=this.c;this.a=s*n.a+this.b*n.c,this.b=s*n.b+this.b*n.d,this.c=i*n.a+this.d*n.c,this.d=i*n.b+this.d*n.d}return this.tx=t*n.a+this.ty*n.c+n.tx,this.ty=t*n.b+this.ty*n.d+n.ty,this}invert(){const n=this.a,t=this.b,s=this.c,i=this.d,r=this.tx,o=n*i-t*s;return this.a=i/o,this.b=-t/o,this.c=-s/o,this.d=n/o,this.tx=(s*this.ty-i*r)/o,this.ty=-(n*this.ty-t*r)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const n=new ut;return n.a=this.a,n.b=this.b,n.c=this.c,n.d=this.d,n.tx=this.tx,n.ty=this.ty,n}copyTo(n){return n.a=this.a,n.b=this.b,n.c=this.c,n.d=this.d,n.tx=this.tx,n.ty=this.ty,n}copyFrom(n){return this.a=n.a,this.b=n.b,this.c=n.c,this.d=n.d,this.tx=n.tx,this.ty=n.ty,this}equals(n){return n.a===this.a&&n.b===this.b&&n.c===this.c&&n.d===this.d&&n.tx===this.tx&&n.ty===this.ty}toString(){return`[Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}}const Ba=(e,n)=>{const t=e[0],s=e[1],i=e[2],r=e[3];return[n[0]*t+n[1]*i,n[0]*s+n[1]*r,n[2]*t+n[3]*i,n[2]*s+n[3]*r,n[4]*t+n[5]*i+e[4],n[4]*s+n[5]*r+e[5]]},$f=e=>{const n=e[0],t=e[1],s=e[2],i=e[3],r=e[4],o=n*i-t*s;return[i/o,-t/o,-s/o,n/o,(s*e[5]-i*r)/o,-(n*e[5]-t*r)/o]},kf=(e,n)=>({x:n.x*e[0]+n.y*e[2]+e[4],y:n.x*e[1]+n.y*e[3]+e[5]}),ur=(e,n)=>Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),He=(e,n,t=0)=>(n=an(n,t),e.x>=n.x&&e.y>=n.y&&e.x<=n.width+n.x&&e.y<=n.height+n.y),Bf=(e,n,t,s=0)=>{const i=n.x-s,r=n.y-s,o=n.width+s*2,a=n.height+s*2;return e.x>=i&&e.y>=r&&e.x<=i+o&&e.y<=r+a?e.x<=i+t&&e.y<=r+t?(e.x-i-t)**2+(e.y-r-t)**2<=t**2:e.x>=i+o-t&&e.y<=r+t?(e.x-i-o+t)**2+(e.y-r-t)**2<=t**2:e.x>=i+o-t&&e.y>=r+a-t?(e.x-i-o+t)**2+(e.y-r-a+t)**2<=t**2:e.x<=i+t&&e.y>=r+a-t?(e.x-i-t)**2+(e.y-r-a+t)**2<=t**2:!0:!1},Da=(...e)=>{if(e.length===0)throw new Error("the count of rect can not be 0");let n=1/0,t=1/0,s=-1/0,i=-1/0;for(const r of e)n=Math.min(n,r.x),t=Math.min(t,r.y),s=Math.max(s,r.x+r.width),i=Math.max(i,r.y+r.height);return{x:n,y:t,width:s-n,height:i-t}},ss=(e,n)=>e.x<=n.x+n.width&&e.x+e.width>=n.x&&e.y<=n.y+n.height&&e.y+e.height>=n.y,an=(e,n)=>({x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}),cc=(e,n,...t)=>{t=[e,n,...t];const s=Math.min(...t.map(a=>a.x)),i=Math.min(...t.map(a=>a.y)),r=Math.max(...t.map(a=>a.x)),o=Math.max(...t.map(a=>a.y));return{x:s,y:i,width:Math.abs(r-s),height:Math.abs(o-i)}};var ue=(e=>(e.n="n",e.s="s",e.e="e",e.w="w",e.nw="nw",e.ne="ne",e.sw="sw",e.se="se",e))(ue||{});const Df={n:{getLocalOrigin:(e,n)=>({x:e/2,y:n}),getNewSize:(e,n,t,s=0)=>({width:t.width,height:n.y-e.y-s})},e:{getLocalOrigin:(e,n)=>({x:0,y:n/2}),getNewSize:(e,n,t,s=0)=>({width:e.x-n.x-s,height:t.height})},s:{getLocalOrigin:e=>({x:e/2,y:0}),getNewSize:(e,n,t,s=0)=>({width:t.width,height:e.y-n.y-s})},w:{getLocalOrigin:(e,n)=>({x:e,y:n/2}),getNewSize:(e,n,t,s=0)=>({width:n.x-e.x-s,height:t.height})},nw:{getLocalOrigin:(e,n)=>({x:e,y:n}),getNewSize:(e,n,t,s=0)=>({width:n.x-e.x-s,height:n.y-e.y-s})},ne:{getLocalOrigin:(e,n)=>({x:0,y:n}),getNewSize:(e,n,t,s=0)=>({width:e.x-n.x-s,height:n.y-e.y-s})},sw:{getLocalOrigin:e=>({x:e,y:0}),getNewSize:(e,n,t,s=0)=>({width:n.x-e.x-s,height:e.y-n.y-s})},se:{getLocalOrigin:()=>({x:0,y:0}),getNewSize:(e,n,t,s=0)=>({width:e.x-n.x-s,height:e.y-n.y-s})}},Ha=(e,n,t,s=0)=>{const i=Df[e],r=new ut(...t.transform),o={width:0,height:0,transform:r.clone()},a=r.applyInverse(n),l=i.getLocalOrigin(t.width,t.height),c=i.getNewSize(a,l,t,s),u=new ut;u.scale(c.width/t.width,c.height/t.height),o.width=t.width,o.height=t.height,o.transform=o.transform.append(u);const f=o.transform.apply(i.getLocalOrigin(o.width,o.height)),h=r.apply(l),d={x:h.x-f.x,y:h.y-f.y};o.transform.prepend(new ut().translate(d.x,d.y));const g=Math.sign(c.width)||1,y=Math.sign(c.height)||1,b=new ut().translate(-o.width/2,-o.height/2).scale(g,y).translate(o.width/2,o.height/2);return o.transform.append(b),{width:o.width,height:o.height,transform:o.transform.getArray()}},Hf=e=>{const n=new ut(e.transform[0],e.transform[1],e.transform[2],e.transform[3],0,0),t=n.apply({x:e.width,y:0}),s=n.apply({x:0,y:e.height}),i={x:0,y:0};return{width:ur(t,i),height:ur(s,i)}},Ff=e=>{const n=Hf(e),t=n.width?e.width/n.width:1,s=n.height?e.height/n.height:1,i=new ut().scale(t,s),r=new ut(...e.transform).append(i);return{width:n.width,height:n.height,transform:r.getArray()}},Vf=(e,n)=>{const{x:t,y:s,width:i,height:r}=e;return[{x:t,y:s},{x:t+i,y:s},{x:t+i,y:s+r},{x:t,y:s+r}]},hr=e=>({x:e.minX,y:e.minY,width:e.maxX-e.minX,height:e.maxY-e.minY}),uc=e=>{let n=1/0,t=1/0,s=-1/0,i=-1/0;for(const r of e)n=Math.min(n,r.x),t=Math.min(t,r.y),s=Math.max(s,r.x),i=Math.max(i,r.y);return{minX:n,minY:t,maxX:s,maxY:i}},hc=(e,n)=>{let t=0,s=0,i=e.width,r=e.height;const o=e.transform,a=Vf({x:t,y:s,width:i,height:r}).map(l=>kf(o,l));return uc(a)},fc=e=>{if(e.length===0)throw new Error("the count of boxes can not be 0");let n=1/0,t=1/0,s=-1/0,i=-1/0;for(const r of e)n=Math.min(n,r.minX),t=Math.min(t,r.minY),s=Math.max(s,r.maxX),i=Math.max(i,r.maxY);return{minX:n,minY:t,maxX:s,maxY:i}},fr=(e,n)=>{const t=e.x*n.x+e.y*n.y,s=Math.sqrt(e.x*e.x+e.y*e.y)*Math.sqrt(n.x*n.x+n.y*n.y);let i=t/s;i>1?i=1:i<-1&&(i=-1);let r=Math.acos(i);return e.x*n.y-e.y*n.x<0&&(r=Math.PI*2-r),r},zf=(e,n={x:0,y:-1})=>{const s=new ut(e[0],e[1],e[2],e[3],0,0).apply(n);return fr(n,s)},Nf=e=>e*(180/Math.PI),Wf=e=>e*(Math.PI/180);var R=(e=>(e.TOP="top",e.LEFT="left",e.RIGHT="right",e.BOTTOM="bottom",e))(R||{});const Ci=(e,n)=>e.map((t,s)=>t-n[s]),fn=(e,n)=>e.map((t,s)=>t+n[s]),Uf=(e,n)=>Math.hypot(...Ci(n,e).map(Math.abs)),Fa=(e,n)=>{const t=Ci(n,e).map(Math.abs);return t[0]+t[1]},dc=e=>e.join(":"),Va=e=>JSON.parse(JSON.stringify(e)),Vs=(e,n)=>{const t=e.map(s=>[...s]);return t[0]=fn(t[0],[-n,-n]),t[1]=fn(t[1],[n,-n]),t[2]=fn(t[2],[n,n]),t[3]=fn(t[3],[-n,n]),t},dr=(e,n)=>e[0]>=n[0][0]&&e[0]<=n[1][0]&&e[1]>=n[0][1]&&e[1]<=n[2][1],jf=e=>{const n=new Map,t=[];return e.forEach(s=>{const i=dc(s);n.has(i)||(t.push(s),n.set(i,!0))}),t},Yf=e=>{const n=[];return e.forEach((t,s)=>{e.forEach((i,r)=>{s!==r&&(n.push([t[0],i[1]]),n.push([i[0],t[1]]))})}),n},Gf=(e,n,t)=>{const s=Ci(n,e);let i=!1;switch(t){case R.TOP:i=s[0]<0;break;case R.LEFT:i=s[1]<0;break;case R.RIGHT:i=s[1]>0;break;default:i=s[0]>0}return!i},Hi={[R.LEFT]:[0,-1],[R.RIGHT]:[0,1],[R.TOP]:[-1,0],[R.BOTTOM]:[1,0]},Xf={[R.LEFT]:R.RIGHT,[R.TOP]:R.BOTTOM,[R.BOTTOM]:R.TOP,[R.RIGHT]:R.LEFT},pr=e=>Xf[e],qf=(e,n)=>{const t=Object.keys(Hi);if(n){const s=t.filter(i=>i!==pr(e));return s.sort(i=>i===e?-1:1),s.map(i=>Hi[i])}return t.sort((s,i)=>s===e?-1:1),t.map(s=>Hi[s])},gr=e=>e===R.LEFT||e===R.RIGHT,mr=e=>{const n=[[R.LEFT,R.RIGHT],[R.TOP,R.BOTTOM]],t=[[...e].reverse(),e];return n.some(s=>t.some(i=>i[0]===s[0]&&i[1]===s[1]))},Kf=(e,n,t,s,i)=>{if(!mr([e.direction,n.direction]))return!1;const r=s.getGridPoint(t),o=s.getGridPoint(e.endpoint),a=s.getGridPoint(n.endpoint),l=[o[0],a[0]],c=[o[1],a[1]];[l,c].forEach(g=>{g.sort((y,b)=>y-b)});const u=gr(e.direction),f=u?r[1]:r[0],h=u?c:l,d=g=>u?[r[0],g]:[g,r[1]];for(let g=f,y=f;g>=h[0]&&y<=h[1];g--,y++){const b=d(g),x=d(g+1),T=d(y),S=d(y-1);if(!s.isValid(b)||!s.isValid(x)||!s.isValid(T)||!s.isValid(S)||!i(s.getRealPoint(d(g)),s.getRealPoint(d(g+1)))||!i(s.getRealPoint(d(y)),s.getRealPoint(d(y-1))))return!1}return!0},Zf=(e,n)=>[e,n].map(t=>({...t,endpoint:t.origin.slice()})),Jf=(e,n,t,s,i,r)=>s?n&&s?t.some(o=>n[o][r]>s[i[0]][r]&&n[o][r]<s[i[1]][r]):e[r]>s[i[0]][r]&&e[r]<s[i[1]][r]:!0,Qf=(e,n,t,s)=>{if(!e.box&&!n.box)return Zf(e,n);const i=[e,n].map(l=>Object.assign({...Va(l),endpoint:Va(l.origin)},l.box?{boundaryBox:Vs(l.box,t),originBoundaryBox:Vs(l.box,t)}:{})),r={[R.TOP]:-1,[R.LEFT]:-1,[R.RIGHT]:1,[R.BOTTOM]:1},o={[R.TOP]:[[0,1],[3,2]],[R.LEFT]:[[0,3],[1,2]],[R.RIGHT]:[[1,2],[0,3]],[R.BOTTOM]:[[3,2],[0,1]]};if(s)return i.forEach(({direction:l,endpoint:c,origin:u})=>{const f=r[l],h=gr(l)?0:1;c[h]=u[h]+t*f}),i;const a=Object.keys(r);return i.forEach(({box:l,direction:c,endpoint:u,origin:f,boundaryBox:h,originBoundaryBox:d},g)=>{a.forEach(y=>{const b=o[y],x=i[(g+1)%2],[T,S]=b,w=r[y],_=gr(y)?0:1,W=_===0?1:0,X=Jf(f,d,T,x.originBoundaryBox,S,W),k=l?l[T[0]]:f,Y=x.box?x.box[S[0]][_]-k[_]:x.origin[_]-k[_],N=Y>0?1:-1,Z=Math.abs(Y)/2,D=N===w&&Math.abs(Y)<t*2;X&&D?(l&&h&&T.forEach(ft=>{h[ft][_]=l[ft][_]+w*Z}),x.box&&S.forEach(ft=>{x.boundaryBox[ft][_]=x.box[ft][_]+w*Z*-1}),y===c&&(u[_]=f[_]+w*Z)):y===c&&(u[_]=f[_]+t*w)})}),i};var rn;let td=(rn=class{constructor(n,t){m(this,"grid");m(this,"points");m(this,"pointMap");m(this,"costs",[]);m(this,"xAxis",[]);m(this,"yAxis",[]);m(this,"params");this.points=n,this.grid=[],this.pointMap=[],this.params=t,this.setup()}setup(){const{getCost:n}=this.params||{},t=this.points,s=new Set,i=new Set;t.forEach(h=>{s.add(h[0]),i.add(h[1])});const r=i.size,o=s.size,a=Array.from(s.values()),l=Array.from(i.values());a.sort((h,d)=>h-d),l.sort((h,d)=>h-d);const c=Array.from({length:r},()=>new Array(o).fill(0)),u=Array.from({length:r},()=>new Array(o).fill(rn.basicCost)),f=Array.from({length:r},()=>new Array(o));for(let h=0;h<r;h++)for(let d=0;d<o;d++)f[h][d]=[a[d],l[h]],c[h][d]=!0,n&&(u[h][d]=n(f[h][d],rn.basicCost));this.grid=c,this.pointMap=f,this.yAxis=l,this.xAxis=a,this.costs=u}getGridPoint(n){return[this.yAxis.indexOf(n[1]),this.xAxis.indexOf(n[0])]}getRealPoint(n){return this.pointMap[n[0]][n[1]]}getWalkable(n,t){const{getWalkable:s}=this.params||{};return this.isValid(t)&&(s?s(this.getRealPoint(n),this.getRealPoint(t)):!0)}getCost(n){return this.costs[n[0]][n[1]]}isValid(n){const t=this.grid.length,s=this.grid[0].length;return n[0]>=0&&n[0]<t&&n[1]>=0&&n[1]<s}},m(rn,"basicCost",1),rn);const ed=e=>{if(e.length<3)return e;var n=[],t=e[0][0],s=e[0][1],i=e[1][0],r=e[1][1],o=i-t,a=r-s,l,c,u,f,h,d;for(h=Math.sqrt(o*o+a*a),o/=h,a/=h,n.push([t,s]),d=2;d<e.length;d++)l=i,c=r,u=o,f=a,i=e[d][0],r=e[d][1],o=i-l,a=r-c,h=Math.sqrt(o*o+a*a),o/=h,a/=h,(o!==u||a!==f)&&n.push([l,c]);return n.push([i,r]),n};function Ts(e,n,t,s){var i=(s[0]-t[0])*(e[1]-t[1])-(s[1]-t[1])*(e[0]-t[0]),r=(n[0]-e[0])*(e[1]-t[1])-(n[1]-e[1])*(e[0]-t[0]),o=(s[1]-t[1])*(n[0]-e[0])-(s[0]-t[0])*(n[1]-e[1]);if(o!==0){var a=i/o,l=r/o;if(0<=a&&a<=1&&0<=l&&l<=1)return!0}return!1}const zs=(e,n,t)=>{const[s,i,r,o]=t;return!!(Ts(e,n,s,i)||Ts(e,n,i,r)||Ts(e,n,r,o)||Ts(e,n,o,s))},nd=(e,n)=>e.some((s,i)=>zs(e[i],e[(i+1)%4],n))||n.some((s,i)=>zs(n[i],n[(i+1)%4],e)),sd=(e,n,t)=>{const i=e[0]*n[1]-e[1]*n[0]+n[0]*t[1]-n[1]*t[0]+t[0]*e[1]-t[1]*e[0],r=Uf(e,n);return Math.abs(i/r)<=0},za=e=>{if(e.length<3)return 0;let n=0;for(let t=1;t<e.length-1;t++)sd(e[t-1],e[t+1],e[t])||n++;return n},id=(e,n)=>fn(e,n).map(t=>Math.round(t/2));class rd{}class od{constructor(){m(this,"heap");this.heap=[null]}peek(){return this.heap[1]}remove(){this.swap(1,this.heap.length-1),this.heap.pop(),this.sink(1)}add(n){this.heap.push(n),this.swim()}clear(){this.heap=[null]}sink(n){const t=this.heap.length-1;let s=0;for(;n*2<=t&&(s=n*2,s+1<=t&&this.heap[s].compare(this.heap[s+1])>0&&s++,this.heap[n].compare(this.heap[s])>0);)this.swap(n,s),n=s}swim(){let n=this.heap.length-1,t=0;for(;n>1&&(t=n>>1,this.heap[n].compare(this.heap[t])<0);)this.swap(n,t),n=t}swap(n,t){const s=this.heap[n];this.heap[n]=this.heap[t],this.heap[t]=s}}class Fi extends rd{constructor(t,s=0,i=null){super();m(this,"G");m(this,"H");m(this,"parent");m(this,"xy");m(this,"key");m(this,"F");this.G=s,this.H=0,this.parent=i,this.xy=t,this.key=dc(t),this.F=s}setParent(t){this.parent=t}setG(t){this.G=t,this.F=this.H+this.G}setH(t){this.H=t,this.F=this.H+this.G}compare(t){return this.F-t.F}}const Fn=new od,Vi=new Map,hn=new Map,Na=(e,n)=>{const t=Ci(n,e);return t[0]===0?t[1]>0?R.BOTTOM:R.TOP:t[0]>0?R.RIGHT:R.LEFT};function Wa(e,n,t,s,i,r,o){const a=e.getGridPoint(n),l=e.getGridPoint(t),c=new Fi(a),u=new Fi(l),f=[];let h=!0,d=0;for(Fn.add(c),hn.set(c.key,c);hn.size;){const g=Fn.peek(),y=g.xy;if(Fn.remove(),hn.delete(g.key),g.key===u.key){if(g.parent&&!Gf(g.parent.xy,y,i))continue;let T=g;for(;T;)f.unshift(e.getRealPoint(T.xy)),T=T.parent;d=g.G;break}Vi.set(g.key,g);const b=qf(s,h),x=o!==void 0&&h?b.slice(o,o+1):b;h=!1,x.forEach(([T,S])=>{const w=fn(y,[T,S]),_=new Fi(w);if(!Vi.has(_.key)&&e.getWalkable(y,w)){const W=hn.get(_.key),X=Na(y,w),k=g.parent?Na(g.parent.xy,y):null,Y=k!==null&&k!==X,N=g.G+e.getCost(w)+(Y?.02:0),Z=r(w,e);_.setG(N),_.setH(Z),W?_.G<W.G&&(W.setG(N),W.setParent(g)):(_.setParent(g),Fn.add(_),hn.set(_.key,_))}})}return Fn.clear(),hn.clear(),Vi.clear(),{path:ed(f),grid:e,G:d}}const ad=(e,{startInfo:n,endInfo:t,waypoint:s,isCovered:i,checkWaypointWalkable:r})=>{const o=s&&Kf(n,t,s,e,r),a=(h,d)=>{const g=Fa(h,d.getGridPoint(t.endpoint));return o?g+Fa(h,d.getGridPoint(s)):g};if(i){const h=Wa(e,n.endpoint,t.endpoint,n.direction,t.direction,a);return h.path.push(t.origin),h.path.unshift(n.origin),h}const l=[0,1,2,4].map(h=>Wa(e,n.endpoint,t.endpoint,n.direction,t.direction,a,h)).filter(h=>h.path.length);let c=null,u=1/0,f=1/0;return l.forEach(h=>{const d=[...h.path];d.push(t.origin),d.unshift(n.origin);const g=za(h.path),y=za(d);(g<u||g===u&&y<f||g===u&&y===f&&h.G<c.G)&&(u=g,f=y,c=h)}),c||(c={grid:e,path:[],G:1/0},console.warn("Path not found")),c.path.push(t.origin),c.path.unshift(n.origin),c},ld=(e,n,t)=>{const s=e.box&&n.box?nd(e.box,n.box):!1,r=[[e.origin,n.box],[n.origin,e.box]].filter(h=>h[1]).every(([h,d])=>dr(h,d)),[o,a]=Qf(e,n,t,r),l=id(o.endpoint,a.endpoint),c=[[o.endpoint[0],l[1]],[a.endpoint[0],l[1]],[l[0],o.endpoint[1]],[l[0],a.endpoint[1]],l],u=l,f=[o.endpoint,a.endpoint,...c];return r||f.push(...o.boundaryBox??[],...a.boundaryBox??[]),{isIntersect:s,isCovered:r,startInfo:o,endInfo:a,allPoints:jf(Yf(f)),waypoint:u}},cd=(e,n,t)=>{const{isCovered:s,isIntersect:i,startInfo:r,endInfo:o,allPoints:a,waypoint:l}=ld(e,n,t),c=[r.boundaryBox&&Vs(r.boundaryBox,-1),o.boundaryBox&&Vs(o.boundaryBox,-1)].filter(Boolean),u=[r.box,o.box].filter(Boolean),f=i?!s&&mr([r.direction,o.direction])?2:0:5,h=c.length===2?!i:!s,d=new td(a,{getCost(y,b){const x=[0,1].reduce((T,S)=>u[S]&&dr(y,u[S])?T+2:c[S]&&dr(y,c[S])?T+1:T,0);return b+x*f},getWalkable(y,b){return h?c.every(x=>!zs(y,b,x)):!0}}),g=ad(d,{startInfo:r,endInfo:o,isCovered:s,waypoint:mr([r.direction,o.direction])?l:void 0,checkWaypointWalkable:(y,b)=>s||!b?!0:c.every(x=>!zs(y,b,x))});return{path:g,points:g.grid.points,boxs:[{box:r.boundaryBox},{box:o.boundaryBox}]}},Ua=e=>[e.x,e.y],ja=e=>{const{x:n,y:t,width:s,height:i}=e;return[[n,t],[n+s,t],[n+s,t+i],[n,t+i]]},Ya=e=>({x:e[0],y:e[1]}),vr=e=>{const n=Math.atan2(Math.abs(e[1]),Math.abs(e[0]))/Math.PI*180;let t=n;const s=45;e[0]<0?t=e[1]>=0?180-n:180+n:t=e[1]>=0?n:360-n;let i;return t<=s||t>360-s?i=R.LEFT:t>s&&t<=180-s?i=R.TOP:t>180-s&&t<=180+s?i=R.RIGHT:i=R.BOTTOM,i},ud=(e,n,t)=>{const s=cd({box:e.rect?ja(e.rect):void 0,origin:Ua(e.origin),direction:e.direction},{box:n.rect?ja(n.rect):void 0,origin:Ua(n.origin),direction:n.direction},t);return{controlPoints:s.path.path.map(Ya),mapPoints:s.points.map(Ya)}};function hd({x:e,y:n},t,s,i=0){return t+=i,s+=i,t===s?e*e+n*n<=t*t:e*e/(t*t)+n*n/(s*s)<=1}function fd(e,[n,t]){const s={x:n.x-e.x,y:n.y-e.y};t.x-e.x,t.y-e.y;const i={x:t.x-n.x,y:t.y-n.y},r=s.x*i.y-s.y*i.x;if(Math.abs(r)>Number.EPSILON)return!1;const o=s.x*i.x+s.y*i.y;if(o<0)return!1;const a=i.x*i.x+i.y*i.y;return!(o>a)}function dd(e,[n,t]){let s=((e.x-n.x)*(t.x-n.x)+(e.y-n.y)*(t.y-n.y))/((t.x-n.x)**2+(t.y-n.y)**2);return s=Math.max(0,Math.min(1,s)),{x:n.x+s*(t.x-n.x),y:n.y+s*(t.y-n.y)}}function pd(e){if(e.length<2)return[];const n=[];for(let t=0;t<e.length-1;t++)n.push([e[t],e[t+1]]);return n}function gd(e,[n,t],s){if(s===0)return fd(e,[n,t]);const i=dd(e,[n,t]);return ur(e,i)<=s/2}function md(e,n,t){return n.some(s=>gd(e,s,t))}function vd({x:e,y:n},t,s,i=0){t+=i,s+=i;const r=Math.abs(e*s)+Math.abs(n*t),o=t*s*.5;return r<=o}let ie=class{constructor(){m(this,"eventMap",new Map);m(this,"eventMapCache",new Map)}on(n,t){return this.eventMap.has(n)||this.eventMap.set(n,[]),this.eventMap.get(n).push(t),this}emit(n,...t){const s=this.eventMap.get(n);return!s||s.length===0?!1:(s.forEach(i=>{i(...t)}),!0)}off(n,t){if(this.eventMap.has(n)){const s=this.eventMap.get(n).filter(i=>i!==t);s.length?this.eventMap.set(n,s):this.eventMap.delete(n)}return this}clear(){this.eventMapCache.clear();const n=this.eventMap.entries();for(const[t,s]of n)this.eventMapCache.set(t,s);this.eventMap.clear()}reset(){this.eventMap.clear();const n=this.eventMapCache.entries();for(const[t,s]of n)this.eventMap.set(t,s)}};function yd(...e){console.warn(...e)}var Ct=[];for(var zi=0;zi<256;++zi)Ct.push((zi+256).toString(16).slice(1));function wd(e,n=0){return(Ct[e[n+0]]+Ct[e[n+1]]+Ct[e[n+2]]+Ct[e[n+3]]+"-"+Ct[e[n+4]]+Ct[e[n+5]]+"-"+Ct[e[n+6]]+Ct[e[n+7]]+"-"+Ct[e[n+8]]+Ct[e[n+9]]+"-"+Ct[e[n+10]]+Ct[e[n+11]]+Ct[e[n+12]]+Ct[e[n+13]]+Ct[e[n+14]]+Ct[e[n+15]]).toLowerCase()}var Ms,bd=new Uint8Array(16);function xd(){if(!Ms&&(Ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ms(bd)}var Cd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ga={randomUUID:Cd};function Td(e,n,t){if(Ga.randomUUID&&!n&&!e)return Ga.randomUUID();e=e||{};var s=e.random||(e.rng||xd)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,wd(s)}function In(){return Td()}function dn(){return window.devicePixelRatio||1}function Ni(e,n,t){const s=dn();e.width=n*s,e.height=t*s,e.style.width=`${n}px`,e.style.height=`${t}px`}function ke(e){e.setLineDash([]),e.lineDashOffset=0,e.lineCap="butt",e.lineJoin="miter"}const Md=/(\n|\r|\r\n)/;function yr(e,n,t,s){if(!t)return;const i=[],{width:r,height:o}=n,{fontSize:a,fontFamily:l,lineHeight:c}=s,u=a*c;e.font=`${a}px ${l}`;let f=0,h="";for(let x=0;x<t.length;x++){const T=t[x];if(Md.test(T))i.push({text:h,width:f}),f=0,h="";else{const S=e.measureText(T).width;f+S>r?(i.push({text:h,width:f}),h=T,f=S):(f+=S,h+=T)}}i.push({text:h,width:f});const d=n.y+o/2,g=n.x+r/2,y=i.length*u,b=d-y/2;e.textAlign="left",e.textBaseline="middle",e.fillStyle=s.color,i.forEach((x,T)=>{const S=g-x.width/2,w=b+u*T+u/2;e.beginPath(),e.fillText(x.text,S,w)})}function pc(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const Ed=e=>typeof e=="number"?e:(e=Number(e),isNaN(e)?0:e),Xa=e=>Math.round(Ed(e))|0,Ti=(e,n)=>{let t=!1,s=n.pageX,i=n.pageY;const r=a=>{var u,f;const l=a.pageX-s,c=a.pageY-i;t||(t=!0,(u=e.onDragStart)==null||u.call(e,a)),(f=e.onDragMove)==null||f.call(e,a,[l,c])},o=a=>{var l,c;(l=e.onUp)==null||l.call(e,a),t&&((c=e.onDragEnd)==null||c.call(e,a)),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o),window.removeEventListener("mouseleave",o)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",o),window.addEventListener("mouseleave",o)},_d=(e,n)=>{let t=e;for(;t;){if(n(t))return t;t=t.parentElement}return null};var gc=(e=>(e.RUNNING="running",e.STOPPED="stopped",e))(gc||{});class Pd{constructor(){m(this,"started",!1);m(this,"animations",[]);m(this,"tick",()=>{this.animations=this.animations.filter(n=>n.status==="running"),this.animations.length&&(this.animations.forEach(n=>n.run()),requestAnimationFrame(this.tick))})}add(n){this.animations.includes(n)||this.animations.push(n)}start(){this.started||requestAnimationFrame(this.tick)}}class Od{constructor(n,t){m(this,"startValue");m(this,"endValue");m(this,"duration");m(this,"startTime",Date.now());m(this,"status","stopped");this.manager=n,this.options=t,this.startValue=t.startValue,this.endValue=t.endValue,this.duration=t.duration}start(){this.startTime=Date.now(),this.status="running",this.manager.add(this),this.manager.start()}stop(){this.status="stopped"}run(){var i,r;const n=this.endValue-this.startValue;let t=Date.now()-this.startTime;t>this.duration&&(t=this.duration,this.options.loop?this.startTime=Date.now():this.status="stopped");const s=this.startValue+n*t/this.duration;this.options.onUpdate(s),t===this.duration&&((r=(i=this.options).onEnd)==null||r.call(i))}}let Wi=null;function mc(e){return Wi||(Wi=new Pd),new Od(Wi,e)}function vc(e){if(e===null||typeof e!="object")return e;const n=Array.isArray(e)?[]:{};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=vc(e[t]));return n}function qa(e){return e!==null&&typeof e=="object"}function yc(e,n,t=new WeakMap){if(!qa(e)||!qa(n))return e===n;if(e===n)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(n))return!1;if(t.has(e)||t.has(n))return!0;t.set(e,n);const s=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],i=[...Object.keys(n),...Object.getOwnPropertySymbols(n)];if(s.length!==i.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==i[r]||!yc(e[s[r]],n[i[r]],t))return!1;return!0}function wr(e,n){return yc(e,n)}class Sd extends ie{constructor(t){super();m(this,"modelList",[]);m(this,"modelMap",new Map);this.name=t}addModel(t){this.modelMap.has(t.id)||(this.modelList.push(t),this.modelMap.set(t.id,t),this.emit("addModel",t))}removeModel(t){this.modelMap.has(t.id)&&(this.modelList=this.modelList.filter(s=>s.id!==t.id),this.modelMap.delete(t.id),this.emit("removeModel",t),t.dispose())}dispose(){this.clear()}}var O=(e=>(e.rectChange="rectChange",e.change="change",e.mouseIn="mouseIn",e.mouseOut="mouseOut",e.mouseDown="mouseDown",e.mouseUp="mouseUp",e.REPAINT="repaint",e))(O||{}),is=(e=>(e.addModels="add-models",e.removeModels="remove-models",e.modelsChange="change",e))(is||{});class Rd extends ie{constructor(){super();m(this,"modelList",[]);m(this,"modelMap",new Map);m(this,"layerList",[]);m(this,"layerMap",new Map);const t=new Sd("default");this.addLayer(t)}addLayer(t){if(t.modelList.length>0){yd("!");return}this.layerMap.has(t.name)||(this.layerList.push(t),this.layerMap.set(t.name,t))}removeLayer(t){const s=this.getLayer(t);s&&s.name!=="default"&&(this.layerList=this.layerList.filter(i=>i.name!==t),this.layerMap.delete(t),s.modelList.forEach(i=>{this.modelList=this.modelList.filter(r=>r.id!==i.id),this.modelMap.delete(i.id)}),this.emit("remove-models",s.modelList),this.emit("change",s.modelList),s.dispose())}getLayer(t){return this.layerMap.get(t)||null}getDefaultLayer(){return this.getLayer("default")}_addModels(t){t.forEach(s=>{const i=s.getLayerId();let r=this.getLayer(i);r||(r=this.getDefaultLayer(),s.setLayerId("default")),s.on(O.change,()=>{this.emit("change",[s])}),this.modelMap.set(s.id,s),this.modelList.push(s),r.addModel(s)})}addModel(t){this._addModels([t]),this.emit("add-models",[t]),this.emit("change",[t])}addModels(t){this._addModels(t),this.emit("add-models",t),this.emit("change",t)}_removeModels(t){t.forEach(s=>{if(!this.modelMap.has(s.id))return;const i=s.getLayerId(),r=this.getLayer(i);r&&(r.removeModel(s),this.modelMap.delete(s.id),pc(this.modelList,s))})}removeModel(t){this._removeModels([t]),this.emit("remove-models",[t]),this.emit("change",[t])}removeModels(t){this._removeModels(t),this.emit("remove-models",t),this.emit("change",t)}each(t){for(let s=0;s<=this.layerList.length-1;s++){const i=this.layerList[s];for(let r=0;r<=i.modelList.length-1;r++){const o=i.modelList[r];if(t(o,i)===!0)return}}}reverseEach(t){for(let s=this.layerList.length-1;s>=0;s--){const i=this.layerList[s];for(let r=i.modelList.length-1;r>=0;r--){const o=i.modelList[r];if(t(o,i)===!0)return}}}has(t){return this.modelMap.has(t.id)}getModelList(){return this.modelList}dispose(){this.modelList.forEach(t=>t.dispose()),this.modelList=[],this.modelMap.clear(),this.layerList.forEach(t=>t.dispose()),this.layerList=[],this.layerMap.clear(),this.clear()}removeAll(){const t=this.modelList.slice();this._removeModels(t)}}class Mi extends ie{constructor(t,s=""){super();m(this,"rect",{x:0,y:0,width:0,height:0});m(this,"isHovered",!1);m(this,"isActive",!1);this.host=t,this.tag=s,this.on(O.change,()=>{this.getHost().emit(O.change)}),this.on(O.mouseIn,()=>{this.setIsHovered(!0)}),this.on(O.mouseOut,()=>{this.setIsHovered(!1)}),this.init()}init(){}updatePosition(){}getIsHovered(){return this.isHovered}setIsHovered(t){t!==this.isHovered&&(this.isHovered=t,this.emit(O.change))}getIsActive(){return this.isActive}setIsActive(t){t!==this.isActive&&(this.isActive=t,this.getHost().setActiveControl(t?this:null),this.emit(O.change))}getHost(){return this.host}getTag(){return this.tag}setSize(t,s){t===this.rect.width&&s===this.rect.height||(this.rect.width=t,this.rect.height=s)}setPosition(t,s){t===this.rect.x&&s===this.rect.y||(this.rect.x=t,this.rect.y=s)}getCenterPosition(){return{x:this.rect.x+this.rect.width/2,y:this.rect.y+this.rect.height/2}}setCenterPosition(t,s){const{x:i,y:r,width:o,height:a}=this.rect,l=t-o/2,c=s-a/2;l===i&&c===r||(this.rect.x=l,this.rect.y=c)}getScenePosition(){const t=this.getHost(),{x:s,y:i}=t.getRect();return{x:s+this.rect.x,y:i+this.rect.y}}getSceneCenterPosition(){const s=this.getHost().getWorldTransform(),i={x:this.rect.x+this.rect.width/2,y:this.rect.y+this.rect.height/2};return new ut(...s).apply(i)}getRect(){return this.rect}handleMousedown(t,s){}hitTest(t,s){const r=new ut(...this.getHost().getWorldTransform()).applyInverse({x:t,y:s});return He(r,this.getRect())}getCursor(){return"default"}dispose(){this.clear()}}var rs=(e=>(e.mouseIn="mouseIn",e.mouseOut="mouseOut",e.selected="selected",e.unselected="unselected",e.ATTR_CHANGE="attrChange",e))(rs||{});class $n extends ie{constructor(t=In()){super();m(this,"rect",{x:0,y:0,width:0,height:0});m(this,"transform",[1,0,0,1,0,0]);m(this,"layerId","");m(this,"isHovered",!1);m(this,"isSelected",!1);m(this,"activeControl",null);m(this,"textVisible",!0);this.id=t,this.on("mouseIn",()=>{this.setIsHovered(!0)}),this.on("mouseOut",()=>{this.setIsHovered(!1)}),this.on("selected",()=>{this.setIsSelected(!0)}),this.on("unselected",()=>{this.setIsSelected(!1)}),this.init()}init(){}getMinWidth(){return 0}getMinHeight(){return 0}getSize(){return{width:this.rect.width,height:this.rect.height}}setSize(t,s){t=Math.max(t,this.getMinWidth()),s=Math.max(s,this.getMinHeight());let i=!1;t!==this.rect.width&&(this.rect.width=t,i=!0),s!==this.rect.height&&(this.rect.height=s,i=!0),i&&(this.emit(O.rectChange),this.emit(O.change))}setPosition(t,s){const i=this.getRect();let r=t!==i.x||s!==i.y;this.rect.x=t,this.rect.y=s,r&&(this.emit(O.rectChange),this.emit(O.change))}getPosition(){const t=this.getRect();return{x:t.x,y:t.y}}getCenterPosition(){const t=this.getRect();return{x:t.x+t.width/2,y:t.y+t.height/2}}setCenterPosition(t,s){const{width:i,height:r}=this.getRect();this.setPosition(t-i/2,s-r/2)}move(t,s){this.rect.x+=t,this.rect.y+=s,(t!==0||s!==0)&&(this.emit(O.rectChange),this.emit(O.change))}getRect(){return{...this.rect}}getRenderRect(){return this.rect}getLayerId(){return this.layerId}setLayerId(t){this.layerId=t}getTransform(){return[...this.transform]}setTransform(t){this.transform=[...t],this.emit(O.rectChange),this.emit(O.change)}getWorldTransform(){const t=new ut(...this.getTransform()),{x:s,y:i}=this.getRect();return t.translate(s,i).getArray()}hitTest(t,s){return!1}beforePaint(t,s){t.save();const i=this.getWorldTransform();t.transform(...i)}afterPaint(t,s){t.restore()}getIsHovered(){return this.isHovered}setIsHovered(t){this.isHovered!==t&&(this.isHovered=t,this.emit(O.change))}getIsSelected(){return this.isSelected}setIsSelected(t){this.isSelected!==t&&(this.isSelected=t,this.emit(O.change))}getActiveControl(){return this.activeControl}setActiveControl(t){t!==this.activeControl&&(this.activeControl=t,this.emit(O.change))}dispose(){this.clear(),this.isSelected=!1,this.isHovered=!1}getBoundingBox(){return hc({...this.getSize(),transform:this.getWorldTransform()})}getBoundingRect(){return hr(this.getBoundingBox())}getRotate(){return zf(this.getTransform())}setRotate(t,s=this.getCenterPosition()){const i=this.getRotate(),r=t-i;if(r===0)return;const{x:o,y:a}=this.getPosition(),c=new ut().translate(o,a).translate(-s.x,-s.y).rotate(r).translate(-o,-a).translate(s.x,s.y).append(new ut(...this.getTransform())).getArray();this.setTransform(c)}getRotateDeg(){const t=Nf(this.getRotate());return Xa(t)}setRotateDeg(t){t=Xa(t),this.setRotate(Wf(t))}dRotate(t,s,i){const{x:r,y:o}=this.getPosition(),l=new ut().translate(r,o).translate(-i.x,-i.y).rotate(t).translate(-r,-o).translate(i.x,i.y).append(new ut(...s)).getArray();this.setTransform(l)}getMovable(){return!0}getResizeable(){return!0}getRotatable(){return!0}updateControlPosition(t){}setAttr(t,s){const i=this.getAttr(t);if(wr(i,s))return;const r=t.split(".");let o=this.attrs;for(let a=0;a<r.length-1;a++){if(!o)return;o=o[r[a]]}o&&(o[r[r.length-1]]=s),this.emit("attrChange",{property:t,newValue:s,oldValue:i}),this.emit(O.change)}getAttr(t){const s=t.split(".");let i=this.attrs;for(let r=0;r<s.length;r++){if(!i)return;i=i[s[r]]}return i}toJson(){const t={id:this.id,category:this.getCategory(),attrs:this.attrs,rect:this.rect,transform:this.transform,layerId:this.layerId};return vc(t)}static fromJson(t,s,i){const r=new i(t.id);return r.attrs=t.attrs,r.setPosition(t.rect.x,t.rect.y),r.setSize(t.rect.width,t.rect.height),r.transform=t.transform,r.setLayerId(t.layerId),r}getControlByTag(t){return null}getText(){return this.getAttr("content.text")}getTextStyle(){return this.getAttr("content.style")}getContet(){return this.getAttr("content")}setText(t){this.setAttr("content.text",t)}setTextStyle(t){this.setAttr("content.style",t)}setContent(t){this.setAttr("content",t),this.emit(O.change)}getTextVisible(){return this.textVisible}setTextVisible(t){this.textVisible=t,this.emit(O.change)}paintText(t){const{width:s,height:i}=this.getRect(),r=this.getText();r&&this.getTextVisible()&&(t.save(),t.beginPath(),t.rect(0,0,s,i),t.clip(),yr(t,{x:0,y:0,width:s,height:i},r,this.getTextStyle()),t.restore())}}m($n,"CATEGORY");const he=class he extends Mi{constructor(t,s){super(t,s);m(this,"updatePosition",()=>{this.getHost().updateControlPosition()});t.on(O.rectChange,this.updatePosition)}init(){this.setSize(he.SIZE,he.SIZE)}handleMousedown(t,s){const i=this.getHost(),r=i.getEnd();Ti({onDragStart:o=>{this.setIsActive(!0)},onDragMove:(o,a)=>{const l=s.getElementAt(o);let c;l&&l.control&&l.control instanceof lt&&l.control!==this?c=l.control:c=s.viewportManager.getCursorScenePoint(o),this.getHost().setEnd(c)},onDragEnd:o=>{this.setIsActive(!1);const a=this.getHost().getEnd();if(a!==r){const l={undo:()=>{i.setEnd(r)},redo:()=>{i.setEnd(a)}};s.actionManager.push(l)}}},t)}paint(t){const s=this.getRect();t.beginPath(),t.rect(s.x,s.y,s.width,s.height),t.fillStyle=t.fillStyle=this.getIsHovered()||this.getIsActive()?he.BORDER_COLOR:"#fff",t.fill(),t.setLineDash([]),t.strokeStyle=he.BORDER_COLOR,t.lineWidth=1,t.stroke()}getCursor(){return"move"}};m(he,"SIZE",8),m(he,"BORDER_WIDTH",2),m(he,"BORDER_COLOR","#0f8eff"),m(he,"FILL_COLOR","#0f8eff");let Ns=he;const Kn=class Kn extends $n{constructor(t,s,i=In()){super(i);m(this,"attrs",{lineColor:"#000",lineWidth:2,lineStyle:"dashed",lineJoin:"round",lineDash:[10,10],lineDashOffset:-20});m(this,"controlPoints",[]);m(this,"mapPoints",[]);m(this,"_endDirection",R.LEFT);m(this,"animation",null);m(this,"isCreating",!1);m(this,"pointControls",[]);m(this,"findPathPoints",()=>{const t=this.getStartInfo(),s=this.getEndInfo(),{mapPoints:i,controlPoints:r}=ud(t,s,20);this.mapPoints=i,this.controlPoints=r,r.shift(),r.pop(),this.emit(O.rectChange),this.emit(O.change)});this.start=t,this.end=s,this.id=i,t.getHost().on(O.rectChange,this.findPathPoints),"paint"in this.end&&this.end.getHost().on(O.rectChange,this.findPathPoints),this.startAnimation(),this.initPointControls()}initPointControls(){this.pointControls=[new Ns(this,"end")]}updateControlPosition(){const t=this.getRect();this.pointControls.forEach(s=>{if(s.getTag()==="end"){const{x:i,y:r}=this.getEndPoint();s.setCenterPosition(i-t.x,r-t.y)}})}hitTest(t,s){if(this.isCreating||this.getIsUpdating()||!He({x:t,y:s},this.getRenderRect()))return!1;if(this.getIsHovered()){const r=this.pointControls.find(o=>o.hitTest(t,s));if(r)return r}const i=pd(this.getAllPoints());return md({x:t,y:s},i,this.attrs.lineWidth+1)}getStartPoint(){return this.start.getSceneCenterPosition()}getEndPoint(){return"paint"in this.end?this.end.getSceneCenterPosition():this.end}setEnd(t){this.end!==t&&("paint"in this.end&&this.end.getHost().off(O.rectChange,this.findPathPoints),this.end=t,"paint"in t&&t.getHost().on(O.rectChange,this.findPathPoints),this.findPathPoints(),this.updateControlPosition(),this.emit(O.change))}setEndDirection(t){"paint"in this.end||this._endDirection!==t&&(this._endDirection=t,this.findPathPoints(),this.emit(O.change))}getStartInfo(){const t=this.start.getHost().getBoundingRect(),s=this.getStartDirection(),i=this.start.getSceneCenterPosition();let r=i;return s===R.LEFT?r={x:t.x,y:i.y}:s===R.RIGHT?r={x:t.x+t.width,y:i.y}:s===R.TOP?r={x:i.x,y:t.y}:s===R.BOTTOM&&(r={x:i.x,y:t.y+t.height}),{rect:t,origin:r,direction:s}}getEndInfo(){if("paint"in this.end){const t=this.end.getHost().getBoundingRect(),s=this.getEndDirection(),i=this.end.getSceneCenterPosition();let r=i;return s===R.LEFT?r={x:t.x,y:i.y}:s===R.RIGHT?r={x:t.x+t.width,y:i.y}:s===R.TOP?r={x:i.x,y:t.y}:s===R.BOTTOM&&(r={x:i.x,y:t.y+t.height}),{rect:t,origin:r,direction:s}}return{rect:void 0,origin:this.end,direction:this._endDirection}}getStartDirection(){const t=this.start.getSceneCenterPosition(),s=this.start.getHost().getCenterPosition(),i=[t.x-s.x,t.y-s.y],r=vr(i);return pr(r)}getEndDirection(){if("paint"in this.end){const t=this.end.getSceneCenterPosition(),s=this.end.getHost().getCenterPosition(),i=[t.x-s.x,t.y-s.y],r=vr(i);return pr(r)}return this._endDirection}getAllPoints(){const t=this.getStartPoint(),s=this.getEndPoint();return[t,...this.controlPoints,s]}getRect(){const t=this.getStartPoint(),s=this.getEndPoint();return cc(t,s,...this.controlPoints)}getRenderRect(){const t=this.getRect(),s=Math.max(Ns.BORDER_WIDTH,2),i=this.attrs.lineWidth*2+s;return an(t,i)}getSize(){const{width:t,height:s}=this.getRect();return{width:t,height:s}}getWorldTransform(){const{x:t,y:s}=this.getRect();return[1,0,0,1,t,s]}beforePaint(t,s){}paint(t){t.beginPath();const s=this.getAllPoints(),{x:i,y:r}=s.pop(),o=this.getEndDirection(),a=8,l=12;let c=1/0,u=1/0;s.forEach((d,g)=>{c=Math.min(d.x,c),u=Math.min(d.y,u),t[g?"lineTo":"moveTo"](d.x,d.y)}),o===R.LEFT?t.lineTo(i-l/2,r):o===R.RIGHT?t.lineTo(i+l/2,r):o===R.BOTTOM?t.lineTo(i,r+l/2):o===R.TOP&&t.lineTo(i,r-l/2);const{attrs:f}=this,h=f.lineWidth;t.strokeStyle=f.lineColor,t.lineJoin=f.lineJoin,t.lineWidth=h,f.lineStyle==="dashed"?(t.setLineDash(f.lineDash),t.lineDashOffset=f.lineDashOffset):f.lineStyle==="dotted"||t.setLineDash([]),t.stroke(),t.beginPath(),o===R.LEFT?(t.moveTo(i,r),t.lineTo(i-l,r-a/2),t.lineTo(i-l,r+a/2)):o===R.RIGHT?(t.moveTo(i,r),t.lineTo(i+l,r-a/2),t.lineTo(i+l,r+a/2)):o===R.BOTTOM?(t.moveTo(i,r),t.lineTo(i-a/2,r+l),t.lineTo(i+a/2,r+l)):o===R.TOP&&(t.moveTo(i,r),t.lineTo(i-a/2,r-l),t.lineTo(i+a/2,r-l)),t.closePath(),t.fillStyle=f.lineColor,t.fill(),this.getIsSelected()&&(t.save(),t.translate(c,u),this.pointControls.forEach(d=>{ke(t),d.paint(t)}),t.restore())}afterPaint(t,s){}getCategory(){return Kn.CATEGORY}getStart(){return this.start}getStartHost(){return this.start.getHost()}getEnd(){return this.end}getEndHost(){return"getHost"in this.end?this.end.getHost():null}move(t,s){if(t===0&&s===0)return;let i=!1;"paint"in this.end||(this.end.x+=t,this.end.y+=s,i=!0),"paint"in this.start||(i=!0),i&&(this.findPathPoints(),this.emit(O.rectChange),this.emit(O.change))}getResizeable(){return!1}getRotatable(){return!1}startAnimation(){if(!this.animation){const t=this.attrs.lineDashOffset;this.animation=mc({startValue:0,endValue:t,duration:1e3,loop:!0,onUpdate:s=>{this.setAttr("lineDashOffset",s)}})}this.animation.start()}stopAnimation(){var t;(t=this.animation)==null||t.stop(),this.animation=null}setAnimationState(t){t?this.startAnimation():this.stopAnimation()}getAnimationState(){var t;return((t=this.animation)==null?void 0:t.status)===gc.RUNNING}dispose(){var t,s;super.dispose(),(t=this.animation)==null||t.stop(),this.getStartHost().off(O.rectChange,this.findPathPoints),(s=this.getEndHost())==null||s.off(O.rectChange,this.findPathPoints)}reset(){var t;super.reset(),this.getStartHost().on(O.rectChange,this.findPathPoints),(t=this.getEndHost())==null||t.on(O.rectChange,this.findPathPoints),this.startAnimation()}toJson(){const t=super.toJson();t.start=this.getStartHost().id;const s=this.getEndHost();t.end=s?s.id:this.getEndPoint(),t.startControlDir=this.start.getTag();const i=this.end;return t.endControlDir="getTag"in i?i.getTag():this._endDirection,t}setIsCreating(t){this.isCreating=t}getIsUpdating(){return this.pointControls.some(t=>t.getIsActive())}static fromJson(t,s){const i=s.find(l=>l.id===t.start);if(!i)throw new Error(`Link:ID${t.start}`);const r=i.getControlByTag(t.startControlDir);let o;if(typeof t.end=="string"){const l=s.find(c=>c.id===t.end);if(!l)throw new Error(`Link:ID${t.end}`);o=l.getControlByTag(t.endControlDir)}else o=t.end;const a=new Kn(r,o,t.id);return a.setEndDirection(t.endControlDir),a.attrs=t.attrs,a.setPosition(t.rect.x,t.rect.y),a.setSize(t.rect.width,t.rect.height),a.transform=t.transform,a.setLayerId(t.layerId),a.findPathPoints(),a}};m(Kn,"CATEGORY","link");let Pt=Kn;const It=class It extends Mi{constructor(t,s){super(t,s);m(this,"updatePosition",()=>{this.getHost().updateControlPosition(this)});t.on(O.rectChange,this.updatePosition)}init(){this.setSize(It.SIZE,It.SIZE)}handleMousedown(t,s){let i=null;const o=this.getHost().getLayerId();Ti({onDragStart:a=>{this.setIsActive(!0)},onDragMove:(a,l)=>{const c=s.getElementAt(a);let u;c&&c.control&&c.control instanceof It&&c.control!==this?u=c.control:u=s.viewportManager.getCursorScenePoint(a),i?(i.setEndDirection(vr(l)),i.setEnd(u)):(i=new Pt(this,u),i.setIsCreating(!0),i.setLayerId(o),s.box.addModel(i))},onDragEnd:a=>{if(this.setIsActive(!1),!i)return;i.setIsCreating(!1);const l=s.getElementAt(a);l&&l.control&&l.control instanceof It&&i.setEnd(l.control);const c={undo(){s.box.removeModel(i)},redo(){s.box.addModel(i),i==null||i.reset()}};s.actionManager.push(c)}},t)}paint(t){const s=this.getRect(),i=s.x+s.width/2,r=s.y+s.height/2;t.beginPath(),t.arc(i,r,It.SIZE/2,0,Math.PI*2),this.getIsHovered()||this.getIsActive()?(t.fillStyle=It.FILL_COLOR,t.fill()):(t.fillStyle="#fff",t.fill()),t.strokeStyle=It.BORDER_COLOR,t.lineWidth=It.BORDER_WIDTH,t.stroke()}getCursor(){return"crosshair"}};m(It,"SIZE",8),m(It,"BORDER_WIDTH",2),m(It,"BORDER_COLOR","#0f8eff"),m(It,"FILL_COLOR","#0f8eff");let lt=It;const Ys=class Ys extends $n{constructor(t=In()){super(t);m(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff",content:{text:"",style:{color:"#000",fontSize:12,lineHeight:1.5,fontFamily:"Arial"}}});m(this,"rect",{x:0,y:0,width:200,height:150});m(this,"linkControls",[]);this.linkControls=[new lt(this,R.TOP),new lt(this,R.RIGHT),new lt(this,R.BOTTOM),new lt(this,R.LEFT)]}getConnectionPoints(){const{width:t,height:s}=this.getRect(),i=t/2,r=s/2;return[{x:i,y:0},{x:t,y:r},{x:i,y:s},{x:0,y:r}]}getBoundingBox(){const t=new ut(...this.getWorldTransform()),s=this.getConnectionPoints().map(i=>t.apply(i));return uc(s)}hitTest(t,s){var l;if(!He({x:t,y:s},this.getRenderRect()))return!1;if(this.getIsHovered()){const c=this.linkControls.find(u=>u.hitTest(t,s));if(c)return c}const{width:i,height:r}=this.getRect(),a=new ut().translate(i/2,r/2).prepend(new ut(...this.getWorldTransform())).applyInverse({x:t,y:s});return vd(a,i,r,(l=this.attrs.border)==null?void 0:l.width)}getRenderRect(){var i;let t=((i=this.attrs.border)==null?void 0:i.width)||1;const s=this.getBoundingRect();return t=Math.max(t,lt.SIZE/2+lt.BORDER_WIDTH),an(s,t)}beforePaint(t,s){t.save();const i=this.getWorldTransform();t.transform(...i)}paint(t){var r;const{attrs:s}=this,i=this.getConnectionPoints();t.beginPath(),[...i,i[0]].forEach((o,a)=>{t[a?"lineTo":"moveTo"](o.x,o.y)}),s.fill&&(t.fillStyle=s.fillColor,t.fill()),(r=s.border)!=null&&r.width&&(t.strokeStyle=s.border.color,t.lineWidth=s.border.width,s.border.style==="dashed"?t.setLineDash([10,10]):s.border.style==="dotted"?(t.setLineDash([s.border.width/2,s.border.width*2]),t.lineCap="round"):t.setLineDash([]),t.stroke()),this.paintText(t)}afterPaint(t,s){const i=this.getActiveControl();(this.getIsHovered()||i instanceof lt)&&this.linkControls.forEach(r=>{ke(t),r.paint(t)}),t.restore()}getCategory(){return Ys.CATEGORY}updateControlPosition(t){const s=this.getRect(),{width:i,height:r}=s;switch(t.getTag()){case R.TOP:t.setCenterPosition(i/2,0);break;case R.RIGHT:t.setCenterPosition(i,r/2);break;case R.BOTTOM:t.setCenterPosition(i/2,r);break;case R.LEFT:t.setCenterPosition(0,r/2)}}getControlByTag(t){return this.linkControls.find(s=>s.getTag()===t)||null}};m(Ys,"CATEGORY","diamond");let br=Ys;const Gs=class Gs extends $n{constructor(t=In()){super(t);m(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff",content:{text:"",style:{color:"#000",fontSize:12,lineHeight:1.5,fontFamily:"Arial"}}});m(this,"rect",{x:0,y:0,width:200,height:200});m(this,"linkControls",[]);this.id=t,this.linkControls=[new lt(this,R.TOP),new lt(this,R.RIGHT),new lt(this,R.BOTTOM),new lt(this,R.LEFT)]}getRenderRect(){var i;let t=((i=this.attrs.border)==null?void 0:i.width)||1;const s=this.getBoundingRect();return t=Math.max(t,lt.SIZE/2+lt.BORDER_WIDTH),an(s,t)}hitTest(t,s){var l;if(!He({x:t,y:s},this.getRenderRect()))return!1;if(this.getIsHovered()){const c=this.linkControls.find(u=>u.hitTest(t,s));if(c)return c}const{width:i,height:r}=this.getRect(),a=new ut().translate(i/2,r/2).prepend(new ut(...this.getWorldTransform())).applyInverse({x:t,y:s});return hd(a,i/2,r/2,((l=this.attrs.border)==null?void 0:l.width)??0)}beforePaint(t,s){t.save();const i=this.getWorldTransform();t.transform(...i)}paint(t){var l;const{attrs:s}=this,{width:i,height:r}=this.rect,o=i/2,a=r/2;if(t.beginPath(),i===r)t.arc(o,a,i/2,0,Math.PI*2);else{const c=i/2,u=r/2,f=c>u?1/c:1/u;t.moveTo(o+c,a);for(let h=0;h<2*Math.PI;h+=f)t.lineTo(o+c*Math.cos(h),a+u*Math.sin(h));t.closePath()}s.fill&&(t.fillStyle=s.fillColor,t.fill()),(l=s.border)!=null&&l.width&&(t.strokeStyle=s.border.color,t.lineWidth=s.border.width,s.border.style==="dashed"?t.setLineDash([10,10]):s.border.style==="dotted"?(t.setLineDash([s.border.width/2,s.border.width*2]),t.lineCap="round"):t.setLineDash([]),t.stroke()),this.paintText(t)}afterPaint(t,s){const i=this.getActiveControl();(this.getIsHovered()||i instanceof lt)&&this.linkControls.forEach(r=>{ke(t),r.paint(t)}),t.restore()}dispose(){super.dispose()}getCategory(){return Gs.CATEGORY}updateControlPosition(t){const s=this.getRect(),{width:i,height:r}=s;switch(t.getTag()){case R.TOP:t.setCenterPosition(i/2,0);break;case R.RIGHT:t.setCenterPosition(i,r/2);break;case R.BOTTOM:t.setCenterPosition(i/2,r);break;case R.LEFT:t.setCenterPosition(0,r/2)}}getControlByTag(t){return this.linkControls.find(s=>s.getTag()===t)||null}};m(Gs,"CATEGORY","ellipse");let xr=Gs;class Ld{constructor(){m(this,"classMap",new Map);this.register(Pt)}register(n){this.classMap.set(n.CATEGORY,n)}getInstance(n,t){const s=this.classMap.get(n);if(!s)throw new Error(`${n} is not registered`);return new s(t)}parseJson(n,t){const s=this.classMap.get(n.category);if(!s)throw new Error(`${n.category} is not registered`);return s.fromJson(n,t,s)}}const Xs=class Xs extends $n{constructor(t=In()){super(t);m(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff",roundGap:0,content:{text:"",style:{color:"#000",fontSize:12,lineHeight:1.5,fontFamily:"Arial"}}});m(this,"rect",{x:0,y:0,width:200,height:100});m(this,"linkControls",[]);this.id=t,this.linkControls=[new lt(this,R.TOP),new lt(this,R.RIGHT),new lt(this,R.BOTTOM),new lt(this,R.LEFT)]}getRoundGap(){return Math.min(Math.min(this.rect.width,this.rect.height)/2,this.attrs.roundGap??0)}getRenderRect(){var i;let t=((i=this.attrs.border)==null?void 0:i.width)||1;const s=this.getBoundingRect();return t=Math.max(t,lt.SIZE/2+lt.BORDER_WIDTH),an(s,t)}hitTest(t,s){if(!He({x:t,y:s},this.getRenderRect()))return!1;if(this.getIsHovered()){const l=this.linkControls.find(c=>c.hitTest(t,s));if(l)return l}const r=new ut(...this.getWorldTransform()).applyInverse({x:t,y:s}),{width:o,height:a}=this.getRect();return Bf(r,{x:0,y:0,width:o,height:a},this.getRoundGap())}paint(t){var a;const{attrs:s}=this,{width:i,height:r}=this.rect;t.beginPath();const o=this.getRoundGap();o?t.roundRect(0,0,i,r,o):t.rect(0,0,i,r),s.fill&&(t.fillStyle=s.fillColor,t.fill()),(a=s.border)!=null&&a.width&&(t.strokeStyle=s.border.color,t.lineWidth=s.border.width,s.border.style==="dashed"?t.setLineDash([10,10]):s.border.style==="dotted"?(t.setLineDash([s.border.width/2,s.border.width*2]),t.lineCap="round"):t.setLineDash([]),t.stroke()),this.paintText(t)}afterPaint(t,s){const i=this.getActiveControl();(this.getIsHovered()||i instanceof lt)&&this.linkControls.forEach(r=>{ke(t),r.paint(t)}),super.afterPaint(t,s)}dispose(){super.dispose()}getCategory(){return Xs.CATEGORY}updateControlPosition(t){const s=this.getRect(),{width:i,height:r}=s;switch(t.getTag()){case R.TOP:t.setCenterPosition(i/2,0);break;case R.RIGHT:t.setCenterPosition(i,r/2);break;case R.BOTTOM:t.setCenterPosition(i/2,r);break;case R.LEFT:t.setCenterPosition(0,r/2)}}getControlByTag(t){return this.linkControls.find(s=>s.getTag()===t)||null}};m(Xs,"CATEGORY","rect");let Cr=Xs;const fe=class fe extends Mi{constructor(n,t){super(n,t)}init(){this.setSize(fe.SIZE,fe.SIZE)}updatePosition(){const n=this.getHost().getRect();if(!n||n.width===0||n.height===0)return;const{width:t,height:s}=n,i=fe.SIZE/2,r=this.getTag();r===ue.nw?this.setPosition(0-i,0-i):r===ue.ne?this.setPosition(t-i,0-i):r===ue.sw?this.setPosition(0-i,s-i):r===ue.se?this.setPosition(t-i,s-i):r===ue.n?this.setPosition(t/2-i,0-i):r===ue.e?this.setPosition(t-i,s/2-i):r===ue.w?this.setPosition(0-i,s/2-i):r===ue.s&&this.setPosition(t/2-i,s-i)}hitTest(n,t){return super.hitTest(n,t)}paint(n){const t=this.getRect();n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.fillStyle=n.fillStyle=this.getIsHovered()||this.getIsActive()?fe.BORDER_COLOR:"#fff",n.fill(),n.setLineDash([]),n.strokeStyle=fe.BORDER_COLOR,n.lineWidth=1,n.stroke()}handleMousedown(n,t){const s=this.getHost(),i=s.getSelectionList().filter(y=>y.getResizeable());if(i.length===0)return;const r=new Map,o=new Map;i.forEach(y=>{r.set(y.id,y.getWorldTransform()),o.set(y.id,y.getRect())});let{x:a,y:l,width:c,height:u}=s.getBoundingRect();const f=new ut().translate(a,l);let h=t.viewportManager.getCursorViewPoint(n);const d=new Map,g=new Map;Ti({onDragStart:()=>{this.setIsActive(!0)},onDragMove:y=>{const b=t.viewportManager.getCursorViewPoint(y);if(b.x===h.x&&b.y===h.y)return;const x=t.viewportManager.getCursorScenePoint(y);h=b;let T=new ut;if(s.getSelectionList().length===1){const w=r.get(i[0].id),_=o.get(i[0].id),W=Ha(this.getTag(),x,{width:_.width,height:_.height,transform:w});T=new ut(...W.transform).append(new ut(...w).invert())}else{const w=Ha(this.getTag(),x,{width:c,height:u,transform:f.getArray()});T=new ut(...w.transform).append(f.clone().invert())}const S=T.getArray();i.forEach(w=>{const _=r.get(w.id),W=Ba(S,_),X=Ba($f([1,0,0,1,0,0]),W),{width:k,height:Y}=o.get(w.id),N=Ff({width:k,height:Y,transform:X});w.setSize(N.width,N.height);const[,,,,Z,D]=N.transform,J=w.getTransform();w.setPosition(Z-J[4],D-J[5]),d.set(w.id,w.getWorldTransform()),g.set(w.id,w.getRect())})},onDragEnd:y=>{this.setIsActive(!1);const b={undo:()=>{i.forEach(x=>{const{width:T,height:S,x:w,y:_}=o.get(x.id);x.setSize(T,S),x.setPosition(w,_)})},redo:()=>{i.forEach(x=>{const{width:T,height:S,x:w,y:_}=g.get(x.id);x.setSize(T,S),x.setPosition(w,_)})}};t.actionManager.push(b)}},n)}getCursor(){return`${this.getTag()}-resize`}};m(fe,"BORDER_WIDTH",1),m(fe,"SIZE",8),m(fe,"BORDER_COLOR","#0f8eff");let Tr=fe;const de=class de extends Mi{init(){this.setSize(de.SIZE,de.SIZE)}updatePosition(){const{width:n,height:t}=this.getHost().getRect();this.setPosition(n,-de.SIZE)}handleMousedown(n,t){const s=this.getHost(),i=s.getSelectionList().filter(y=>y.getRotatable());if(i.length===0)return;const r=new Map,o=new Map;i.forEach(y=>{r.set(y.id,y.getTransform()),o.set(y.id,{...y.getRect()})});const{x:a,y:l,width:c,height:u}=s.getBoundingRect(),f={x:a+c/2,y:l+u/2},h=t.viewportManager.getCursorScenePoint(n);let d=fr({x:0,y:-1},{x:h.x-f.x,y:h.y-f.y});s.togglePauseUpdateRect(!0);const g=new Map;Ti({onDragStart:()=>{this.setIsActive(!0)},onDragMove:y=>{const b=t.viewportManager.getCursorScenePoint(y),{x,y:T}=f,w=fr({x:0,y:-1},{x:b.x-x,y:b.y-T})-d;i.forEach(_=>{_.dRotate(w,r.get(_.id),{x,y:T}),g.set(_.id,_.getTransform())}),s.setRotate(w)},onDragEnd:y=>{this.setIsActive(!1),s.setRotate(0),s.togglePauseUpdateRect(!1),s.caculateContainRect();const b={undo:()=>{i.forEach(x=>{const T=r.get(x.id);x.setTransform(T)})},redo:()=>{i.forEach(x=>{const T=g.get(x.id);x.setTransform(T)})}};t.actionManager.push(b)}},n)}paint(n){const s=this.getIsHovered()||this.getIsActive()?de.ACTIVE_FILL_STYLE:de.FILL_STYLE;n.save(),n.translate(this.rect.x,this.rect.y),n.strokeStyle="rgba(0,0,0,0)",n.miterLimit=4,n.scale(.015625,.015625),n.save(),n.fillStyle=s,n.beginPath(),n.moveTo(793.6,993.28),n.bezierCurveTo(784.384,993.28,775.168,989.696,768,983.04),n.lineTo(594.432,808.9599999999999),n.bezierCurveTo(580.6080000000001,795.136,580.6080000000001,772.0959999999999,594.432,758.2719999999999),n.bezierCurveTo(608.256,744.448,631.296,744.448,645.12,758.2719999999999),n.lineTo(793.6,906.752),n.lineTo(942.08,758.2719999999999),n.bezierCurveTo(955.904,744.448,978.9440000000001,744.448,992.768,758.2719999999999),n.bezierCurveTo(1006.592,772.0959999999999,1006.592,795.136,992.768,808.9599999999999),n.lineTo(819.2,983.04),n.bezierCurveTo(812.032,989.6959999999999,802.816,993.28,793.6,993.28),n.closePath(),n.moveTo(250.88,450.56),n.bezierCurveTo(241.664,450.56,232.448,446.976,225.792,439.808),n.lineTo(51.712,266.24),n.bezierCurveTo(37.888000000000005,252.416,37.888000000000005,229.376,51.712,215.55200000000002),n.lineTo(225.79200000000003,41.98400000000001),n.bezierCurveTo(239.61600000000004,28.16000000000001,262.656,28.16000000000001,276.48,41.98400000000001),n.bezierCurveTo(290.30400000000003,55.80800000000001,290.30400000000003,78.84800000000001,276.48,92.67200000000001),n.lineTo(128.00000000000003,241.152),n.lineTo(276.48,389.63199999999995),n.bezierCurveTo(290.30400000000003,403.45599999999996,290.30400000000003,426.4959999999999,276.48,440.31999999999994),n.bezierCurveTo(269.312,446.97599999999994,260.096,450.55999999999995,250.88000000000002,450.55999999999995),n.closePath(),n.fill(),n.stroke(),n.restore(),n.save(),n.fillStyle=s,n.beginPath(),n.moveTo(793.6,993.28),n.bezierCurveTo(773.6320000000001,993.28,757.76,977.408,757.76,957.4399999999999),n.lineTo(757.76,803.8399999999999),n.bezierCurveTo(757.76,513.0239999999999,521.216,276.4799999999999,230.39999999999998,276.4799999999999),n.lineTo(76.8,276.4799999999999),n.bezierCurveTo(56.831999999999994,276.4799999999999,40.959999999999994,260.6079999999999,40.959999999999994,240.6399999999999),n.bezierCurveTo(40.959999999999994,220.6719999999999,56.831999999999994,204.7999999999999,76.8,204.7999999999999),n.lineTo(230.39999999999998,204.7999999999999),n.bezierCurveTo(560.64,204.7999999999999,829.4399999999999,473.5999999999999,829.4399999999999,803.8399999999999),n.lineTo(829.4399999999999,957.4399999999999),n.bezierCurveTo(829.4399999999999,977.4079999999999,813.568,993.28,793.5999999999999,993.28),n.closePath(),n.fill(),n.stroke(),n.restore(),n.restore()}};m(de,"SIZE",16),m(de,"FILL_STYLE","#333"),m(de,"ACTIVE_FILL_STYLE","#0f8eff");let Ws=de;const qs=class qs extends $n{constructor(t=In()){super(t);m(this,"attrs",{border:{width:2,color:"#000",style:"solid"},fill:!0,fillColor:"#fff",content:{text:"",style:{color:"#000",fontSize:12,lineHeight:1.5,fontFamily:"Arial"}}});m(this,"rect",{x:0,y:0,width:200,height:100});m(this,"linkControls",[]);this.linkControls=[new lt(this,R.TOP),new lt(this,R.RIGHT),new lt(this,R.BOTTOM),new lt(this,R.LEFT)]}hitTest(t,s){var l,c;if(!He({x:t,y:s},this.getRenderRect()))return!1;if(this.getIsHovered()){const u=this.linkControls.find(f=>f.hitTest(t,s));if(u)return u}const r=new ut(...this.getWorldTransform()).applyInverse({x:t,y:s}),{width:o,height:a}=this.getRect();return He(r,{x:0,y:0,width:o,height:a},((c=(l=this.attrs)==null?void 0:l.border)==null?void 0:c.width)??0)}getRenderRect(){var i;let t=((i=this.attrs.border)==null?void 0:i.width)||1;const s=this.getBoundingRect();return t=Math.max(t,lt.SIZE/2+lt.BORDER_WIDTH),an(s,t)}beforePaint(t,s){t.save();const i=this.getWorldTransform();t.transform(...i)}paint(t){var l;const{attrs:s}=this,{width:i,height:r}=this.getRect();t.beginPath();let o=Math.min(i,r)/2;const a=Math.max(0,i-2*o);t.moveTo(o,0),t.lineTo(o+a,0),t.arcTo(o+a+o,0,o+a+o,r/2,o),t.arcTo(o+a+o,r,o+a,r,o),t.lineTo(o,r),t.arcTo(0,r,0,r/2,o),t.arcTo(0,0,o,0,o),s.fill&&(t.fillStyle=s.fillColor,t.fill()),(l=s.border)!=null&&l.width&&(t.strokeStyle=s.border.color,t.lineWidth=s.border.width,s.border.style==="dashed"?t.setLineDash([10,10]):s.border.style==="dotted"?(t.setLineDash([s.border.width/2,s.border.width*2]),t.lineCap="round"):t.setLineDash([]),t.stroke()),this.paintText(t)}afterPaint(t,s){const i=this.getActiveControl();(this.getIsHovered()||i instanceof lt)&&this.linkControls.forEach(r=>{ke(t),r.paint(t)}),t.restore()}getCategory(){return qs.CATEGORY}updateControlPosition(t){const s=this.getRect(),{width:i,height:r}=s;switch(t.getTag()){case R.TOP:t.setCenterPosition(i/2,0);break;case R.RIGHT:t.setCenterPosition(i,r/2);break;case R.BOTTOM:t.setCenterPosition(i/2,r);break;case R.LEFT:t.setCenterPosition(0,r/2)}}getControlByTag(t){return this.linkControls.find(s=>s.getTag()===t)||null}};m(qs,"CATEGORY","terminator");let Mr=qs;const pn=class pn extends ie{constructor(t){super();m(this,"mousedown",!1);m(this,"selectionRect",null);m(this,"mouseEl",null);m(this,"mouseControl",null);m(this,"positionCache",null);m(this,"alignLineX",null);m(this,"alignLineY",null);m(this,"handleMouseDown",t=>{this.mousedown=!0,this.selectionRect=null;const s=this.editor.selectionManager,i=this.mouseEl;if((t.ctrlKey||t.metaKey)&&i){s.toggleSelection(i);return}this.mouseControl?(this.mouseControl.emit(O.mouseDown,t),this.mouseControl.handleMousedown(t,this.editor)):i?this.handleMoveElement(t,i):this.handleBoxSelection(t)});m(this,"handleMouseMove",t=>{const s=this.editor.viewportManager.getCursorScenePoint(t),i=this.editor.selectionManager.getControlAt(s),r=this.mouseEl,o=this.mouseControl;if(i)this.mouseControl=i,this.mouseEl=null;else{const a=this.editor.getElementAt(t)||null;this.mouseEl=(a==null?void 0:a.model)||null,this.mouseControl=(a==null?void 0:a.control)||null}this.mouseControl?this.setCursorStyle(this.mouseControl.getCursor()):this.mouseEl&&this.mouseEl.getMovable()?this.setCursorStyle("move"):this.setCursorStyle("default"),this.mouseEl!==r&&(r&&r.emit(rs.mouseOut,t),this.mouseEl&&this.mouseEl.emit(rs.mouseIn,t)),this.mouseControl!==o&&(o&&o.emit(O.mouseOut,t),this.mouseControl&&this.mouseControl.emit(O.mouseIn,t))});m(this,"handleMouseUp",t=>{this.mousedown=!1});m(this,"handleMouseLeave",t=>{this.mousedown=!1});m(this,"handleMouseWheel",t=>{if(t.preventDefault(),t.ctrlKey||t.metaKey){const s=this.editor.viewportManager.getCursorViewPoint(t);t.deltaY>0?this.editor.viewportManager.zoomIn(s):this.editor.viewportManager.zoomOut(s)}else{const s=this.editor.viewportManager.getZoom();this.editor.viewportManager.move(-t.deltaX/s,-t.deltaY/s)}});m(this,"handleKeydonw",t=>{const s=t.key.toLowerCase(),i=t.ctrlKey||t.metaKey;s==="backspace"||t.key==="delete"?this.editor.removeSelection():s==="z"&&i?t.shiftKey?this.editor.actionManager.redo():this.editor.actionManager.undo():s==="y"&&i?this.editor.actionManager.redo():["arrowup","arrowdown","arrowleft","arrowright"].includes(s)?this.moveElementByKey(s):s==="a"&&i&&(t.preventDefault(),this.editor.selectionManager.selectAll())});m(this,"handleKeyup",t=>{if(this.positionCache){const s=this.editor.selectionManager.getSelectionList().filter(a=>a.getMovable()),i=this.positionCache;this.positionCache=null;const r=new Map;s.forEach(a=>{r.set(a.id,{...a.getPosition()})});const o={undo(){s.forEach(a=>{const l=i.get(a.id),c=r.get(a.id),u=l.x-c.x,f=l.y-c.y;a.move(u,f)})},redo(){s.forEach(a=>{const l=i.get(a.id),c=r.get(a.id),u=c.x-l.x,f=c.y-l.y;a.move(u,f)})}};this.editor.actionManager.push(o)}});m(this,"handleDblclick",t=>{if(this.mouseEl){const s=this.mouseEl,i=this.editor.viewportManager.getZoom(),r=this.editor.viewportManager.getViewPoint({x:0,y:0},i),o=s.getRect(),a=new ut(...this.mouseEl.getWorldTransform()).scale(i,i),l=s.getText(),c=s.getTextStyle();s.setTextVisible(!1),this.editor.textInput.show(o,r,a.getArray(),l,c,u=>{const f=s.getText();s.setText(u),s.setTextVisible(!0);const h={undo(){s.setText(f)},redo(){s.setText(u)}};this.editor.actionManager.push(h)})}});this.editor=t,this.setup()}setup(){this.editor.topCanvas.addEventListener("mousedown",this.handleMouseDown),this.editor.topCanvas.addEventListener("mousemove",this.handleMouseMove),this.editor.topCanvas.addEventListener("mouseup",this.handleMouseUp),this.editor.topCanvas.addEventListener("mouseleave",this.handleMouseUp),this.editor.topCanvas.addEventListener("wheel",this.handleMouseWheel),this.editor.topCanvas.addEventListener("keydown",this.handleKeydonw),this.editor.topCanvas.addEventListener("keyup",this.handleKeyup),this.editor.topCanvas.addEventListener("dblclick",this.handleDblclick)}handleMoveElement(t,s){const i=this.editor.selectionManager;s&&!i.isSelected(s)&&i.setSelection([s]);const r=this.editor.viewportManager.getCursorScenePoint(t),o=this.mouseEl,a=i.getSelectionList().filter(d=>d.getMovable());let l=!1,c=r;if(a.length===1&&a[0]instanceof Pt)return;const u=this.editor.box.getModelList().filter(d=>!a.includes(d)&&!(d instanceof Pt)).map(d=>d.getBoundingRect()),f=d=>{const g=this.editor.viewportManager.getCursorScenePoint(d);let y=g.x-c.x,b=g.y-c.y;const x={...o.getBoundingRect()};if(u.length&&!(o instanceof Pt)){x.x+=y,x.y+=b;const T=this.editor.alignManager.measure(x,u);y+=T.x.offset,g.x+=T.x.offset,b+=T.y.offset,g.y+=T.y.offset,wr(T.x.line,this.alignLineX)||(this.alignLineX=T.x.line,this.emit(O.REPAINT)),wr(T.y.line,this.alignLineY)||(this.alignLineY=T.y.line,this.emit(O.REPAINT))}y===0&&b===0||(l?this.emit("movingElements"):(l=!0,this.emit("moveElementsStart")),this.selectionRect=null,a.forEach(T=>{T.move(y,b)}),c=g)},h=d=>{const g=!!(this.alignLineX||this.alignLineY);this.alignLineX&&(this.alignLineX=null),this.alignLineY&&(this.alignLineY=null),g&&this.emit(O.REPAINT);const y=c.x-r.x,b=c.y-r.y;if(y||b){let x={undo:()=>{a.forEach(T=>{T.move(-y,-b)})},redo:()=>{a.forEach(T=>{T.move(y,b)})}};this.editor.actionManager.push(x),this.emit("moveElementsEnd")}window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",h),window.removeEventListener("mouseleave",h)};window.addEventListener("mousemove",f),window.addEventListener("mouseup",h),window.addEventListener("mouseleave",h)}handleBoxSelection(t){const s=this.editor.selectionManager,i=this.editor.viewportManager.getCursorScenePoint(t);let r=t.clientX,o=t.clientY;const a=c=>{const u=this.editor.viewportManager.getCursorScenePoint(c);this.selectionRect=cc(i,u),this.emit(O.REPAINT)},l=c=>{const u=c.clientX-r,f=c.clientY-o;if(u||f){const h=this.selectionRect;this.selectionRect=null;const d=[];this.editor.box.each(g=>{const y=g.getRenderRect();ss(h,y)&&d.push(g)}),s.setSelection(d)}else s.clearSelection();this.emit(O.REPAINT),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l),window.removeEventListener("mouseleave",l)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",l),window.addEventListener("mouseleave",l)}setCursorStyle(t){this.editor.topCanvas.style.cursor=t}dispose(){this.editor.topCanvas.removeEventListener("mousedown",this.handleMouseDown),this.editor.topCanvas.removeEventListener("mousemove",this.handleMouseMove),this.editor.topCanvas.removeEventListener("mouseup",this.handleMouseUp),this.editor.topCanvas.removeEventListener("mouseleave",this.handleMouseUp),this.editor.topCanvas.removeEventListener("wheel",this.handleMouseWheel),this.editor.topCanvas.removeEventListener("keydown",this.handleKeydonw),this.editor.topCanvas.removeEventListener("keyup",this.handleKeyup),this.editor.topCanvas.removeEventListener("dblclick",this.handleDblclick)}paintTop(t){if(this.selectionRect&&(t.beginPath(),t.roundRect(this.selectionRect.x,this.selectionRect.y,this.selectionRect.width,this.selectionRect.height,2),t.fillStyle=pn.SELECTION_FILL_COLOR,t.fill(),t.strokeStyle=pn.SELECTION_STROKE_COLOR,t.lineWidth=2,t.stroke()),this.alignLineX){const[s,i]=this.alignLineX;t.beginPath(),t.lineWidth=2,t.setLineDash([10,10]),t.strokeStyle="red",t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.stroke()}if(this.alignLineY){const[s,i]=this.alignLineY;t.beginPath(),t.lineWidth=2,t.setLineDash([10,10]),t.strokeStyle="red",t.moveTo(s.x,s.y),t.lineTo(i.x,i.y),t.stroke()}}paintRoot(t){}isHovered(t){return this.mouseEl===t}moveElementByKey(t){const r={arrowup:[0,-5],arrowdown:[0,5],arrowleft:[-5,0],arrowright:[5,0]}[t];if(!r)return;const[o,a]=r,l=this.editor.selectionManager.getSelectionList().filter(c=>c.getMovable());this.positionCache||(this.positionCache=new Map,l.forEach(c=>{this.positionCache.set(c.id,{...c.getPosition()})})),l.forEach(c=>{c.move(o,a)})}};m(pn,"SELECTION_STROKE_COLOR","#0f8eff"),m(pn,"SELECTION_FILL_COLOR","#0f8eff33");let Er=pn;var os=(e=>(e.ZOOM_CHANGE="zoomChange",e))(os||{});const Ce=class Ce extends ie{constructor(t){super();m(this,"x",0);m(this,"y",0);m(this,"zoom",1);m(this,"zoomTextOpaticy",-1);m(this,"animation",null);this.editor=t;const{width:s,height:i}=this.getViewRect();this.move(s/2,i/2)}getZoom(){return this.zoom}zoomOut(t){const s=this.zoom;let i=s*(1+Ce.ZOOM_STEP);if(i=Math.min(i,Ce.MAX_ZOOM),i!==s){const{x:r,y:o}=t,{x:a,y:l}=this.getScenePoint(t),c=a-r/i,u=l-o/i;this.x=c,this.y=u,this.zoom=i,this.startAnimation(),this.emit("zoomChange",i),this.emit(O.change)}}zoomIn(t){const s=this.zoom;let i=s*(1-Ce.ZOOM_STEP);if(i=Math.max(i,Ce.MIN_ZOOM),i!==s){const{x:r,y:o}=t,{x:a,y:l}=this.getScenePoint(t),c=a-r/i,u=l-o/i;this.x=c,this.y=u,this.zoom=i,this.startAnimation(),this.emit("zoomChange",i),this.emit(O.change)}}move(t,s){this.x-=t,this.y-=s,(t!==0||s!==0)&&this.emit(O.change)}getViewport(){return{x:this.x,y:this.y,width:parseFloat(this.editor.topCanvas.style.width),height:parseFloat(this.editor.topCanvas.style.height)}}getViewRect(){const t=this.getViewport(),s=this.getZoom();return{x:this.x,y:this.y,width:t.width/s,height:t.height/s}}getCursorViewPoint(t,s){return s||(s=this.editor.container.getBoundingClientRect()),{x:t.clientX-s.left,y:t.clientY-s.top}}getCursorScenePoint(t,s){const i=this.getCursorViewPoint(t,s);return this.getScenePoint(i)}getScenePoint(t,s=this.zoom){const{x:i,y:r}=t,{x:o,y:a}=this.getViewport();return{x:o+i/s,y:a+r/s}}getViewPoint(t,s=this.zoom){const{x:i,y:r}=t,{x:o,y:a}=this.getViewport();return{x:(i-o)*s,y:(r-a)*s}}getViewCenter(){const t=this.getViewport();return{x:t.width/2,y:t.height/2}}startAnimation(){this.animation?this.animation.stop():this.animation=mc({duration:2e3,startValue:1,endValue:0,onUpdate:t=>{this.zoomTextOpaticy=t,this.emit(O.REPAINT)},onEnd:()=>{this.zoomTextOpaticy=-1}}),this.animation.start()}paintTop(t){if(this.zoomTextOpaticy>=0){const s=this.getZoom();t.save(),t.setTransform(1,0,0,1,0,0),t.font="30px Arial",t.fillStyle="#000",t.globalAlpha=this.zoomTextOpaticy,t.fillText(`ZOOM: ${s.toFixed(1)}`,10,40),t.restore()}}paintRoot(t){}dispose(){var t;this.clear(),(t=this.animation)==null||t.stop()}};m(Ce,"ZOOM_STEP",.1),m(Ce,"MIN_ZOOM",.1),m(Ce,"MAX_ZOOM",5);let as=Ce;const Ks=class Ks extends ie{constructor(t=Ks.MAX){super();m(this,"list",[]);m(this,"batch",null);m(this,"cursor",-1);m(this,"isOperating",!1);this.limit=t}push(t){if(!this.isOperating){if(this.batch){this.batch.push(t);return}this.cursor!==this.list.length-1&&this.list.splice(this.cursor+1,this.list.length),this.limit===this.list.length&&this.list.splice(0,1),this.list.push(t),this.cursor=this.list.length-1,this.emit(O.change)}}clear(){this.list=[],this.emit(O.change)}undoable(){return this.cursor>=0}redoable(){return this.cursor<this.list.length-1}undo(){if(!this.undoable())return;const t=this.list[this.cursor--];this.isOperating=!0;try{if(Array.isArray(t))for(let s=t.length-1;s>=0;s--)t[s].undo();else t.undo()}catch(s){console.warn(s)}finally{this.isOperating=!1}this.emit(O.change)}redo(){if(!this.redoable())return;const t=this.list[++this.cursor];this.isOperating=!0;try{Array.isArray(t)?t.forEach(s=>s.redo()):t.redo()}catch(s){console.warn(s)}finally{this.isOperating=!1}this.emit(O.change)}startBatch(){this.batch||(this.batch=[])}endBatch(){const t=this.batch;this.batch=null,t!=null&&t.length&&this.push(t)}dispose(){this.clear()}};m(Ks,"MAX",50);let _r=Ks;const gn=class gn extends ie{constructor(t){super();m(this,"selection",[]);m(this,"rect",{x:0,y:0,height:0,width:0});m(this,"resizers",[]);m(this,"rotator",new Ws(this));m(this,"pauseUpdateRect",!1);m(this,"rotate",0);m(this,"activeControl",null);m(this,"repaint",()=>{this.emit(O.REPAINT)});m(this,"caculateContainRect",()=>{if(!this.pauseUpdateRect){if(this.selection.length===1)this.rect=this.selection[0].getRect();else if(this.selection.length>1){const t=this.selection.map(s=>s.getBoundingBox());this.rect=hr(fc(t))}else this.rect={x:0,width:0,height:0,y:0};this.emit(O.rectChange),this.repaint()}});this.editor=t,t.box.on(is.removeModels,s=>{s.forEach(i=>{this.isSelected(i)&&this.removeSelection(i)})}),this.initResizers(),this.rotator.on(O.change,this.repaint),this.on(O.change,this.caculateContainRect)}initResizers(){this.resizers=Object.values(ue).map(t=>new Tr(this,t)),this.resizers.forEach(t=>{t.on(O.change,this.repaint)})}_addSelection(t){t.on(O.rectChange,this.caculateContainRect),t.emit(rs.selected),this.selection.push(t)}_removeSelection(t){t.off(O.rectChange,this.caculateContainRect),t.emit(rs.unselected),pc(this.selection,t)}_clearSelection(){for(let t=this.selection.length-1;t>=0;t--)this._removeSelection(this.selection[t])}selectAll(){const t=this.editor.box.getModelList();this.setSelection(t)}setSelection(t){this._clearSelection(),t.forEach(s=>this._addSelection(s)),this.emit("setSelection",t),this.emit(O.change)}addSelection(t){this.isSelected(t)||(this._addSelection(t),this.emit("addSelection",t),this.emit(O.change))}removeSelection(t){this.isSelected(t)&&(this._removeSelection(t),this.emit("removeSelection",t),this.emit(O.change))}clearSelection(){this.selection.length&&(this._clearSelection(),this.emit("clearSelection"),this.emit(O.change))}toggleSelection(t){this.isSelected(t)?this.removeSelection(t):this.addSelection(t)}isSelected(t){return this.selection.includes(t)}togglePauseUpdateRect(t){this.pauseUpdateRect=t}getRenderRect(){const t=this.getBoundingRect();return an(t,Ws.SIZE)}getBoundingRect(){const t=this.getRect();if(this.selection.length===1){const s=hc({...t,transform:this.getWorldTransform()});return hr(s)}else return t}getSelectionList(){return[...this.selection]}isOneLink(){return this.selection.length===1&&this.selection[0]instanceof Pt}getRect(){return this.rect}setPosition(t,s){}move(t,s){this.selection.forEach(i=>{i.move(t,s)})}setRotate(t){this.rotate=t,this.repaint()}getWorldTransform(){if(this.selection.length===1)return this.selection[0].getWorldTransform();const{x:t,y:s}=this.rect||{x:0,y:0};return[1,0,0,1,t,s]}paintTop(t){if(this.selection.length>0){t.save();const{width:s,height:i}=this.rect,r=this.getWorldTransform();t.transform(...r),this.selection.length>1&&this.rotate&&(t.translate(s/2,i/2),t.rotate(this.rotate),t.translate(-(s/2),-(i/2))),t.beginPath(),t.roundRect(0,0,s,i,2),t.strokeStyle=gn.SELECTION_STROKE_COLOR,t.lineWidth=2,t.setLineDash(gn.SELECTION_LINE_DASH),t.stroke(),t.translate(0,0),this.isOneLink()||(this.resizers.forEach(o=>{o.updatePosition(),o.paint(t)}),this.rotator.updatePosition(),this.rotator.paint(t)),t.restore()}}paintRoot(t){}getControlAt(t){if(this.selection.length===0)return;const s=this.getRenderRect();if(!He(t,s))return;const i=this.resizers.find(r=>r.hitTest(t.x,t.y));if(i)return i;if(this.rotator.hitTest(t.x,t.y))return this.rotator}getActiveControl(){return this.activeControl}setActiveControl(t){t!==this.activeControl&&(this.activeControl=t,this.emit(O.change))}dispose(){this.clear(),this.editor.box.off(is.removeModels,t=>{t.forEach(s=>{this.isSelected(s)&&this.removeSelection(s)})}),this.resizers.forEach(t=>t.dispose()),this.rotator.dispose()}};m(gn,"SELECTION_STROKE_COLOR","#0f8eff"),m(gn,"SELECTION_LINE_DASH",[5,5]);let Pr=gn;class Ad extends ie{constructor(t){super();m(this,"baseGap",20);m(this,"showGrid",!0);m(this,"showRuler",!0);m(this,"repaint",()=>{this.emit(O.REPAINT)});this.editor=t}onReady(){this.editor.viewportManager.on(O.change,this.repaint)}getGap(){const t=this.editor.viewportManager.getZoom(),s=[1,2,5,10,25,50,100,250,500,1e3,2500,5e3],i=this.baseGap/t;for(let r=0,o=s.length;r<o;r++)if(s[r]>=i)return s[r];return s[0]}paintRoot(t){if(!this.showGrid)return;const s=this.getGap(),{x:i,y:r,width:o,height:a}=this.editor.viewportManager.getViewRect(),l=Math.ceil(i/s)*s,c=this.editor.viewportManager.getZoom();for(let f=l;f<=i+o;f+=s)t.beginPath(),t.moveTo(f,r),t.lineTo(f,r+a),t.lineWidth=1/c,t.strokeStyle=f%(s*5)===0?"#ddd":"#eee",t.stroke();const u=Math.ceil(r/s)*s;for(let f=u;f<=r+a;f+=s)t.beginPath(),t.moveTo(i,f),t.lineTo(i+o,f),t.lineWidth=1/c,t.strokeStyle=f%(s*5)===0?"#ddd":"#eee",t.stroke()}paintTop(t){if(!this.showRuler)return;const s=this.getGap(),{x:i,y:r,width:o,height:a}=this.editor.viewportManager.getViewRect(),l=dn();t.save(),t.setTransform(1,0,0,1,0,0),t.scale(l,l);const c=20,u=4,f=5,h=this.editor.mainCanvas.width,d=this.editor.mainCanvas.height;t.beginPath(),t.fillStyle="#fff",t.fillRect(0,0,h,c),t.beginPath(),t.fillStyle="#fff",t.fillRect(0,0,c,d);const g=Math.ceil(i/s)*s;for(let b=g;b<=i+o;b+=s){t.beginPath();const x=this.editor.viewportManager.getViewPoint({x:b,y:r}),T=b%(s*5)===0;if(t.moveTo(x.x,x.y+c),t.lineTo(x.x,x.y+c-(T?f:u)),t.strokeStyle=T?"#666":"transparent",t.stroke(),T){const S=s*5,w=c-f;yr(t,{x:x.x-S/2,y:x.y,width:S,height:w},`${b}`,{color:"#666",fontFamily:"Arial",fontSize:w-4,lineHeight:1.5})}}const y=Math.ceil(r/s)*s;for(let b=y;b<=r+a;b+=s){t.beginPath();const x=this.editor.viewportManager.getViewPoint({x:i,y:b}),T=b%(s*5)===0;if(t.moveTo(x.x+c,x.y),t.lineTo(x.x+c-(T?f:u),x.y),t.strokeStyle=T?"#666":"transparent",t.stroke(),T){const S=s*5,w=c-f;t.save();const _={x:x.x+w/2,y:x.y};t.translate(_.x,_.y),t.rotate(-Math.PI/2),t.translate(-_.x,-_.y),yr(t,{x:x.x+w/2-S/2,y:x.y-w/2,width:S,height:w},`${b}`,{color:"#666",fontFamily:"Arial",fontSize:w-4,lineHeight:1.5}),t.fill(),t.restore()}}t.beginPath(),t.fillStyle="#fff",t.fillRect(0,0,c,c),t.beginPath(),t.moveTo(0,c),t.lineTo(h,c),t.strokeStyle="#666",t.lineWidth=1,t.stroke(),t.beginPath(),t.moveTo(c,0),t.lineTo(c,d),t.strokeStyle="#666",t.lineWidth=1,t.stroke(),t.restore()}getShowRuler(){return this.showRuler}setShowRuler(t){this.showRuler!==t&&(this.showRuler=t,this.repaint())}getShowGrid(){return this.showGrid}setShowGrid(t){this.showGrid!==t&&(this.showGrid=t,this.repaint())}dispose(){this.clear(),this.editor.viewportManager.off(O.change,this.repaint)}}const Es="";class Id{constructor(n){m(this,"container",document.createElement("div"));m(this,"inputDiv",document.createElement("div"));m(this,"callbck",null);m(this,"text",Es);m(this,"handleBlur",()=>{const n=this.inputDiv.innerText;this.callbck&&(this.callbck(n),this.callbck=null),this.remove()});m(this,"handleInput",()=>{this.inputDiv.innerText||(this.inputDiv.innerText=Es),this.text=this.inputDiv.innerText});this.editor=n,this.container.style.position="absolute",Object.assign(this.container.style,{display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"left top",borderStyle:"solid",borderColor:"transparent",boxSizing:"border-box"}),this.container.addEventListener("mousedown",t=>{_d(t.target,i=>i===this.inputDiv)||t.preventDefault()}),this.inputDiv.setAttribute("contenteditable","true"),this.inputDiv.addEventListener("blur",this.handleBlur),this.inputDiv.addEventListener("input",this.handleInput),Object.assign(this.inputDiv.style,{wordBreak:"break-all",whiteSpace:"pre-wrap",textAlign:"center",outlineStyle:"none",lineHeight:1.5}),this.container.appendChild(this.inputDiv)}show(n,{x:t,y:s},i,r,o,a){this.container.style.left=`${t}px`,this.container.style.top=`${s}px`,this.container.style.width=`${n.width}px`,this.container.style.height=`${n.height}px`,this.container.style.transform=`matrix(${i.join(",")})`,this.inputDiv.style.color=o.color,this.inputDiv.style.fontSize=`${o.fontSize}px`,this.inputDiv.style.fontFamily=o.fontFamily,this.inputDiv.style.lineHeight=`${o.lineHeight}`,r=r||Es,this.text=r,this.inputDiv.innerText=r,this.editor.container.appendChild(this.container),setTimeout(()=>{this.inputDiv.focus(),this.callbck=a})}focus(){this.inputDiv.focus()}remove(){this.editor.container.removeChild(this.container),this.text=Es}}var ln=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.VERTICAL_CENTER="verticalCenter",e.HORIZONTAL_CENTER="horizontalCenter",e))(ln||{});class $d extends ie{constructor(t){super();m(this,"minDistance",5);this.editor=t}align(t,s){const i=t.map(l=>l.getBoundingBox()),r=t.map(l=>l.getPosition()),o=fc(i);let a=!1;switch(s){case"top":a=this.alignTop(t,o,i);break;case"right":a=this.alignRight(t,o,i);break;case"bottom":a=this.alignBottom(t,o,i);break;case"left":a=this.alignLeft(t,o,i);break;case"horizontalCenter":a=this.alignHorizontalCenter(t,o,i);break;case"verticalCenter":a=this.alignVerticalCenter(t,o,i);break}if(a){const l=t.map(u=>u.getPosition()),c={undo:()=>{t.forEach((u,f)=>{const h=r[f];u.setPosition(h.x,h.y)})},redo:()=>{t.forEach((u,f)=>{const h=l[f];u.setPosition(h.x,h.y)})}};this.editor.actionManager.push(c)}}alignTop(t,s,i){let r=!1;return t.forEach((o,a)=>{const l=s.minY-i[a].minY;l!==0&&(r=!0,this.updateModel(o,0,l))}),r}alignBottom(t,s,i){let r=!1;return t.forEach((o,a)=>{const l=s.maxY-i[a].maxY;l!==0&&(r=!0,this.updateModel(o,0,l))}),r}alignLeft(t,s,i){let r=!1;return t.forEach((o,a)=>{const l=s.minX-i[a].minX;l!==0&&(r=!0,this.updateModel(o,l,0))}),r}alignRight(t,s,i){let r=!1;return t.forEach((o,a)=>{const l=s.maxX-i[a].maxX;l!==0&&(r=!0,this.updateModel(o,l,0))}),r}alignVerticalCenter(t,s,i){let r=!1;const o=s.minY/2+s.maxY/2;return t.forEach((a,l)=>{const c=o-(i[l].minY/2+i[l].maxY/2);c!==0&&(r=!0,this.updateModel(a,0,c))}),r}alignHorizontalCenter(t,s,i){let r=!1;const o=s.minX/2+s.maxX/2;return t.forEach((a,l)=>{const c=o-(i[l].minX/2+i[l].maxX/2);c!==0&&(r=!0,this.updateModel(a,c,0))}),r}updateModel(t,s,i){const r=t.getPosition();t.setPosition(r.x+s,r.y+i)}measure(t,s){return{x:this.measureX(t,s),y:this.measureY(t,s)}}measureX(t,s){let i=this.minDistance,r=null,o=0;const a=t.x,l=t.x+t.width/2,c=t.x+t.width,u=[a,l,c];for(let f=0;f<s.length;f++){const h=s[f];if(ss(h,t))continue;const d=h.x,g=h.x+h.width/2,y=h.x+h.width,b=[d,g,y];u.forEach((x,T)=>{b.forEach((S,w)=>{let _=Math.abs(x-S);_<i&&(i=_,t.y<h.y?r=[{x:S,y:t.y+t.height},{x:S,y:h.y}]:r=[{x:S,y:t.y},{x:S,y:h.y+h.height}],o=S-x)})})}return{line:r,offset:o}}measureY(t,s){let i=this.minDistance,r=null,o=0;const a=t.y,l=t.y+t.height/2,c=t.y+t.height,u=[a,l,c];for(let f=0;f<s.length;f++){const h=s[f];if(ss(h,t))continue;const d=h.y,g=h.y+h.height/2,y=h.y+h.height,b=[d,g,y];u.forEach((x,T)=>{b.forEach((S,w)=>{let _=Math.abs(x-S);_<i&&(i=_,t.x<h.x?r=[{x:t.x+t.width,y:S},{x:h.x,y:S}]:r=[{x:t.x,y:S},{x:h.x+h.width,y:S}],o=S-x)})})}return{line:r,offset:o}}paintRoot(t){}paintTop(t){}dispose(){this.clear()}}class kd{constructor(n){m(this,"rootCanvas");m(this,"rootCtx");m(this,"mainCanvas");m(this,"mainCtx");m(this,"topCanvas");m(this,"topCtx");m(this,"eventManager");m(this,"viewportManager");m(this,"actionManager");m(this,"selectionManager");m(this,"grid");m(this,"dirtyList",new Set);m(this,"paintAll",!0);m(this,"frameRects",new Map);m(this,"plugins",[]);m(this,"pluginsDirty",!0);m(this,"showPerformance",!0);m(this,"box",new Rd);m(this,"textInput",new Id(this));m(this,"alignManager");m(this,"version","1.0.1");m(this,"resize",()=>{const{width:n,height:t}=this.container.getBoundingClientRect();Ni(this.rootCanvas,n,t),Ni(this.mainCanvas,n,t),Ni(this.topCanvas,n,t),this.paintAll=!0,this.pluginsDirty=!0});m(this,"repaintPlugin",()=>{this.pluginsDirty=!0});m(this,"repaint",()=>{const n=Date.now();this.paintAll?this.fullRepaint():this.dirtyList.size&&this.partRepaint(),this.pluginsDirty&&(this.paintTop(),this.paintRoot());const t=Date.now()-n;this.showPerformance&&this.paintPerformance(t),this.pluginsDirty=!1,this.paintAll=!1,this.dirtyList.clear(),requestAnimationFrame(this.repaint)});this.container=n,n.style.position="relative",[this.rootCanvas,this.rootCtx]=this.createCanvas(),[this.mainCanvas,this.mainCtx]=this.createCanvas(),[this.topCanvas,this.topCtx]=this.createCanvas(),this.resize(),this.actionManager=new _r,this.eventManager=new Er(this),this.installPlugin(this.eventManager),this.selectionManager=new Pr(this),this.installPlugin(this.selectionManager),this.grid=new Ad(this),this.installPlugin(this.grid),this.viewportManager=new as(this),this.installPlugin(this.viewportManager),this.viewportManager.on(O.change,()=>{this.paintAll=!0,this.pluginsDirty=!0}),this.alignManager=new $d(this),this.installPlugin(this.alignManager),this.box.on(is.modelsChange,t=>{t.forEach(s=>this.dirtyList.add(s))}),this.box.on(is.removeModels,t=>{t.forEach(s=>this.frameRects.delete(s.id))}),this.ready(),requestAnimationFrame(this.repaint)}ready(){this.plugins.forEach(n=>{var t;return(t=n.onReady)==null?void 0:t.call(n)})}createCanvas(){const n=document.createElement("canvas");n.setAttribute("tabindex","-1");const t=n.getContext("2d");return Object.assign(n.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",outline:"none"}),this.container.appendChild(n),window.addEventListener("resize",this.resize),[n,t]}installPlugin(n){n.on(O.REPAINT,this.repaintPlugin),this.plugins.push(n)}paintPerformance(n){let t=60;n>17&&(t=1e3/n);const s=`FPS:${parseInt(t+"")}`,i=this.topCtx;i.save(),i.setTransform(1,0,0,1,0,0),i.font="30px Arial",i.fillStyle="#f00";const r=i.measureText(s).width,o=this.topCanvas.width;i.fillText(s,o-10-r,40),i.restore()}getElementsAt(n){const{x:t,y:s}=this.viewportManager.getCursorScenePoint(n),i=[];return this.box.reverseEach(r=>{r.hitTest(t,s)&&i.push(r)}),i}getElementAt(n){const{x:t,y:s}=this.viewportManager.getCursorScenePoint(n);let i=null,r=null;return this.box.reverseEach(o=>{const a=o.hitTest(t,s);if(a)return i=o,typeof a!="boolean"&&(r=a),!0}),i?{model:i,control:r}:null}fullRepaint(){const n=this.mainCtx;n.save(),n.setTransform(1,0,0,1,0,0);const t=this.viewportManager.getViewport();n.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const s=dn(),i=this.viewportManager.getZoom(),r=-t.x,o=-t.y;n.scale(s*i,s*i),n.translate(r,o),this.box.each(a=>{this.paintModel(a,n)}),n.restore()}findDirtyRect(){if(this.dirtyList.size===0)return{rect:{x:0,y:0,width:0,height:0},models:new Set};const n=this.viewportManager.getViewRect(),t=new Set(this.dirtyList),s=this.box.getModelList(),i=[...t].reduce((o,a)=>{o.push(a.getRenderRect());const l=this.frameRects.get(a.id);return l&&o.push(l),o},[]);let r=Da(...i);for(let o=0;o<s.length;o++){const a=s[o];if(t.has(a))continue;const l=a.getRenderRect();ss(l,n)&&ss(l,r)&&(t.add(a),r=Da(l,r),o=-1)}return{rect:r,models:t}}partRepaint(){const{rect:n,models:t}=this.findDirtyRect();if(!t.size)return;const s=this.mainCtx;s.save(),s.setTransform(1,0,0,1,0,0);const i=this.viewportManager.getViewport(),r=dn(),o=this.viewportManager.getZoom(),a=-i.x,l=-i.y;s.scale(r*o,r*o),s.translate(a,l),s.clearRect(n.x,n.y,n.width,n.height),this.box.each(c=>{t.has(c)&&this.paintModel(c,s)}),s.restore()}paintModel(n,t){if(this.box.has(n)){const s=n.getRenderRect();this.frameRects.set(n.id,{...s}),ke(t),n.beforePaint(t,this),n.paint(t),n.afterPaint(t,this)}else this.frameRects.delete(n.id)}paintTop(){const n=this.topCtx;n.save(),n.setTransform(1,0,0,1,0,0);const t=this.viewportManager.getViewport();n.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const s=dn(),i=this.viewportManager.getZoom(),r=-t.x,o=-t.y;n.scale(s*i,s*i),n.translate(r,o),this.plugins.forEach(a=>{ke(n),a.paintTop(n)}),n.restore()}paintRoot(){const n=this.rootCtx;n.save(),n.setTransform(1,0,0,1,0,0);const t=this.viewportManager.getViewport();n.clearRect(0,0,this.mainCanvas.width,this.mainCanvas.height);const s=dn(),i=this.viewportManager.getZoom(),r=-t.x,o=-t.y;n.scale(s*i,s*i),n.translate(r,o),this.plugins.forEach(a=>{ke(n),a.paintRoot(n)}),n.restore()}addModel(n){this.box.addModel(n);const t={undo:()=>{this.box.removeModel(n)},redo:()=>{this.box.addModel(n),n.reset()}};this.actionManager.push(t)}removeModel(n){const t=new Set;t.add(n),this.box.each(r=>{if(r instanceof Pt){const o=r.getStartHost(),a=r.getEndHost();(o===n||a===n)&&t.add(r)}});const s=[...t];this.box.removeModels(s);const i={undo:()=>{this.box.addModels(s),s.forEach(r=>r.reset())},redo:()=>{this.box.removeModels(s)}};this.actionManager.push(i)}removeModels(n){const t=new Set(n);this.box.each(r=>{if(r instanceof Pt){const o=r.getStartHost(),a=r.getEndHost();(t.has(o)||a&&t.has(a))&&t.add(r)}});const s=[...t];this.box.removeModels(s);const i={undo:()=>{this.box.addModels(s),s.forEach(r=>r.reset())},redo:()=>{this.box.removeModels(s)}};this.actionManager.push(i)}removeSelection(){const n=this.selectionManager.getSelectionList();n.length>0&&(this.removeModels(n),this.selectionManager.clearSelection())}getShowPerformance(){return this.showPerformance}setShowPerformance(n){this.showPerformance=n}dispose(){this.box.dispose(),this.eventManager.dispose(),this.viewportManager.dispose(),this.actionManager.dispose(),this.selectionManager.dispose(),this.grid.dispose()}getSceneData(){const n=[];this.box.each(r=>{const o=r.toJson();n.push(o)});const t=this.viewportManager.getViewport(),s=t.x,i=t.y;return{version:this.version,models:n,viewport:{x:s,y:i,zoom:this.viewportManager.getZoom()}}}parseSceneData(n,t){if(n.version!==this.version){console.warn("json");return}this.box.removeAll();const s=[];n.models.forEach(i=>{const r=t.parseJson(i,s);s.push(r)}),this.box.addModels(s)}getShowRuler(){return this.grid.getShowRuler()}setShowRuler(n){this.grid.setShowRuler(n)}getShowGrid(){return this.grid.getShowGrid()}setShowGrid(n){this.grid.setShowGrid(n)}}var Xi;let Zt=(Xi=class extends ie{constructor(t){super();m(this,"statusChange",()=>{this.emit(O.change)});this.editor=t}isActive(){return!1}dispose(){this.clear()}},m(Xi,"name"),Xi);const Zs=class Zs extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.BOTTOM)}getName(){return Zs.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(Zs,"name","alignBottom");let Or=Zs;const Js=class Js extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.LEFT)}getName(){return Js.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(Js,"name","alignLeft");let Sr=Js;const Qs=class Qs extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.RIGHT)}getName(){return Qs.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(Qs,"name","alignRight");let Rr=Qs;const ti=class ti extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.TOP)}getName(){return ti.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(ti,"name","alignTop");let Lr=ti;const ei=class ei extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.HORIZONTAL_CENTER)}getName(){return ei.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(ei,"name","alignHorizontalCenter");let Ar=ei;const ni=class ni extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}isEnable(){return this.getTargetList().length>1}execute(){const n=this.getTargetList();this.editor.alignManager.align(n,ln.VERTICAL_CENTER)}getName(){return ni.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}getTargetList(){return this.editor.selectionManager.getSelectionList().filter(n=>!(n instanceof Pt))}};m(ni,"name","alignVerticalCenter");let Ir=ni;const si=class si extends Zt{constructor(n){super(n),n.actionManager.on(O.change,this.statusChange)}isEnable(){return this.editor.actionManager.undoable()}execute(){this.editor.actionManager.undo()}getName(){return si.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}};m(si,"name","undo");let $r=si;const ii=class ii extends Zt{constructor(n){super(n),n.actionManager.on(O.change,this.statusChange)}isEnable(){return this.editor.actionManager.redoable()}execute(){this.editor.actionManager.redo()}getName(){return ii.name}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}};m(ii,"name","redo");let kr=ii;const ri=class ri extends Zt{constructor(n){super(n),n.viewportManager.on(os.ZOOM_CHANGE,this.statusChange)}execute(){const n=this.editor.viewportManager.getViewRect(),t={x:n.x+n.width/2,y:n.y+n.height/2};this.editor.viewportManager.zoomIn(t)}isEnable(){return this.editor.viewportManager.getZoom()>as.MIN_ZOOM}dispose(){super.dispose(),this.editor.viewportManager.off(os.ZOOM_CHANGE,this.statusChange)}getLabel(){return""}getName(){return ri.name}};m(ri,"name","zoomIn");let Br=ri;const oi=class oi extends Zt{constructor(n){super(n),n.viewportManager.on(os.ZOOM_CHANGE,this.statusChange)}execute(){const n=this.editor.viewportManager.getViewRect(),t={x:n.x+n.width/2,y:n.y+n.height/2};this.editor.viewportManager.zoomOut(t)}isEnable(){return this.editor.viewportManager.getZoom()<as.MAX_ZOOM}dispose(){super.dispose(),this.editor.viewportManager.off(os.ZOOM_CHANGE,this.statusChange)}getLabel(){return""}getName(){return oi.name}};m(oi,"name","zoomOut");let Dr=oi;const ai=class ai extends Zt{constructor(n){super(n),n.selectionManager.on(O.change,this.statusChange)}execute(){this.editor.removeSelection()}isEnable(){return this.editor.selectionManager.getSelectionList().length>0}dispose(){super.dispose(),this.editor.selectionManager.off(O.change,this.statusChange)}getName(){return ai.name}getLabel(){return""}};m(ai,"name","delete");let Hr=ai;const li=class li extends Zt{constructor(n){super(n)}isEnable(){return!0}execute(){this.editor.setShowPerformance(!this.editor.getShowPerformance()),this.emit(O.change)}getName(){return li.name}isActive(){return this.editor.getShowPerformance()}dispose(){super.dispose(),this.editor.actionManager.off(O.change,this.statusChange)}getLabel(){return""}};m(li,"name","performance");let Fr=li;var wc=gt({name:"Editor",__name:"Editor",emits:["ready"],setup(e,{expose:n,emit:t}){const s=t,i=vt("container"),r=ct(),o=ct();return uo(()=>{o.value=Cn(new kd(r.value)),s("ready",o.value)}),n({getEditor:()=>o.value}),(l,c)=>(H(),G("div",{ref_key:"editorRef",ref:r,class:z([$(i).b()])},null,2))}});wc.__file="src/frameworks/vue/editor/Editor.vue";var bo={name:"AlignBottom"};const Bd={style:{transform:"rotateX(180deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Dd=V("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Hd=[Dd];function Fd(e,n,t,s,i,r){return H(),G("svg",Bd,[...Hd])}bo.render=Fd;bo.__file="src/frameworks/vue/icons/align-bottom.vue";var xo={name:"AlignHorizontalCenter"};const Vd={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5055","xmlns:xlink":"http://www.w3.org/1999/xlink"},zd=V("path",{d:"M112 319a8 8 0 0 1 8-8h784a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-64zM288 527a8 8 0 0 1 8-8h433a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H296a8 8 0 0 1-8-8v-64z",fill:"#707070","p-id":"5056"},null,-1),Nd=V("path",{d:"M480 120a8 8 0 0 1 8-8h48a8 8 0 0 1 8 8v784a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8V120z",fill:"currentColor","p-id":"5057"},null,-1),Wd=[zd,Nd];function Ud(e,n,t,s,i,r){return H(),G("svg",Vd,[...Wd])}xo.render=Ud;xo.__file="src/frameworks/vue/icons/align-horizontal-center.vue";var Co={name:"AlignLeft"};const jd={style:{transform:"rotate(-90deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Yd=V("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Gd=[Yd];function Xd(e,n,t,s,i,r){return H(),G("svg",jd,[...Gd])}Co.render=Xd;Co.__file="src/frameworks/vue/icons/align-left.vue";var To={name:"AlignRight"};const qd={style:{transform:"rotate(90deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},Kd=V("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),Zd=[Kd];function Jd(e,n,t,s,i,r){return H(),G("svg",qd,[...Zd])}To.render=Jd;To.__file="src/frameworks/vue/icons/align-right.vue";var Mo={name:"AlignTop"};const Qd={viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5119","xmlns:xlink":"http://www.w3.org/1999/xlink"},tp=V("path",{d:"M362.666667 362.666667h85.333333v426.666666h-85.333333zM213.333333 234.666667h597.333334v42.666666H213.333333zM576 362.666667h85.333333v256h-85.333333z",fill:"currentColor","p-id":"5120"},null,-1),ep=[tp];function np(e,n,t,s,i,r){return H(),G("svg",Qd,[...ep])}Mo.render=np;Mo.__file="src/frameworks/vue/icons/align-top.vue";var Eo={name:"AlignVerticalCenter"};const sp={style:{transform:"rotate(90deg)"},viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5055","xmlns:xlink":"http://www.w3.org/1999/xlink"},ip=V("path",{d:"M112 319a8 8 0 0 1 8-8h784a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H120a8 8 0 0 1-8-8v-64zM288 527a8 8 0 0 1 8-8h433a8 8 0 0 1 8 8v64a8 8 0 0 1-8 8H296a8 8 0 0 1-8-8v-64z",fill:"#707070","p-id":"5056"},null,-1),rp=V("path",{d:"M480 120a8 8 0 0 1 8-8h48a8 8 0 0 1 8 8v784a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8V120z",fill:"currentColor","p-id":"5057"},null,-1),op=[ip,rp];function ap(e,n,t,s,i,r){return H(),G("svg",sp,[...op])}Eo.render=ap;Eo.__file="src/frameworks/vue/icons/align-vertical-center.vue";var _o={name:"ArrowDown"};const lp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},cp=V("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),up=[cp];function hp(e,n,t,s,i,r){return H(),G("svg",lp,[...up])}_o.render=hp;_o.__file="src/frameworks/vue/icons/arrow-down.vue";var Po={name:"Delete"};const fp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"3095","xmlns:xlink":"http://www.w3.org/1999/xlink"},dp=V("path",{d:"M847.743 223.953H640.639c-3.132-68.921-60.177-124.029-129.858-124.029s-126.726 55.108-129.858 124.029H173.256c-17.673 0-32 14.327-32 32s14.327 32 32 32h674.487c17.673 0 32-14.327 32-32s-14.327-32-32-32z m-336.962-60.03c34.379 0 62.689 26.426 65.718 60.029H445.064c3.029-33.603 31.338-60.029 65.717-60.029zM767.743 351.79c-17.673 0-32 14.327-32 32v478.173H288.256V383.79c0-17.673-14.327-32-32-32s-32 14.327-32 32v510.173c0 17.673 14.327 32 32 32h511.487c17.673 0 32-14.327 32-32V383.79c0-17.673-14.327-32-32-32z","p-id":"3096"},null,-1),pp=V("path",{d:"M449.306 732.802V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999z m191.534 0V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999z","p-id":"3097"},null,-1),gp=[dp,pp];function mp(e,n,t,s,i,r){return H(),G("svg",fp,[...gp])}Po.render=mp;Po.__file="src/frameworks/vue/icons/delete.vue";var Oo={name:"Diamond"};const vp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"9700","xmlns:xlink":"http://www.w3.org/1999/xlink"},yp=V("path",{d:"M512 0l512 512-512 512-512-512 512-512z m0 80.497778L80.497778 512 512 943.502222 943.502222 512 512 80.497778z",fill:"currentColor"},null,-1),wp=[yp];function bp(e,n,t,s,i,r){return H(),G("svg",vp,[...wp])}Oo.render=bp;Oo.__file="src/frameworks/vue/icons/diamond.vue";var So={name:"Ellipse"};const xp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"6138","xmlns:xlink":"http://www.w3.org/1999/xlink"},Cp=V("path",{d:"M512 998.4C243.776 998.4 25.6 780.224 25.6 512S243.776 25.6 512 25.6s486.4 218.176 486.4 486.4-218.176 486.4-486.4 486.4zM512 76.8C272 76.8 76.8 272 76.8 512s195.2 435.2 435.2 435.2 435.2-195.2 435.2-435.2S752 76.8 512 76.8z","p-id":"6139",fill:"currentColor"},null,-1),Tp=[Cp];function Mp(e,n,t,s,i,r){return H(),G("svg",xp,[...Tp])}So.render=Mp;So.__file="src/frameworks/vue/icons/ellipse.vue";var Ro={name:"Github"};const Ep={t:"1721741479435",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7731","xmlns:xlink":"http://www.w3.org/1999/xlink"},_p=V("path",{d:"M64 512c0 195.2 124.8 361.6 300.8 422.4 22.4 6.4 19.2-9.6 19.2-22.4v-76.8c-134.4 16-140.8-73.6-150.4-89.6-19.2-32-60.8-38.4-48-54.4 32-16 64 3.2 99.2 57.6 25.6 38.4 76.8 32 105.6 25.6 6.4-22.4 19.2-44.8 35.2-60.8-144-22.4-201.6-108.8-201.6-211.2 0-48 16-96 48-131.2-22.4-60.8 0-115.2 3.2-121.6 57.6-6.4 118.4 41.6 124.8 44.8 32-9.6 70.4-12.8 112-12.8 41.6 0 80 6.4 112 12.8 12.8-9.6 67.2-48 121.6-44.8 3.2 6.4 25.6 57.6 6.4 118.4 32 38.4 48 83.2 48 131.2 0 102.4-57.6 188.8-201.6 214.4 22.4 22.4 38.4 54.4 38.4 92.8v112c0 9.6 0 19.2 16 19.2C832 876.8 960 710.4 960 512c0-246.4-201.6-448-448-448S64 265.6 64 512z",fill:"currentColor","p-id":"7732"},null,-1),Pp=[_p];function Op(e,n,t,s,i,r){return H(),G("svg",Ep,[...Pp])}Ro.render=Op;Ro.__file="src/frameworks/vue/icons/github.vue";var Lo={name:"Performance"};const Sp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"5163","xmlns:xlink":"http://www.w3.org/1999/xlink"},Rp=V("path",{d:"M461.223546 894.876154c-1.062192 0-2.099824-0.048095-3.162016-0.193405-11.732206-1.497097-20.736277-11.103896-21.532409-22.884197l-40.336684-605.249801L287.129486 630.065999c-3.186576 10.670014-14.097066 17.911952-24.260543 17.621333-11.128455-0.2415-20.711717-7.91732-23.390733-18.732643l-38.864146-155.385976-68.000743 68.000743c-4.634554 4.634554-10.911514 7.241938-17.477047 7.241938L65.698305 548.811394l0-49.437969 39.20286 0 91.634-91.634c6.300496-6.300496 15.425318-8.810666 24.067138-6.348592 8.593725 2.38942 15.231913 9.197476 17.380856 17.839297l27.6395 110.48637 122.460076-408.222425c3.451612-11.466146 14.677281-18.732643 26.456558-17.477047 11.876492 1.351787 21.097504 11.007705 21.894659 22.932292l41.061185 616.136755 108.555391-325.68971c3.186576-9.487072 11.732206-16.125259 21.725814-16.825201 10.041704-0.627287 19.408025 4.634554 23.850198 13.59053l76.763314 153.526629 27.326369-54.651714c4.200672-8.376785 12.745279-13.663184 22.1116-13.663184l197.750853 0 0 49.437969L773.08225 548.811394l-42.581818 85.212754c-8.400321 16.70445-35.82288 16.70445-44.223201 0l-72.176856-144.378272L484.638839 877.978299C481.259882 888.165312 471.724715 894.876154 461.223546 894.876154z",fill:"currentColor","p-id":"5164"},null,-1),Lp=[Rp];function Ap(e,n,t,s,i,r){return H(),G("svg",Sp,[...Lp])}Lo.render=Ap;Lo.__file="src/frameworks/vue/icons/performance.vue";var Ao={name:"Rect"};const Ip={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},$p=V("path",{d:"M898.8 199.6v624.8H125.2V199.6h773.6m59.5-59.5H65.7v743.8h892.5V140.1h0.1z","p-id":"905"},null,-1),kp=[$p];function Bp(e,n,t,s,i,r){return H(),G("svg",Ip,[...kp])}Ao.render=Bp;Ao.__file="src/frameworks/vue/icons/rect.vue";var Io={name:"Redo"};const Dp={style:{transform:"rotateY(180deg)"},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Hp=V("path",{d:"M596.16 284.064H258.56l101.376-101.44a31.968 31.968 0 1 0-45.248-45.216L178.56 273.504c-11.904 11.872-18.496 27.84-18.56 44.8a63.04 63.04 0 0 0 18.56 45.28l136.128 136.16a31.904 31.904 0 0 0 45.248 0 31.968 31.968 0 0 0 0-45.248l-106.752-106.496H596.16c114.88 0 208.32 93.312 208.32 208s-93.44 208-208.32 208h-223.36a32 32 0 0 0 0 64h223.36c150.144 0 272.32-122.016 272.32-272 0-149.984-122.176-272-272.32-272",fill:"currentColor","p-id":"1124"},null,-1),Fp=[Hp];function Vp(e,n,t,s,i,r){return H(),G("svg",Dp,[...Fp])}Io.render=Vp;Io.__file="src/frameworks/vue/icons/redo.vue";var $o={name:"Save"};const zp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"8002","xmlns:xlink":"http://www.w3.org/1999/xlink"},Np=V("path",{d:"M814.805 128a51.179 51.179 0 0 1 51.179 51.179V844.01a51.179 51.179 0 0 1-51.179 51.157H201.173a51.179 51.179 0 0 1-51.178-51.157V179.179A51.179 51.179 0 0 1 201.173 128h613.654zM329.024 434.837a51.093 51.093 0 0 1-51.179-51.093V179.157h-76.672v664.854h613.76V179.179H738.22v204.48a51.179 51.179 0 0 1-51.179 51.178H329.024z m0-51.093h357.995V179.157H329.024v204.587z m357.91 204.501a25.557 25.557 0 1 1 0.085 51.072H329.024a25.536 25.536 0 1 1 0-51.072h357.91z",fill:"currentColor","p-id":"8003"},null,-1),Wp=[Np];function Up(e,n,t,s,i,r){return H(),G("svg",zp,[...Wp])}$o.render=Up;$o.__file="src/frameworks/vue/icons/save.vue";var ko={name:"Terminator"};const jp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Yp=V("path",{d:"M717 256q52.5 0 99.5 20.5 46.5 20 81.5 55 34.5 34.5 55 81 20 46.5 20 99.5t-20 99.5q-20.5 46.5-55 81.5-35 34.5-81.5 55-47 20-99.5 20H307q-52.5 0-99-20-47-20.5-81.5-55-35-35-55-81.5-20.5-46.5-20.5-99.5t20.5-99.5q20-46.5 55-81 34.5-35 81.5-55 46.5-20.5 99-20.5m410 461q42 0 79.5-16 37-16.5 65-44 27.5-28 44-65 16-37.5 16-80t-16-79.5q-16.5-37.5-44-65-28-28-65-44-37.5-16.5-79.5-16.5H307q-42 0-79 16.5-37.5 16-65 44-28 27.5-44 65-16.5 37-16.5 79.5t16.5 80q16 37 44 65 27.5 27.5 65 44 37 16 79 16z",fill:"currentColor","p-id":"5170"},null,-1),Gp=V("path",{d:"M307 742.5q-47.5 0-89.5-18-42-18.5-73-49.5-31.5-31.5-49.5-73.5t-18-89.5q0-47.5 18-89.5t49.5-73q31-31.5 73-49.5 42-18.5 89.5-18.5h410q47.5 0 89.5 18.5 42 18 73.5 49.5 31 31 49 73t18 89.5q0 47.5-18 89.5t-49 73.5q-31.5 31-73.5 49.5-42 18-89.5 18z",fill:"#FAFAFA","p-id":"5171"},null,-1),Xp=V("path",{d:"M717 256q52.5 0 99.5 20.5 46.5 20 81.5 55 34.5 34.5 55 81 20 46.5 20 99.5t-20 99.5q-20.5 46.5-55 81.5-35 34.5-81.5 55-47 20-99.5 20H307q-52.5 0-99-20-47-20.5-81.5-55-35-35-55-81.5-20.5-46.5-20.5-99.5t20.5-99.5q20-46.5 55-81 34.5-35 81.5-55 46.5-20.5 99-20.5m410 461q42 0 79.5-16 37-16.5 65-44 27.5-28 44-65 16-37.5 16-80t-16-79.5q-16.5-37.5-44-65-28-28-65-44-37.5-16.5-79.5-16.5H307q-42 0-79 16.5-37.5 16-65 44-28 27.5-44 65-16.5 37-16.5 79.5t16.5 80q16 37 44 65 27.5 27.5 65 44 37 16 79 16z",fill:"currentColor","p-id":"5172"},null,-1),qp=[Yp,Gp,Xp];function Kp(e,n,t,s,i,r){return H(),G("svg",jp,[...qp])}ko.render=Kp;ko.__file="src/frameworks/vue/icons/terminator.vue";var Bo={name:"Undo"};const Zp={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":"1123","xmlns:xlink":"http://www.w3.org/1999/xlink"},Jp=V("path",{d:"M596.16 284.064H258.56l101.376-101.44a31.968 31.968 0 1 0-45.248-45.216L178.56 273.504c-11.904 11.872-18.496 27.84-18.56 44.8a63.04 63.04 0 0 0 18.56 45.28l136.128 136.16a31.904 31.904 0 0 0 45.248 0 31.968 31.968 0 0 0 0-45.248l-106.752-106.496H596.16c114.88 0 208.32 93.312 208.32 208s-93.44 208-208.32 208h-223.36a32 32 0 0 0 0 64h223.36c150.144 0 272.32-122.016 272.32-272 0-149.984-122.176-272-272.32-272",fill:"currentColor","p-id":"1124"},null,-1),Qp=[Jp];function tg(e,n,t,s,i,r){return H(),G("svg",Zp,[...Qp])}Bo.render=tg;Bo.__file="src/frameworks/vue/icons/undo.vue";var Do={name:"ZoomIn"};const eg={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ng=V("path",{d:"M598.646154 401.723077H279.630769c-15.753846 0-27.569231 11.815385-27.569231 31.507692 0 15.753846 11.815385 27.569231 31.507693 27.569231h319.015384c15.753846 0 27.569231-11.815385 27.569231-31.507692 0-15.753846-15.753846-27.569231-31.507692-27.569231z",fill:"currentColor","p-id":"967"},null,-1),sg=V("path",{d:"M921.6 850.707692l-204.8-196.923077c47.261538-59.076923 78.769231-137.846154 78.769231-220.553846 0-196.923077-157.538462-354.461538-354.461539-354.461538s-354.461538 157.538462-354.461538 354.461538 157.538462 354.461538 354.461538 354.461539c90.584615 0 173.292308-35.446154 236.307693-90.584616l204.8 196.923077c3.938462 3.938462 11.815385 7.876923 19.692307 7.876923s15.753846-3.938462 19.692308-7.876923c11.815385-15.753846 11.815385-35.446154 0-43.323077z m-484.430769-126.030769c-161.476923 0-295.384615-133.907692-295.384616-295.384615S275.692308 133.907692 437.169231 133.907692s295.384615 133.907692 295.384615 295.384616-129.969231 295.384615-295.384615 295.384615z",fill:"currentColor"},null,-1),ig=[ng,sg];function rg(e,n,t,s,i,r){return H(),G("svg",eg,[...ig])}Do.render=rg;Do.__file="src/frameworks/vue/icons/zoom-in.vue";var Ho={name:"ZoomOut"};const og={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ag=V("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z",fill:"currentColor","p-id":"1129"},null,-1),lg=V("path",{d:"M652.672 431.829333h-147.84V292.010667a35.968 35.968 0 1 0-71.978667 0v139.818666H292.010667a35.968 35.968 0 1 0 0 72.021334h140.8v140.8a35.968 35.968 0 1 0 72.021333 0v-140.8h147.84a35.968 35.968 0 1 0 0-72.021334z",fill:"currentColor"},null,-1),cg=[ag,lg];function ug(e,n,t,s,i,r){return H(),G("svg",og,[...cg])}Ho.render=ug;Ho.__file="src/frameworks/vue/icons/zoom-out.vue";var Fo=gt({name:"Icon",__name:"Icon",setup(e){const n=vt("icon");return(t,s)=>(H(),G("div",{class:z([$(n).b()])},[Te(t.$slots,"default")],2))}});Fo.__file="src/frameworks/vue/components/icon/Icon.vue";const hg=["title"];var bc=gt({__name:"ToolbarButton",props:{command:{type:Object,required:!0},getIcon:{type:Function}},setup(e){var f;const n=vt("toolbar"),t=e,s={undo:Bo,redo:Io,zoomOut:Ho,zoomIn:Do,delete:Po,performance:Lo,save:$o,alignTop:Mo,alignBottom:bo,alignLeft:Co,alignRight:To,alignHorizontalCenter:xo,alignVerticalCenter:Eo},i=((f=t.getIcon)==null?void 0:f.call(t,t.command.getName()))||s[t.command.getName()],r=ct(t.command.isEnable()),o=ct(t.command.isActive()),a=t.command.getLabel(),l=h=>{var d;((d=document.activeElement)==null?void 0:d.tagName.toLowerCase())==="canvas"&&h.preventDefault()},c=()=>{r.value&&t.command.execute()},u=()=>{r.value=t.command.isEnable(),o.value=t.command.isActive()};return t.command.on(O.change,u),An(()=>{t.command.off(O.change,u)}),(h,d)=>(H(),G("div",{onMousedown:l,title:$(a),class:z([$(n).e("button"),$(n).is("disabled",!r.value),$(n).is("active",o.value)]),onClick:c},[et(Fo,null,{default:ee(()=>[(H(),Lt(Bs($(i))))]),_:1})],42,hg))}});bc.__file="src/frameworks/vue/toolbar/ToolbarButton.vue";var xc=gt({name:"Toolbar",__name:"Toolbar",props:{commands:{type:Array,required:!0},getIcon:{type:Function}},setup(e){const n=vt("toolbar");return(t,s)=>(H(),G("div",{class:z([$(n).b()])},[(H(!0),G(bt,null,Tn(e.commands,i=>(H(),Lt(bc,{"get-icon":e.getIcon,command:i,key:i.getName()},null,8,["get-icon","command"]))),128))],2))}});xc.__file="src/frameworks/vue/toolbar/Toolbar.vue";function fg(e){return[new $r(e),new kr(e),new Dr(e),new Br(e),new Hr(e),new Fr(e),new Lr(e),new Or(e),new Sr(e),new Rr(e),new Ar(e),new Ir(e)]}var Cc=gt({__name:"LibraryCollapse",props:{title:{type:String,required:!0}},setup(e){const n=vt("library-collapse"),t={beforeEnter(r){r.style.maxHeight=0},enter(r){r.style.maxHeight=`${r.scrollHeight}px`},afterEnter(r){r.style.maxHeight=""},beforeLeave(r){r.style.maxHeight=`${r.scrollHeight}px`},leave(r){r.style.maxHeight=0},afterLeave(r){r.style.maxHeight=""}},s=ct(!1),i=()=>{s.value=!s.value};return(r,o)=>(H(),G("div",{class:z([$(n).b(),$(n).is("collapsed",s.value)])},[V("div",{onClick:i,class:z($(n).e("header"))},[V("div",{class:z($(n).e("arrow"))},null,2),V("div",{class:z($(n).e("title"))},bn(e.title),3)],2),et(wo,vo(bh(t),{persisted:""}),{default:ee(()=>[rh(V("div",{class:z($(n).e("content"))},[Te(r.$slots,"default")],2),[[_f,!s.value]])]),_:3},16)],2))}});Cc.__file="src/frameworks/vue/library/LibraryCollapse.vue";var dg=[];for(var Ui=0;Ui<256;++Ui)dg.push((Ui+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ls=e=>typeof e=="number"?e:(e=Number(e),isNaN(e)?0:e),pg=e=>Math.round(ls(e))|0,Ei=(e,n)=>{let t=!1,s=n.pageX,i=n.pageY;const r=a=>{var u,f;const l=a.pageX-s,c=a.pageY-i;t||(t=!0,(u=e.onDragStart)==null||u.call(e,a)),(f=e.onDragMove)==null||f.call(e,a,[l,c])},o=a=>{var l,c;(l=e.onUp)==null||l.call(e,a),t&&((c=e.onDragEnd)==null||c.call(e,a)),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o),window.removeEventListener("mouseleave",o)};window.addEventListener("mousemove",r),window.addEventListener("mouseup",o),window.addEventListener("mouseleave",o)};function Ka(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Za(e){return e!==null&&typeof e=="object"}function Tc(e,n,t=new WeakMap){if(!Za(e)||!Za(n))return e===n;if(e===n)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(n))return!1;if(t.has(e)||t.has(n))return!0;t.set(e,n);const s=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],i=[...Object.keys(n),...Object.getOwnPropertySymbols(n)];if(s.length!==i.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==i[r]||!Tc(e[s[r]],n[i[r]],t))return!1;return!0}function gg(e,n){return Tc(e,n)}const Mc=Symbol();function mg(){const e=[],n={editor:null,modelManager:new Ld},t={setEditor(s){n.editor=s,e.forEach(i=>{i(s)}),e.length=0},getEditor(){if(!n.editor)throw new Error("editor is not init");return n.editor},getModelManager(){return n.modelManager},register(s){s.forEach(i=>{i.models.forEach(r=>{n.modelManager.register(r)})})},ready(){return new Promise(s=>{n.editor?s(n.editor):e.push(s)})}};return yi(Mc,t),t}function Vo(){const e=en(Mc,void 0);if(!e)throw new Error("store is not init");return e}const vg=["onMousedown"],_s=20;var Ec=gt({name:"Library",__name:"Library",props:{groupList:{type:Array,required:!0}},setup(e){const n=Vo(),t=vt("library"),s={rect:Ao,terminator:ko,diamond:Oo,ellipse:So},i=a=>{if(a in s)return s[a]},r=hs({visible:!1,currentCategory:"",left:0,top:0}),o=async(a,l)=>{a.preventDefault(),r.visible=!0,r.currentCategory=l,r.left=a.pageX-_s,r.top=a.pageY-_s,Ei({onDragMove(c){r.left=c.pageX-_s,r.top=c.pageY-_s},onDragEnd(c){r.visible=!1;const u=n.getEditor(),{x:f,y:h,width:d,height:g}=u.container.getBoundingClientRect();if(c.pageX>=f&&c.pageY>=h&&c.pageX<=f+d&&c.pageY<=h+g){const y=n.getModelManager().getInstance(l),b=u.viewportManager.getScenePoint({x:c.pageX-f,y:c.pageY-h});y.setCenterPosition(b.x,b.y),u.addModel(y)}}},a)};return(a,l)=>(H(),G("div",{class:z([$(t).b()])},[(H(!0),G(bt,null,Tn(e.groupList,c=>(H(),Lt(Cc,{title:c.groupName},{default:ee(()=>[V("div",{class:z($(t).e("list"))},[(H(!0),G(bt,null,Tn(c.models,u=>(H(),G("div",{onMousedown:f=>o(f,u.CATEGORY),class:z([$(t).e("item")])},[(H(),Lt(Bs(i(u.CATEGORY))))],42,vg))),256))],2)]),_:2},1032,["title"]))),256)),(H(),Lt(ec,{to:"body"},[r.visible?(H(),G("div",{key:0,class:z([$(t).e("move")]),style:Nt({left:`${r.left}px`,top:`${r.top}px`})},[(H(),Lt(Bs(i(r.currentCategory))))],6)):$e("v-if",!0)]))],2))}});Ec.__file="src/frameworks/vue/library/Library.vue";const yg=()=>[{groupId:"base",groupName:"",models:[Cr,Mr,br,xr]}],_c=Symbol();function wg(){return en(_c)}const _i=[{component:"Position",getter(e){const n=e.getPosition();return[n.x,n.y]},setter(e,n){!Array.isArray||n.length!==2||e.setPosition(n[0],n[1])},watch:O.rectChange},{component:"Size",getter(e){const n=e.getSize();return[n.width,n.height]},setter(e,n){!Array.isArray||n.length!==2||e.setSize(n[0],n[1])},watch:O.rectChange},{label:"",component:"IntInput",key:"rotateDeg",keyType:"base",watch:O.rectChange,componentAttrs:{append:""}}],Pi=[{label:"",component:"IntInput",key:"border.width",keyType:"attr"},{label:"",component:"Select",key:"border.style",keyType:"attr",componentAttrs:{options:[{label:"",value:"solid"},{label:"",value:"dashed"}]}},{label:"",component:"ColorPicker",key:"border.color",keyType:"attr"}],Oi=[{label:"",component:"ColorPicker",key:"content.style.color",keyType:"attr"},{label:"",component:"IntInput",key:"content.style.fontSize",keyType:"attr"}],bg={name:"",propertyGroups:[{name:"",properties:_i},{name:"",properties:[{label:"",component:"ColorPicker",key:"fillColor",keyType:"attr"}]},{name:"",properties:[{label:"",component:"IntInput",key:"roundGap",keyType:"attr"},...Pi]},{name:"",properties:Oi}]},xg={name:"/",propertyGroups:[{name:"",properties:_i},{name:"",properties:[{label:"",component:"ColorPicker",key:"fillColor",keyType:"attr"}]},{name:"",properties:[...Pi]},{name:"",properties:Oi}]},Cg={name:"",propertyGroups:[{name:"",properties:_i},{name:"",properties:[{label:"",component:"ColorPicker",key:"fillColor",keyType:"attr"}]},{name:"",properties:[...Pi]},{name:"",properties:Oi}]},Tg={name:"",propertyGroups:[{name:"",properties:_i},{name:"",properties:[{label:"",component:"ColorPicker",key:"fillColor",keyType:"attr"}]},{name:"",properties:[...Pi]},{name:"",properties:Oi}]},Mg={name:"",propertyGroups:[{name:"",properties:[{label:"",component:"ColorPicker",key:"lineColor",keyType:"attr"},{label:"",component:"IntInput",key:"lineWidth",keyType:"attr"},{label:"",component:"Select",key:"lineStyle",keyType:"attr",componentAttrs:{options:[{label:"",value:"solid"},{label:"",value:"dashed"}]}},{label:"",component:"Switch",key:"animationState",keyType:"base"}]}]},Eg={name:"",propertyGroups:[{name:"",properties:[{label:"",component:"Switch",key:"showRuler",keyType:"base"},{label:"",component:"Switch",key:"showGrid",keyType:"base"}]}]},Ja={rect:bg,terminator:xg,ellipse:Cg,diamond:Tg,link:Mg,scene:Eg},_g=["readonly","value"];var Fe=gt({name:"Input",__name:"Input",props:{modelValue:{type:[String,Number],default:""},prepend:{type:String,default:""},append:{type:String,default:""},formatter:{type:Function,required:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","blur","focus"],setup(e,{emit:n}){const t=vt("input"),s=e,i=n,r=ct("");Wt(()=>s.modelValue,()=>{r.value=String(s.modelValue??"")},{immediate:!0});const o=Ch(),a=At(()=>!!(o.append||s.append)),l=At(()=>!!(o.prepend||s.prepend)),c=d=>{let{value:g}=d.target;s.formatter&&(g=s.formatter(g)),r.value=g,i("update:modelValue",g)},u=ct(!1),f=d=>{u.value=!0,i("focus",d)},h=d=>{u.value=!1,i("blur",d)};return(d,g)=>(H(),G("div",{class:z([$(t).b(),$(t).has("prepend",l.value),$(t).has("append",a.value),$(t).is("focus",u.value),$(t).is("readonly",e.readonly)])},[l.value?(H(),G("span",{key:0,class:z($(t).e("prepend"))},[Te(d.$slots,"prepend",{},()=>[V("span",null,bn(e.prepend),1)])],2)):$e("v-if",!0),V("div",{class:z($(t).e("wrapper"))},[V("input",{readonly:e.readonly,value:r.value,onFocus:f,type:"text",class:z($(t).e("inner")),onInput:c,onBlur:h},null,42,_g),$(o).suffix?(H(),G("span",{key:0,class:z($(t).e("suffix"))},[Te(d.$slots,"suffix")],2)):$e("v-if",!0)],2),a.value?(H(),G("span",{key:1,class:z($(t).e("append"))},[Te(d.$slots,"append",{},()=>[V("span",null,bn(e.append),1)])],2)):$e("v-if",!0)],2))}});Fe.__file="src/frameworks/vue/components/input/Input.vue";var Vr=gt({name:"Position",__name:"Position",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const t=vt("position"),s=e,i=n,r=ct(s.modelValue[0]),o=ct(s.modelValue[1]);Wt(()=>s.modelValue,()=>{r.value=s.modelValue[0],o.value=s.modelValue[1]},{deep:!0});const a=async()=>{r.value=ls(r.value),o.value=ls(o.value),i("update:modelValue",[r.value,o.value])};return(l,c)=>(H(),G("div",{class:z([$(t).b()])},[et(Fe,{modelValue:e.modelValue[0],"onUpdate:modelValue":c[0]||(c[0]=u=>e.modelValue[0]=u),onBlur:a,prepend:"X",append:"px"},null,8,["modelValue"]),et(Fe,{modelValue:e.modelValue[1],"onUpdate:modelValue":c[1]||(c[1]=u=>e.modelValue[1]=u),onBlur:a,prepend:"Y",append:"px"},null,8,["modelValue"])],2))}});Vr.__file="src/frameworks/vue/components/position/Position.vue";var zr=gt({name:"Size",__name:"Size",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const t=vt("size"),s=e,i=n,r=ct(s.modelValue[0]),o=ct(s.modelValue[1]);Wt(()=>s.modelValue,()=>{r.value=s.modelValue[0],o.value=s.modelValue[1]},{deep:!0});const a=async()=>{r.value=Math.max(20,ls(r.value)),o.value=Math.max(20,ls(o.value)),i("update:modelValue",[r.value,o.value])};return(l,c)=>(H(),G("div",{class:z([$(t).b()])},[et(Fe,{modelValue:e.modelValue[0],"onUpdate:modelValue":c[0]||(c[0]=u=>e.modelValue[0]=u),onBlur:a,prepend:"W",append:"px"},null,8,["modelValue"]),et(Fe,{modelValue:e.modelValue[1],"onUpdate:modelValue":c[1]||(c[1]=u=>e.modelValue[1]=u),onBlur:a,prepend:"H",append:"px"},null,8,["modelValue"])],2))}});zr.__file="src/frameworks/vue/components/size/Size.vue";let Xe,qe;function Pg(e){(!Xe||!qe)&&(Xe=document.createElement("canvas"),Xe.width=1,Xe.height=1,Xe.style.width="1px",Xe.style.height="1px",qe=Xe.getContext("2d",{willReadFrequently:!0})),qe.clearRect(0,0,1,1),qe.beginPath(),qe.fillStyle=e,qe.fillRect(0,0,1,1);const n=qe.getImageData(0,0,1,1).data;let t=n[3]/255;return t=parseFloat(t.toFixed(2)),{r:n[0],g:n[1],b:n[2],a:t}}function Og(e,n,t){const s=Math.max(e,n,t),i=Math.min(e,n,t);let r=0,o=0,a=0;const l=s-i;return s===i?r=0:e===s?n>=t?r=60*(n-t)/l:r=60*(n-t)/l+360:n===s?r=60*(t-e)/l+120:r=60*(e-n)/l+240,r>360?r-=360:r<0&&(r+=360),o=l/s,a=s/255,r/=360,o=isNaN(o)?0:o,{h:r,s:o,v:a}}function Nr(e,n,t){e*=360;let s=0,i=0,r=0;const o=Math.floor(e/60),a=e/60-o,l=t*(1-n),c=t*(1-a*n),u=t*(1-(1-a)*n);return s=t,i=u,r=l,o===0&&(s=t,i=u,r=l),o===1&&(s=c,i=t,r=l),o===2&&(s=l,i=t,r=u),o===3&&(s=l,i=c,r=t),o===4&&(s=u,i=l,r=t),o===5&&(s=t,i=l,r=c),s=Math.round(s*255),i=Math.round(i*255),r=Math.round(r*255),{r:s,g:i,b:r}}function ji(e,n,t){return e=e.toString(16),e.length==1&&(e="0"+e),n=n.toString(16),n.length==1&&(n="0"+n),t=t.toString(16),t.length==1&&(t="0"+t),"#"+(e+n+t).toUpperCase()}function Sg(e){const n=hs({state:{currentValue:"",hex:"",rgba:{r:0,g:0,b:0,a:1},hsv:{h:0,s:0,v:0},panelWidth:280,panelHeight:180,cursorSize:6,thumbSize:4,svPos:{x:0,y:0},alphaPos:{x:0},huePos:{y:0}},actions:{updateHuePosition(){const t=n.state.panelHeight,s=n.state.thumbSize;n.state.huePos.y=n.state.hsv.h*t-s/2},setHue(t){t=parseFloat(t.toFixed(2)),n.state.hsv.h=t;const s=Nr(n.state.hsv.h,n.state.hsv.s,n.state.hsv.v);n.state.rgba.r=s.r,n.state.rgba.g=s.g,n.state.rgba.b=s.b;const i=ji(n.state.rgba.r,n.state.rgba.g,n.state.rgba.b);n.state.hex=i},updateAlphaPosition(){const t=n.state.panelWidth,s=n.state.thumbSize;n.state.alphaPos.x=n.state.rgba.a*t-s/2},setAlpha(t){t=parseFloat(t.toFixed(2)),n.state.rgba.a=t},updateSVPosition(){const{s:t,v:s}=n.state.hsv,i=t*n.state.panelWidth,r=(1-s)*n.state.panelHeight;n.state.svPos={x:i,y:r}},setSV(t,s){t=parseFloat(t.toFixed(2)),s=parseFloat(s.toFixed(2)),n.state.hsv={h:n.state.hsv.h,s:t,v:s};const i=Nr(n.state.hsv.h,n.state.hsv.s,n.state.hsv.v);n.state.rgba.r=i.r,n.state.rgba.g=i.g,n.state.rgba.b=i.b;const r=ji(n.state.rgba.r,n.state.rgba.g,n.state.rgba.b);n.state.hex=r},setValue(t){if(t===n.state.currentValue)return;let s=0,i=0,r=0,o=1,a=0,l=0,c=0,u="";t&&({r:s,g:i,b:r,a:o}=Pg(t),{h:a,s:l,v:c}=Og(s,i,r),u=ji(s,i,r)),n.state.hex=u,n.state.rgba={r:s,g:i,b:r,a:o},n.state.hsv={h:a,s:l,v:c},n.state.currentValue=t,n.actions.updateHuePosition(),n.actions.updateAlphaPosition(),n.actions.updateSVPosition()},refreshValue(){if(n.state.rgba.a===1)n.state.currentValue=n.state.hex;else{const{r:t,g:s,b:i,a:r}=n.state.rgba;n.state.currentValue=`rgba(${t}, ${s}, ${i}, ${r})`}}}});return n.actions.setValue(e),ro(n)}const Pc=Symbol(),ds=()=>en(Pc);var Oc=gt({__name:"ColorPickerTrigger",emits:["focus","blur"],setup(e,{emit:n}){const t=vt("color-trigger"),s=n,i=l=>{s("focus",l)},r=l=>{s("blur",l)},o=ds(),a=At(()=>{const{r:l,g:c,b:u,a:f}=o.state.rgba;return`rgba(${l},${c},${u},${f})`});return(l,c)=>(H(),G("div",{style:Nt({backgroundColor:a.value}),onFocus:i,onBlur:r,role:"button",class:z($(t).b()),tabindex:"0"},null,38))}});Oc.__file="src/frameworks/vue/components/color-picker/ColorPickerTrigger.vue";var Sc=gt({__name:"SvPanel",setup(e){const n=vt("color-svpanel"),t=ds(),s=At(()=>{const{r:l,g:c,b:u}=Nr(t.state.hsv.h,1,1);return{width:`${t.state.panelWidth}px`,height:`${t.state.panelHeight}px`,background:`rgb(${l}, ${c}, ${u})`}}),i=At(()=>({width:t.state.cursorSize+"px",height:t.state.cursorSize+"px",left:t.state.svPos.x+"px",top:t.state.svPos.y+"px"})),r=fs(),o=l=>{const c=r.vnode.el;if(!c)return;const u=c.getBoundingClientRect(),{clientY:f,clientX:h}=l;let d=h-u.left,g=f-u.top;d=Math.max(0,d),d=Math.min(d,u.width),g=Math.max(0,g),g=Math.min(g,u.height);const y=d/u.width,b=1-g/u.height;t.actions.setSV(y,b),t.actions.updateSVPosition(),t.actions.refreshValue()},a=l=>{l.preventDefault(),Ei({onDragMove(c){o(c)},onUp(c){o(c)}},l)};return(l,c)=>(H(),G("div",{class:z($(n).b()),style:Nt(s.value),onMousedown:a},[V("div",{class:z($(n).e("white"))},null,2),V("div",{class:z($(n).e("black"))},null,2),V("div",{class:z($(n).e("cursor")),style:Nt(i.value)},null,6)],38))}});Sc.__file="src/frameworks/vue/components/color-picker/SvPanel.vue";var Rc=gt({__name:"HueSlider",setup(e){const n=vt("color-hue-slider"),t=ds(),s=At(()=>({height:`${t.state.panelHeight}px`})),i=At(()=>({height:`${t.state.thumbSize}px`,top:`${t.state.huePos.y}px`})),r=fs(),o=l=>{const c=r.vnode.el;if(!c)return;const u=c.getBoundingClientRect(),{clientY:f}=l,h=t.state.thumbSize;let d=f-u.top;d=Math.min(d,u.height-h/2),d=Math.max(h/2,d);const g=(d-h/2)/(u.height-h);t.actions.setHue(g),t.actions.updateHuePosition(),t.actions.refreshValue()},a=l=>{l.preventDefault(),Ei({onDragMove(c){o(c)},onUp(c){o(c)}},l)};return(l,c)=>(H(),G("div",{class:z($(n).b()),onMousedown:a,style:Nt(s.value)},[V("div",{class:z($(n).e("bar"))},null,2),V("div",{class:z($(n).e("thumb")),style:Nt(i.value)},null,6)],38))}});Rc.__file="src/frameworks/vue/components/color-picker/HueSlider.vue";var Lc=gt({__name:"AlphaSlider",setup(e){const n=vt("color-alpha-slider"),t=ds(),s=At(()=>({width:`${t.state.panelWidth}px`})),i=At(()=>({background:`linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(${t.state.rgba.r},${t.state.rgba.g},${t.state.rgba.b}) 100%)`})),r=At(()=>({width:`${t.state.thumbSize}px`,left:`${t.state.alphaPos.x}px`})),o=fs(),a=c=>{const u=o.vnode.el;if(!u)return;const f=u.getBoundingClientRect(),{clientX:h}=c,d=t.state.thumbSize;let g=h-f.left;g=Math.min(g,f.width-d/2),g=Math.max(d/2,g);const y=(g-d/2)/(f.width-d);t.actions.setAlpha(y),t.actions.updateAlphaPosition(),t.actions.refreshValue()},l=c=>{c.preventDefault(),Ei({onDragMove(u){a(u)},onUp(u){a(u)}},c)};return(c,u)=>(H(),G("div",{onMousedown:l,class:z($(n).b()),style:Nt(s.value)},[V("div",{class:z($(n).e("bar")),style:Nt(i.value)},null,6),V("div",{class:z($(n).e("thumb")),style:Nt(r.value)},null,6)],38))}});Lc.__file="src/frameworks/vue/components/color-picker/AlphaSlider.vue";var Ac=gt({__name:"Button",props:{disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const t=vt("button"),s=e,i=n,r=o=>{s.disabled||i("click",o)};return(o,a)=>(H(),G("button",{onClick:r,class:z([$(t).b()])},[Te(o.$slots,"default")],2))}});Ac.__file="src/frameworks/vue/components/button/Button.vue";var Ic=gt({__name:"ColorPickerPanel",props:{enableAlpha:{type:Boolean,default:!0}},emits:["ok"],setup(e,{expose:n,emit:t}){const s=vt("color-panel"),i=e,r=t,o=ds(),a=ct(),l=ct("");Wt([()=>o.state.rgba,()=>o.state.hsv],()=>{if(i.enableAlpha){const{r:h,g:d,b:g,a:y}=o.state.rgba;l.value=`rgba(${h}, ${d}, ${g}, ${y})`}else l.value=o.state.hex},{immediate:!0,deep:!0});const c=h=>{o.actions.setValue(l.value)},u=()=>{r("ok",l.value)};return n({getPanelDom:()=>a.value}),(h,d)=>(H(),G("div",{ref_key:"panelRef",ref:a,class:z($(s).b())},[V("div",{class:z($(s).e("main"))},[et(Sc),et(Rc)],2),et(Lc),V("div",{class:z($(s).e("btns"))},[et(Fe,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=g=>l.value=g),onBlur:c},null,8,["modelValue"]),et(Ac,{onClick:u},{default:ee(()=>[go("")]),_:1})],2)],2))}});Ic.__file="src/frameworks/vue/components/color-picker/ColorPickerPanel.vue";var kt="top",qt="bottom",Kt="right",Bt="left",zo="auto",ps=[kt,qt,Kt,Bt],En="start",cs="end",Rg="clippingParents",$c="viewport",Vn="popper",Lg="reference",Qa=ps.reduce(function(e,n){return e.concat([n+"-"+En,n+"-"+cs])},[]),kc=[].concat(ps,[zo]).reduce(function(e,n){return e.concat([n,n+"-"+En,n+"-"+cs])},[]),Ag="beforeRead",Ig="read",$g="afterRead",kg="beforeMain",Bg="main",Dg="afterMain",Hg="beforeWrite",Fg="write",Vg="afterWrite",zg=[Ag,Ig,$g,kg,Bg,Dg,Hg,Fg,Vg];function ye(e){return e?(e.nodeName||"").toLowerCase():null}function Ut(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function on(e){var n=Ut(e).Element;return e instanceof n||e instanceof Element}function Xt(e){var n=Ut(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function No(e){if(typeof ShadowRoot>"u")return!1;var n=Ut(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function Ng(e){var n=e.state;Object.keys(n.elements).forEach(function(t){var s=n.styles[t]||{},i=n.attributes[t]||{},r=n.elements[t];!Xt(r)||!ye(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Wg(e){var n=e.state,t={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,t.popper),n.styles=t,n.elements.arrow&&Object.assign(n.elements.arrow.style,t.arrow),function(){Object.keys(n.elements).forEach(function(s){var i=n.elements[s],r=n.attributes[s]||{},o=Object.keys(n.styles.hasOwnProperty(s)?n.styles[s]:t[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!Xt(i)||!ye(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}var Ug={name:"applyStyles",enabled:!0,phase:"write",fn:Ng,effect:Wg,requires:["computeStyles"]};function me(e){return e.split("-")[0]}var sn=Math.max,Us=Math.min,_n=Math.round;function Wr(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function Bc(){return!/^((?!chrome|android).)*safari/i.test(Wr())}function Pn(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!1);var s=e.getBoundingClientRect(),i=1,r=1;n&&Xt(e)&&(i=e.offsetWidth>0&&_n(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&_n(s.height)/e.offsetHeight||1);var o=on(e)?Ut(e):window,a=o.visualViewport,l=!Bc()&&t,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,f=s.width/i,h=s.height/r;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function Wo(e){var n=Pn(e),t=e.offsetWidth,s=e.offsetHeight;return Math.abs(n.width-t)<=1&&(t=n.width),Math.abs(n.height-s)<=1&&(s=n.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:s}}function Dc(e,n){var t=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(t&&No(t)){var s=n;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ee(e){return Ut(e).getComputedStyle(e)}function jg(e){return["table","td","th"].indexOf(ye(e))>=0}function Ve(e){return((on(e)?e.ownerDocument:e.document)||window.document).documentElement}function Si(e){return ye(e)==="html"?e:e.assignedSlot||e.parentNode||(No(e)?e.host:null)||Ve(e)}function tl(e){return!Xt(e)||Ee(e).position==="fixed"?null:e.offsetParent}function Yg(e){var n=/firefox/i.test(Wr()),t=/Trident/i.test(Wr());if(t&&Xt(e)){var s=Ee(e);if(s.position==="fixed")return null}var i=Si(e);for(No(i)&&(i=i.host);Xt(i)&&["html","body"].indexOf(ye(i))<0;){var r=Ee(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||n&&r.willChange==="filter"||n&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function gs(e){for(var n=Ut(e),t=tl(e);t&&jg(t)&&Ee(t).position==="static";)t=tl(t);return t&&(ye(t)==="html"||ye(t)==="body"&&Ee(t).position==="static")?n:t||Yg(e)||n}function Uo(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xn(e,n,t){return sn(e,Us(n,t))}function Gg(e,n,t){var s=Xn(e,n,t);return s>t?t:s}function Hc(){return{top:0,right:0,bottom:0,left:0}}function Fc(e){return Object.assign({},Hc(),e)}function Vc(e,n){return n.reduce(function(t,s){return t[s]=e,t},{})}var Xg=function(n,t){return n=typeof n=="function"?n(Object.assign({},t.rects,{placement:t.placement})):n,Fc(typeof n!="number"?n:Vc(n,ps))};function qg(e){var n,t=e.state,s=e.name,i=e.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=me(t.placement),l=Uo(a),c=[Bt,Kt].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var f=Xg(i.padding,t),h=Wo(r),d=l==="y"?kt:Bt,g=l==="y"?qt:Kt,y=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],b=o[l]-t.rects.reference[l],x=gs(r),T=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,S=y/2-b/2,w=f[d],_=T-h[u]-f[g],W=T/2-h[u]/2+S,X=Xn(w,W,_),k=l;t.modifiersData[s]=(n={},n[k]=X,n.centerOffset=X-W,n)}}function Kg(e){var n=e.state,t=e.options,s=t.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=n.elements.popper.querySelector(i),!i)||Dc(n.elements.popper,i)&&(n.elements.arrow=i))}var Zg={name:"arrow",enabled:!0,phase:"main",fn:qg,effect:Kg,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function On(e){return e.split("-")[1]}var Jg={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qg(e,n){var t=e.x,s=e.y,i=n.devicePixelRatio||1;return{x:_n(t*i)/i||0,y:_n(s*i)/i||0}}function el(e){var n,t=e.popper,s=e.popperRect,i=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,h=o.x,d=h===void 0?0:h,g=o.y,y=g===void 0?0:g,b=typeof u=="function"?u({x:d,y}):{x:d,y};d=b.x,y=b.y;var x=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),S=Bt,w=kt,_=window;if(c){var W=gs(t),X="clientHeight",k="clientWidth";if(W===Ut(t)&&(W=Ve(t),Ee(W).position!=="static"&&a==="absolute"&&(X="scrollHeight",k="scrollWidth")),W=W,i===kt||(i===Bt||i===Kt)&&r===cs){w=qt;var Y=f&&W===_&&_.visualViewport?_.visualViewport.height:W[X];y-=Y-s.height,y*=l?1:-1}if(i===Bt||(i===kt||i===qt)&&r===cs){S=Kt;var N=f&&W===_&&_.visualViewport?_.visualViewport.width:W[k];d-=N-s.width,d*=l?1:-1}}var Z=Object.assign({position:a},c&&Jg),D=u===!0?Qg({x:d,y},Ut(t)):{x:d,y};if(d=D.x,y=D.y,l){var J;return Object.assign({},Z,(J={},J[w]=T?"0":"",J[S]=x?"0":"",J.transform=(_.devicePixelRatio||1)<=1?"translate("+d+"px, "+y+"px)":"translate3d("+d+"px, "+y+"px, 0)",J))}return Object.assign({},Z,(n={},n[w]=T?y+"px":"",n[S]=x?d+"px":"",n.transform="",n))}function t0(e){var n=e.state,t=e.options,s=t.gpuAcceleration,i=s===void 0?!0:s,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:me(n.placement),variation:On(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:i,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,el(Object.assign({},c,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:o,roundOffsets:l})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,el(Object.assign({},c,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var e0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:t0,data:{}},Ps={passive:!0};function n0(e){var n=e.state,t=e.instance,s=e.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=Ut(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",t.update,Ps)}),a&&l.addEventListener("resize",t.update,Ps),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Ps)}),a&&l.removeEventListener("resize",t.update,Ps)}}var s0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:n0,data:{}},i0={left:"right",right:"left",bottom:"top",top:"bottom"};function Ls(e){return e.replace(/left|right|bottom|top/g,function(n){return i0[n]})}var r0={start:"end",end:"start"};function nl(e){return e.replace(/start|end/g,function(n){return r0[n]})}function jo(e){var n=Ut(e),t=n.pageXOffset,s=n.pageYOffset;return{scrollLeft:t,scrollTop:s}}function Yo(e){return Pn(Ve(e)).left+jo(e).scrollLeft}function o0(e,n){var t=Ut(e),s=Ve(e),i=t.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=Bc();(c||!c&&n==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+Yo(e),y:l}}function a0(e){var n,t=Ve(e),s=jo(e),i=(n=e.ownerDocument)==null?void 0:n.body,r=sn(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=sn(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+Yo(e),l=-s.scrollTop;return Ee(i||t).direction==="rtl"&&(a+=sn(t.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Go(e){var n=Ee(e),t=n.overflow,s=n.overflowX,i=n.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+s)}function zc(e){return["html","body","#document"].indexOf(ye(e))>=0?e.ownerDocument.body:Xt(e)&&Go(e)?e:zc(Si(e))}function qn(e,n){var t;n===void 0&&(n=[]);var s=zc(e),i=s===((t=e.ownerDocument)==null?void 0:t.body),r=Ut(s),o=i?[r].concat(r.visualViewport||[],Go(s)?s:[]):s,a=n.concat(o);return i?a:a.concat(qn(Si(o)))}function Ur(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function l0(e,n){var t=Pn(e,!1,n==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function sl(e,n,t){return n===$c?Ur(o0(e,t)):on(n)?l0(n,t):Ur(a0(Ve(e)))}function c0(e){var n=qn(Si(e)),t=["absolute","fixed"].indexOf(Ee(e).position)>=0,s=t&&Xt(e)?gs(e):e;return on(s)?n.filter(function(i){return on(i)&&Dc(i,s)&&ye(i)!=="body"}):[]}function u0(e,n,t,s){var i=n==="clippingParents"?c0(e):[].concat(n),r=[].concat(i,[t]),o=r[0],a=r.reduce(function(l,c){var u=sl(e,c,s);return l.top=sn(u.top,l.top),l.right=Us(u.right,l.right),l.bottom=Us(u.bottom,l.bottom),l.left=sn(u.left,l.left),l},sl(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Nc(e){var n=e.reference,t=e.element,s=e.placement,i=s?me(s):null,r=s?On(s):null,o=n.x+n.width/2-t.width/2,a=n.y+n.height/2-t.height/2,l;switch(i){case kt:l={x:o,y:n.y-t.height};break;case qt:l={x:o,y:n.y+n.height};break;case Kt:l={x:n.x+n.width,y:a};break;case Bt:l={x:n.x-t.width,y:a};break;default:l={x:n.x,y:n.y}}var c=i?Uo(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case En:l[c]=l[c]-(n[u]/2-t[u]/2);break;case cs:l[c]=l[c]+(n[u]/2-t[u]/2);break}}return l}function us(e,n){n===void 0&&(n={});var t=n,s=t.placement,i=s===void 0?e.placement:s,r=t.strategy,o=r===void 0?e.strategy:r,a=t.boundary,l=a===void 0?Rg:a,c=t.rootBoundary,u=c===void 0?$c:c,f=t.elementContext,h=f===void 0?Vn:f,d=t.altBoundary,g=d===void 0?!1:d,y=t.padding,b=y===void 0?0:y,x=Fc(typeof b!="number"?b:Vc(b,ps)),T=h===Vn?Lg:Vn,S=e.rects.popper,w=e.elements[g?T:h],_=u0(on(w)?w:w.contextElement||Ve(e.elements.popper),l,u,o),W=Pn(e.elements.reference),X=Nc({reference:W,element:S,strategy:"absolute",placement:i}),k=Ur(Object.assign({},S,X)),Y=h===Vn?k:W,N={top:_.top-Y.top+x.top,bottom:Y.bottom-_.bottom+x.bottom,left:_.left-Y.left+x.left,right:Y.right-_.right+x.right},Z=e.modifiersData.offset;if(h===Vn&&Z){var D=Z[i];Object.keys(N).forEach(function(J){var ft=[Kt,qt].indexOf(J)>=0?1:-1,Ht=[kt,qt].indexOf(J)>=0?"y":"x";N[J]+=D[Ht]*ft})}return N}function h0(e,n){n===void 0&&(n={});var t=n,s=t.placement,i=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?kc:l,u=On(s),f=u?a?Qa:Qa.filter(function(g){return On(g)===u}):ps,h=f.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=f);var d=h.reduce(function(g,y){return g[y]=us(e,{placement:y,boundary:i,rootBoundary:r,padding:o})[me(y)],g},{});return Object.keys(d).sort(function(g,y){return d[g]-d[y]})}function f0(e){if(me(e)===zo)return[];var n=Ls(e);return[nl(e),n,nl(n)]}function d0(e){var n=e.state,t=e.options,s=e.name;if(!n.modifiersData[s]._skip){for(var i=t.mainAxis,r=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,h=t.altBoundary,d=t.flipVariations,g=d===void 0?!0:d,y=t.allowedAutoPlacements,b=n.options.placement,x=me(b),T=x===b,S=l||(T||!g?[Ls(b)]:f0(b)),w=[b].concat(S).reduce(function(Pe,re){return Pe.concat(me(re)===zo?h0(n,{placement:re,boundary:u,rootBoundary:f,padding:c,flipVariations:g,allowedAutoPlacements:y}):re)},[]),_=n.rects.reference,W=n.rects.popper,X=new Map,k=!0,Y=w[0],N=0;N<w.length;N++){var Z=w[N],D=me(Z),J=On(Z)===En,ft=[kt,qt].indexOf(D)>=0,Ht=ft?"width":"height",it=us(n,{placement:Z,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),nt=ft?J?Kt:Bt:J?qt:kt;_[Ht]>W[Ht]&&(nt=Ls(nt));var ot=Ls(nt),Ot=[];if(r&&Ot.push(it[D]<=0),a&&Ot.push(it[nt]<=0,it[ot]<=0),Ot.every(function(Pe){return Pe})){Y=Z,k=!1;break}X.set(Z,Ot)}if(k)for(var we=g?3:1,Jt=function(re){var St=w.find(function(be){var oe=X.get(be);if(oe)return oe.slice(0,re).every(function(ae){return ae})});if(St)return Y=St,"break"},Mt=we;Mt>0;Mt--){var ze=Jt(Mt);if(ze==="break")break}n.placement!==Y&&(n.modifiersData[s]._skip=!0,n.placement=Y,n.reset=!0)}}var p0={name:"flip",enabled:!0,phase:"main",fn:d0,requiresIfExists:["offset"],data:{_skip:!1}};function il(e,n,t){return t===void 0&&(t={x:0,y:0}),{top:e.top-n.height-t.y,right:e.right-n.width+t.x,bottom:e.bottom-n.height+t.y,left:e.left-n.width-t.x}}function rl(e){return[kt,Kt,qt,Bt].some(function(n){return e[n]>=0})}function g0(e){var n=e.state,t=e.name,s=n.rects.reference,i=n.rects.popper,r=n.modifiersData.preventOverflow,o=us(n,{elementContext:"reference"}),a=us(n,{altBoundary:!0}),l=il(o,s),c=il(a,i,r),u=rl(l),f=rl(c);n.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var m0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:g0};function v0(e,n,t){var s=me(e),i=[Bt,kt].indexOf(s)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},n,{placement:e})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Bt,Kt].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function y0(e){var n=e.state,t=e.options,s=e.name,i=t.offset,r=i===void 0?[0,0]:i,o=kc.reduce(function(u,f){return u[f]=v0(f,n.rects,r),u},{}),a=o[n.placement],l=a.x,c=a.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=l,n.modifiersData.popperOffsets.y+=c),n.modifiersData[s]=o}var w0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:y0};function b0(e){var n=e.state,t=e.name;n.modifiersData[t]=Nc({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var x0={name:"popperOffsets",enabled:!0,phase:"read",fn:b0,data:{}};function C0(e){return e==="x"?"y":"x"}function T0(e){var n=e.state,t=e.options,s=e.name,i=t.mainAxis,r=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,f=t.padding,h=t.tether,d=h===void 0?!0:h,g=t.tetherOffset,y=g===void 0?0:g,b=us(n,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),x=me(n.placement),T=On(n.placement),S=!T,w=Uo(x),_=C0(w),W=n.modifiersData.popperOffsets,X=n.rects.reference,k=n.rects.popper,Y=typeof y=="function"?y(Object.assign({},n.rects,{placement:n.placement})):y,N=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),Z=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,D={x:0,y:0};if(W){if(r){var J,ft=w==="y"?kt:Bt,Ht=w==="y"?qt:Kt,it=w==="y"?"height":"width",nt=W[w],ot=nt+b[ft],Ot=nt-b[Ht],we=d?-k[it]/2:0,Jt=T===En?X[it]:k[it],Mt=T===En?-k[it]:-X[it],ze=n.elements.arrow,Pe=d&&ze?Wo(ze):{width:0,height:0},re=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:Hc(),St=re[ft],be=re[Ht],oe=Xn(0,X[it],Pe[it]),ae=S?X[it]/2-we-oe-St-N.mainAxis:Jt-oe-St-N.mainAxis,kn=S?-X[it]/2+we+oe+be+N.mainAxis:Mt+oe+be+N.mainAxis,Ne=n.elements.arrow&&gs(n.elements.arrow),p=Ne?w==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,v=(J=Z==null?void 0:Z[w])!=null?J:0,C=nt+ae-v-p,E=nt+kn-v,M=Xn(d?Us(ot,C):ot,nt,d?sn(Ot,E):Ot);W[w]=M,D[w]=M-nt}if(a){var A,B=w==="x"?kt:Bt,L=w==="x"?qt:Kt,I=W[_],P=_==="y"?"height":"width",j=I+b[B],F=I-b[L],U=[kt,Bt].indexOf(x)!==-1,K=(A=Z==null?void 0:Z[_])!=null?A:0,tt=U?j:I-X[P]-k[P]-K+N.altAxis,ht=U?I+X[P]+k[P]-K-N.altAxis:F,at=d&&U?Gg(tt,I,ht):Xn(d?tt:j,I,d?ht:F);W[_]=at,D[_]=at-I}n.modifiersData[s]=D}}var M0={name:"preventOverflow",enabled:!0,phase:"main",fn:T0,requiresIfExists:["offset"]};function E0(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function _0(e){return e===Ut(e)||!Xt(e)?jo(e):E0(e)}function P0(e){var n=e.getBoundingClientRect(),t=_n(n.width)/e.offsetWidth||1,s=_n(n.height)/e.offsetHeight||1;return t!==1||s!==1}function O0(e,n,t){t===void 0&&(t=!1);var s=Xt(n),i=Xt(n)&&P0(n),r=Ve(n),o=Pn(e,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!t)&&((ye(n)!=="body"||Go(r))&&(a=_0(n)),Xt(n)?(l=Pn(n,!0),l.x+=n.clientLeft,l.y+=n.clientTop):r&&(l.x=Yo(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function S0(e){var n=new Map,t=new Set,s=[];e.forEach(function(r){n.set(r.name,r)});function i(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=n.get(a);l&&i(l)}}),s.push(r)}return e.forEach(function(r){t.has(r.name)||i(r)}),s}function R0(e){var n=S0(e);return zg.reduce(function(t,s){return t.concat(n.filter(function(i){return i.phase===s}))},[])}function L0(e){var n;return function(){return n||(n=new Promise(function(t){Promise.resolve().then(function(){n=void 0,t(e())})})),n}}function A0(e){var n=e.reduce(function(t,s){var i=t[s.name];return t[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,t},{});return Object.keys(n).map(function(t){return n[t]})}var ol={placement:"bottom",modifiers:[],strategy:"absolute"};function al(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return!n.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function I0(e){e===void 0&&(e={});var n=e,t=n.defaultModifiers,s=t===void 0?[]:t,i=n.defaultOptions,r=i===void 0?ol:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},ol,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:u,setOptions:function(x){var T=typeof x=="function"?x(u.options):x;y(),u.options=Object.assign({},r,u.options,T),u.scrollParents={reference:on(a)?qn(a):a.contextElement?qn(a.contextElement):[],popper:qn(l)};var S=R0(A0([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(w){return w.enabled}),g(),d.update()},forceUpdate:function(){if(!h){var x=u.elements,T=x.reference,S=x.popper;if(al(T,S)){u.rects={reference:O0(T,gs(S),u.options.strategy==="fixed"),popper:Wo(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(N){return u.modifiersData[N.name]=Object.assign({},N.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var _=u.orderedModifiers[w],W=_.fn,X=_.options,k=X===void 0?{}:X,Y=_.name;typeof W=="function"&&(u=W({state:u,options:k,name:Y,instance:d})||u)}}}},update:L0(function(){return new Promise(function(b){d.forceUpdate(),b(u)})}),destroy:function(){y(),h=!0}};if(!al(a,l))return d;d.setOptions(c).then(function(b){!h&&c.onFirstUpdate&&c.onFirstUpdate(b)});function g(){u.orderedModifiers.forEach(function(b){var x=b.name,T=b.options,S=T===void 0?{}:T,w=b.effect;if(typeof w=="function"){var _=w({state:u,name:x,instance:d,options:S}),W=function(){};f.push(_||W)}})}function y(){f.forEach(function(b){return b()}),f=[]}return d}}var $0=[s0,x0,e0,Ug,w0,p0,M0,Zg,m0],k0=I0({defaultModifiers:$0});const B0=(e,n,t)=>{const s=ct(),i=At(()=>({onFirstUpdate:()=>{var o;(o=s.value)==null||o.update()},placement:t.value.placement||"bottom",strategy:t.value.strategy||"fixed"})),r=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Wt([e,n],([o,a])=>{r(),!(!o||!a)&&(s.value=k0(o,a,$(i)),console.log(s.value))}),Wt(i,o=>{const a=$(s);a&&a.setOptions(o)},{deep:!0}),An(()=>{r()}),{update:()=>{var o;return(o=s.value)==null?void 0:o.update()}}};function D0(e){return gl()?(pu(e),!0):!1}function Wc(e){return typeof e=="function"?e():$(e)}const Uc=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const H0=Object.prototype.toString,F0=e=>H0.call(e)==="[object Object]",As=()=>{},V0=z0();function z0(){var e,n;return Uc&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Wn(e){var n;const t=Wc(e);return(n=t==null?void 0:t.$el)!=null?n:t}const jc=Uc?window:void 0;function Yi(...e){let n,t,s,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,s,i]=e,n=jc):[n,t,s,i]=e,!n)return As;Array.isArray(t)||(t=[t]),Array.isArray(s)||(s=[s]);const r=[],o=()=>{r.forEach(u=>u()),r.length=0},a=(u,f,h,d)=>(u.addEventListener(f,h,d),()=>u.removeEventListener(f,h,d)),l=Wt(()=>[Wn(n),Wc(i)],([u,f])=>{if(o(),!u)return;const h=F0(f)?{...f}:f;r.push(...t.flatMap(d=>s.map(g=>a(u,d,g,h))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return D0(c),c}let ll=!1;function N0(e,n,t={}){const{window:s=jc,ignore:i=[],capture:r=!0,detectIframe:o=!1}=t;if(!s)return As;V0&&!ll&&(ll=!0,Array.from(s.document.body.children).forEach(h=>h.addEventListener("click",As)),s.document.documentElement.addEventListener("click",As));let a=!0;const l=h=>i.some(d=>{if(typeof d=="string")return Array.from(s.document.querySelectorAll(d)).some(g=>g===h.target||h.composedPath().includes(g));{const g=Wn(d);return g&&(h.target===g||h.composedPath().includes(g))}}),u=[Yi(s,"click",h=>{const d=Wn(e);if(!(!d||d===h.target||h.composedPath().includes(d))){if(h.detail===0&&(a=!l(h)),!a){a=!0;return}n(h)}},{passive:!0,capture:r}),Yi(s,"pointerdown",h=>{const d=Wn(e);a=!l(h)&&!!(d&&!h.composedPath().includes(d))},{passive:!0}),o&&Yi(s,"blur",h=>{setTimeout(()=>{var d;const g=Wn(e);((d=s.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(g!=null&&g.contains(s.document.activeElement))&&n(h)},0)})].filter(Boolean);return()=>u.forEach(h=>h())}var Xo=gt({name:"Popper",__name:"Popper",props:{visible:Boolean,placement:{type:String,default:"left"}},emits:["beforeOpen","beforeClose","clickOutSide","update:visible"],setup(e,{emit:n}){const t=e,s=n,i=vt("popper"),r=ct(),o=ct(),a=At(()=>({placement:t.placement})),{update:l}=B0(r,o,a);return Wt(()=>t.visible,()=>{t.visible?s("beforeOpen"):s("beforeClose"),l()}),N0(o,()=>{s("update:visible",!1),s("clickOutSide")}),(c,u)=>(H(),G("div",{class:z($(i).b())},[V("div",{ref_key:"referenceRef",ref:r,class:z($(i).e("reference"))},[Te(c.$slots,"default")],2),(H(),Lt(ec,{to:"body"},[e.visible?(H(),G("div",{key:0,ref_key:"popperRef",ref:o,class:z($(i).e("content"))},[Te(c.$slots,"content")],2)):$e("v-if",!0)]))],2))}});Xo.__file="src/frameworks/vue/components/popper/Popper.vue";var jr=gt({name:"ColorPicker",__name:"ColorPicker",props:{modelValue:{type:String,default:""},enableAlpha:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const t=vt("color"),s=ct(),i=ct(),r=ct(!1),o=e,a=n,l=Sg(o.modelValue);yi(Pc,l);const c=()=>{l.actions.setValue(o.modelValue),r.value=!0},u=()=>{a("update:modelValue",l.state.currentValue)},f=h=>{a("update:modelValue",h),r.value=!1};return(h,d)=>(H(),Lt(Xo,{onClickOutSide:u,visible:r.value,"onUpdate:visible":d[0]||(d[0]=g=>r.value=g)},{content:ee(()=>[et(Ic,{onOk:f,enableAlpha:e.enableAlpha,ref_key:"panelRef",ref:s},null,8,["enableAlpha"])]),default:ee(()=>[V("div",{class:z($(t).b())},[et(Oc,{ref_key:"triggerRef",ref:i,onFocus:c},null,512)],2)]),_:1},8,["visible"]))}});jr.__file="src/frameworks/vue/components/color-picker/ColorPicker.vue";var Yr=gt({name:"IntInput",__name:"IntInput",props:{modelValue:{type:[String,Number],default:""},prepend:{type:String,default:""},append:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:n}){const t=e,s=n,i=ct(t.modelValue);Wt(()=>t.modelValue,()=>{i.value=t.modelValue});const r=()=>{i.value=pg(i.value),s("update:modelValue",i.value)};return(o,a)=>(H(),Lt(Fe,{prepend:e.prepend,append:e.append,modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l),onBlur:r},null,8,["prepend","append","modelValue"]))}});Yr.__file="src/frameworks/vue/components/int-input/IntInput.vue";var Yc=gt({name:"Option",__name:"Option",props:{option:{type:Object,required:!0},isSelected:{type:Boolean}},setup(e){const n=vt("option");return(t,s)=>(H(),G("div",{class:z([$(n).b(),$(n).is("selected",e.isSelected)])},[V("span",{class:z($(n).e("innter"))},[Te(t.$slots,"default",{},()=>[go(bn(e.option.label),1)])],2)],2))}});Yc.__file="src/frameworks/vue/components/select/Option.vue";var Gr=gt({name:"Select",__name:"Select",props:{options:{type:Array,default:[]},modelValue:{type:[String,Number],default:""}},emits:["update:modelValue"],setup(e,{emit:n}){const t=vt("select"),s=e,i=n,r=ct(!1),o=ct(),a=ct(0),l=ct(!1),c=()=>{if(!o.value)return;const{width:h}=o.value.getBoundingClientRect();a.value=h,l.value=!0},u=ct("");Wt([()=>s.modelValue,()=>s.options],()=>{var h;u.value=((h=s.options.find(d=>d.value===s.modelValue))==null?void 0:h.label)||s.modelValue},{deep:!0,immediate:!0});const f=h=>{i("update:modelValue",h.value),l.value=!1};return(h,d)=>(H(),Lt(Xo,{onBeforeOpen:d[0]||(d[0]=g=>r.value=!0),onBeforeClose:d[1]||(d[1]=g=>r.value=!1),placement:"bottom",visible:l.value,"onUpdate:visible":d[2]||(d[2]=g=>l.value=g)},{content:ee(()=>[V("div",{style:Nt({minWidth:a.value+"px"}),class:z($(t).e("options"))},[(H(!0),G(bt,null,Tn(e.options,g=>(H(),Lt(Yc,{"is-selected":g.value===e.modelValue,onClick:y=>f(g),key:g.value,option:g},null,8,["is-selected","onClick","option"]))),128))],6)]),default:ee(()=>[V("div",{ref_key:"inputRef",ref:o,class:z([$(t).b(),$(t).is("active",r.value)])},[et(Fe,{"model-value":u.value,onClick:c,readonly:""},{suffix:ee(()=>[et(Fo,{class:z($(t).e("arrow"))},{default:ee(()=>[et($(_o))]),_:1},8,["class"])]),_:1},8,["model-value"])],2)]),_:1},8,["visible"]))}});Gr.__file="src/frameworks/vue/components/select/Select.vue";var Xr=gt({name:"Switch",__name:"Switch",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:n}){const t=vt("switch"),s=n,i=r=>{s("update:modelValue",r)};return(r,o)=>(H(),G("div",{class:z([$(t).b(),$(t).is("active",e.modelValue)])},[V("div",{onClick:o[0]||(o[0]=a=>i(!e.modelValue)),class:z($(t).e("wrapper"))},[V("div",{class:z($(t).e("action"))},null,2)],2)],2))}});Xr.__file="src/frameworks/vue/components/switch/Switch.vue";var Gc=gt({__name:"PropertyItem",props:{schema:{type:Object,required:!0}},setup(e){const n=vt("property-item"),t=e,s={[Vr.name]:Vr,[zr.name]:zr,[jr.name]:jr,[Yr.name]:Yr,[Gr.name]:Gr,[Xr.name]:Xr},i=At(()=>typeof t.schema.component=="string"?s[t.schema.component]:t.schema.component),r=At(()=>t.schema.componentAttrs||{}),o=wg(),a=Vo(),l=()=>{const g=o.value;if(t.schema.getter)return t.schema.getter(g);if(t.schema.keyType==="attr")return g.getAttr(t.schema.key);if(t.schema.keyType==="base"){const y=`get${Ka(t.schema.key)}`;return g[y]()}},c=ct(l()),u=g=>{const y=o.value;if(t.schema.setter)t.schema.setter(y,g);else if(t.schema.keyType==="attr")y.setAttr(t.schema.key,g);else if(t.schema.keyType==="base"){const b=`set${Ka(t.schema.key)}`;y[b](g)}},f=g=>{const y=l();if(gg(y,g))return;u(g);const b={undo:()=>{u(y)},redo:()=>{u(g)}};a.getEditor().actionManager.push(b)},h=g=>{f(g),c.value=l()},d=()=>{c.value=l()};return t.schema.watch&&o.value.on(t.schema.watch,d),An(()=>{t.schema.watch&&o.value.off(t.schema.watch,d)}),(g,y)=>(H(),G("div",{class:z($(n).b())},[e.schema.label?(H(),G("div",{key:0,class:z($(n).e("label"))},bn(e.schema.label),3)):$e("v-if",!0),V("div",{class:z($(n).e("content"))},[i.value?(H(),Lt(Bs(i.value),vo({key:0},r.value,{"model-value":c.value,"onUpdate:modelValue":h}),null,16,["model-value"])):$e("v-if",!0)],2)],2))}});Gc.__file="src/frameworks/vue/property-panel/PropertyItem.vue";var Xc=gt({__name:"PropertyPanel",setup(e){const n=vt("property-panel"),t=Vo(),s=ct([]),i=ct(null),r=ct(null);yi(_c,r);let o;const a=ct(!1),l=async()=>{if(a.value=!0,await Al(),a.value=!1,s.value=Cn(o.getSelectionList()),!s.value.length)i.value=Ja.scene,r.value=t.getEditor();else if(s.value.length===1){const c=s.value[0].getCategory(),u=Ja[c]||null;i.value=u,r.value=Cn(s.value[0])}else i.value=null,r.value=null};return t.ready().then(()=>{o=t.getEditor().selectionManager,o.on(O.change,l),l()}),An(()=>{o.off(O.change,l)}),(c,u)=>(H(),G("div",{class:z([$(n).b()])},[!a.value&&i.value&&r.value?(H(),G("div",{key:r.value.id,class:z($(n).e("group-list"))},[(H(!0),G(bt,null,Tn(i.value.propertyGroups,f=>(H(),G("div",{class:z($(n).e("group-item"))},[V("div",{class:z($(n).e("group-title"))},bn(f.name),3),V("div",{class:z($(n).e("property-list"))},[(H(!0),G(bt,null,Tn(f.properties,h=>(H(),Lt(Gc,{schema:h},null,8,["schema"]))),256))],2)],2))),256))],2)):$e("v-if",!0)],2))}});Xc.__file="src/frameworks/vue/property-panel/PropertyPanel.vue";var zt=(e=>(e.TOP="top",e.LEFT="left",e.RIGHT="right",e.BOTTOM="bottom",e))(zt||{});zt.LEFT+"",zt.RIGHT+"",zt.TOP+"",zt.BOTTOM+"";zt.LEFT+"",zt.RIGHT,zt.TOP+"",zt.BOTTOM,zt.BOTTOM+"",zt.TOP,zt.RIGHT+"",zt.LEFT;class W0{constructor(){m(this,"eventMap",new Map);m(this,"eventMapCache",new Map)}on(n,t){return this.eventMap.has(n)||this.eventMap.set(n,[]),this.eventMap.get(n).push(t),this}emit(n,...t){const s=this.eventMap.get(n);return!s||s.length===0?!1:(s.forEach(i=>{i(...t)}),!0)}off(n,t){if(this.eventMap.has(n)){const s=this.eventMap.get(n).filter(i=>i!==t);s.length?this.eventMap.set(n,s):this.eventMap.delete(n)}return this}clear(){this.eventMapCache.clear();const n=this.eventMap.entries();for(const[t,s]of n)this.eventMapCache.set(t,s);this.eventMap.clear()}reset(){this.eventMap.clear();const n=this.eventMapCache.entries();for(const[t,s]of n)this.eventMap.set(t,s)}}var U0=[];for(var Gi=0;Gi<256;++Gi)U0.push((Gi+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var js=(e=>(e.rectChange="rectChange",e.change="change",e.mouseIn="mouseIn",e.mouseOut="mouseOut",e.mouseDown="mouseDown",e.mouseUp="mouseUp",e.REPAINT="repaint",e))(js||{});class qc extends W0{constructor(t){super();m(this,"statusChange",()=>{this.emit(js.change)});this.editor=t}isActive(){return!1}dispose(){this.clear()}}m(qc,"name");function j0(e){localStorage.setItem("scene-json",JSON.stringify(e))}function Y0(){const e=localStorage.getItem("scene-json");return e?JSON.parse(e):null}class G0 extends qc{constructor(t,s){super(t);m(this,"lastSaveCursor",-1);this.modelManager=s,t.actionManager.on(js.change,this.statusChange)}isEnable(){return this.editor.actionManager.cursor!==this.lastSaveCursor}execute(){const t=this.editor.getSceneData();j0(t),this.lastSaveCursor=this.editor.actionManager.cursor,this.statusChange()}dispose(){super.dispose(),this.editor.actionManager.off(js.change,this.statusChange)}getName(){return"save"}getLabel(){return""}}const X0={class:"editor-page"},q0={class:"editor-header"},K0={class:"header-toolbar"},Z0=V("span",null,"stom",-1),J0={class:"editor-content"},Q0={class:"editor-box"},tm=gt({__name:"App",setup(e){const n=oa([]),t=mg(),s=oa(yg());t.register(s.value);const i=o=>{t.setEditor(o);const a=t.getModelManager(),l=Y0();l&&o.parseSceneData(l,a);const c=fg(o);c.push(new G0(o,a)),n.value=Cn(c)},r=()=>{window.open("https://github.com/kkagura/stom")};return(o,a)=>(H(),G("div",X0,[V("div",q0,[V("div",K0,[et($(xc),{commands:n.value},null,8,["commands"])]),V("div",{onClick:r,class:"header-logo"},[et($(Ro),{class:"header-icon"}),Z0])]),V("div",J0,[et($(Ec),{"group-list":s.value},null,8,["group-list"]),V("div",Q0,[et($(wc),{onReady:i})]),et($(Xc))])]))}});Sf(tm).mount("#app");
